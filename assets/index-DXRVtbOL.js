(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function $g(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ch={exports:{}},ha={},Rh={exports:{}},je={};var ym;function u_(){if(ym)return je;ym=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.iterator;function M(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,W={};function $(O,L,ee){this.props=O,this.context=L,this.refs=W,this.updater=ee||D}$.prototype.isReactComponent={},$.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},$.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function oe(){}oe.prototype=$.prototype;function ye(O,L,ee){this.props=O,this.context=L,this.refs=W,this.updater=ee||D}var le=ye.prototype=new oe;le.constructor=ye,H(le,$.prototype),le.isPureReactComponent=!0;var ve=Array.isArray,Le=Object.prototype.hasOwnProperty,Te={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(O,L,ee){var Se,fe={},Pe=null,Me=null;if(L!=null)for(Se in L.ref!==void 0&&(Me=L.ref),L.key!==void 0&&(Pe=""+L.key),L)Le.call(L,Se)&&!P.hasOwnProperty(Se)&&(fe[Se]=L[Se]);var Y=arguments.length-2;if(Y===1)fe.children=ee;else if(1<Y){for(var K=Array(Y),ne=0;ne<Y;ne++)K[ne]=arguments[ne+2];fe.children=K}if(O&&O.defaultProps)for(Se in Y=O.defaultProps,Y)fe[Se]===void 0&&(fe[Se]=Y[Se]);return{$$typeof:s,type:O,key:Pe,ref:Me,props:fe,_owner:Te.current}}function k(O,L){return{$$typeof:s,type:O.type,key:L,ref:O.ref,props:O.props,_owner:O._owner}}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function N(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return L[ee]})}var V=/\/+/g;function I(O,L){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):L.toString(36)}function ue(O,L,ee,Se,fe){var Pe=typeof O;(Pe==="undefined"||Pe==="boolean")&&(O=null);var Me=!1;if(O===null)Me=!0;else switch(Pe){case"string":case"number":Me=!0;break;case"object":switch(O.$$typeof){case s:case e:Me=!0}}if(Me)return Me=O,fe=fe(Me),O=Se===""?"."+I(Me,0):Se,ve(fe)?(ee="",O!=null&&(ee=O.replace(V,"$&/")+"/"),ue(fe,L,ee,"",function(ne){return ne})):fe!=null&&(R(fe)&&(fe=k(fe,ee+(!fe.key||Me&&Me.key===fe.key?"":(""+fe.key).replace(V,"$&/")+"/")+O)),L.push(fe)),1;if(Me=0,Se=Se===""?".":Se+":",ve(O))for(var Y=0;Y<O.length;Y++){Pe=O[Y];var K=Se+I(Pe,Y);Me+=ue(Pe,L,ee,K,fe)}else if(K=M(O),typeof K=="function")for(O=K.call(O),Y=0;!(Pe=O.next()).done;)Pe=Pe.value,K=Se+I(Pe,Y++),Me+=ue(Pe,L,ee,K,fe);else if(Pe==="object")throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Me}function Be(O,L,ee){if(O==null)return O;var Se=[],fe=0;return ue(O,Se,"","",function(Pe){return L.call(ee,Pe,fe++)}),Se}function Ae(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var Ie={current:null},Z={transition:null},he={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Z,ReactCurrentOwner:Te};function se(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Be,forEach:function(O,L,ee){Be(O,function(){L.apply(this,arguments)},ee)},count:function(O){var L=0;return Be(O,function(){L++}),L},toArray:function(O){return Be(O,function(L){return L})||[]},only:function(O){if(!R(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},je.Component=$,je.Fragment=t,je.Profiler=o,je.PureComponent=ye,je.StrictMode=i,je.Suspense=g,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,je.act=se,je.cloneElement=function(O,L,ee){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Se=H({},O.props),fe=O.key,Pe=O.ref,Me=O._owner;if(L!=null){if(L.ref!==void 0&&(Pe=L.ref,Me=Te.current),L.key!==void 0&&(fe=""+L.key),O.type&&O.type.defaultProps)var Y=O.type.defaultProps;for(K in L)Le.call(L,K)&&!P.hasOwnProperty(K)&&(Se[K]=L[K]===void 0&&Y!==void 0?Y[K]:L[K])}var K=arguments.length-2;if(K===1)Se.children=ee;else if(1<K){Y=Array(K);for(var ne=0;ne<K;ne++)Y[ne]=arguments[ne+2];Se.children=Y}return{$$typeof:s,type:O.type,key:fe,ref:Pe,props:Se,_owner:Me}},je.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:u,_context:O},O.Consumer=O},je.createElement=T,je.createFactory=function(O){var L=T.bind(null,O);return L.type=O,L},je.createRef=function(){return{current:null}},je.forwardRef=function(O){return{$$typeof:m,render:O}},je.isValidElement=R,je.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:Ae}},je.memo=function(O,L){return{$$typeof:_,type:O,compare:L===void 0?null:L}},je.startTransition=function(O){var L=Z.transition;Z.transition={};try{O()}finally{Z.transition=L}},je.unstable_act=se,je.useCallback=function(O,L){return Ie.current.useCallback(O,L)},je.useContext=function(O){return Ie.current.useContext(O)},je.useDebugValue=function(){},je.useDeferredValue=function(O){return Ie.current.useDeferredValue(O)},je.useEffect=function(O,L){return Ie.current.useEffect(O,L)},je.useId=function(){return Ie.current.useId()},je.useImperativeHandle=function(O,L,ee){return Ie.current.useImperativeHandle(O,L,ee)},je.useInsertionEffect=function(O,L){return Ie.current.useInsertionEffect(O,L)},je.useLayoutEffect=function(O,L){return Ie.current.useLayoutEffect(O,L)},je.useMemo=function(O,L){return Ie.current.useMemo(O,L)},je.useReducer=function(O,L,ee){return Ie.current.useReducer(O,L,ee)},je.useRef=function(O){return Ie.current.useRef(O)},je.useState=function(O){return Ie.current.useState(O)},je.useSyncExternalStore=function(O,L,ee){return Ie.current.useSyncExternalStore(O,L,ee)},je.useTransition=function(){return Ie.current.useTransition()},je.version="18.3.1",je}var vm;function pd(){return vm||(vm=1,Rh.exports=u_()),Rh.exports}var _m;function c_(){if(_m)return ha;_m=1;var s=pd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,_){var x,A={},M=null,D=null;_!==void 0&&(M=""+_),g.key!==void 0&&(M=""+g.key),g.ref!==void 0&&(D=g.ref);for(x in g)i.call(g,x)&&!u.hasOwnProperty(x)&&(A[x]=g[x]);if(m&&m.defaultProps)for(x in g=m.defaultProps,g)A[x]===void 0&&(A[x]=g[x]);return{$$typeof:e,type:m,key:M,ref:D,props:A,_owner:o.current}}return ha.Fragment=t,ha.jsx=h,ha.jsxs=h,ha}var wm;function h_(){return wm||(wm=1,Ch.exports=c_()),Ch.exports}var v=h_(),ie=pd();const md=$g(ie);var ou={},Ph={exports:{}},nn={},Nh={exports:{}},bh={};var Em;function d_(){return Em||(Em=1,(function(s){function e(Z,he){var se=Z.length;Z.push(he);e:for(;0<se;){var O=se-1>>>1,L=Z[O];if(0<o(L,he))Z[O]=he,Z[se]=L,se=O;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var he=Z[0],se=Z.pop();if(se!==he){Z[0]=se;e:for(var O=0,L=Z.length,ee=L>>>1;O<ee;){var Se=2*(O+1)-1,fe=Z[Se],Pe=Se+1,Me=Z[Pe];if(0>o(fe,se))Pe<L&&0>o(Me,fe)?(Z[O]=Me,Z[Pe]=se,O=Pe):(Z[O]=fe,Z[Se]=se,O=Se);else if(Pe<L&&0>o(Me,se))Z[O]=Me,Z[Pe]=se,O=Pe;else break e}}return he}function o(Z,he){var se=Z.sortIndex-he.sortIndex;return se!==0?se:Z.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],x=1,A=null,M=3,D=!1,H=!1,W=!1,$=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function le(Z){for(var he=t(_);he!==null;){if(he.callback===null)i(_);else if(he.startTime<=Z)i(_),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(_)}}function ve(Z){if(W=!1,le(Z),!H)if(t(g)!==null)H=!0,Ae(Le);else{var he=t(_);he!==null&&Ie(ve,he.startTime-Z)}}function Le(Z,he){H=!1,W&&(W=!1,oe(T),T=-1),D=!0;var se=M;try{for(le(he),A=t(g);A!==null&&(!(A.expirationTime>he)||Z&&!N());){var O=A.callback;if(typeof O=="function"){A.callback=null,M=A.priorityLevel;var L=O(A.expirationTime<=he);he=s.unstable_now(),typeof L=="function"?A.callback=L:A===t(g)&&i(g),le(he)}else i(g);A=t(g)}if(A!==null)var ee=!0;else{var Se=t(_);Se!==null&&Ie(ve,Se.startTime-he),ee=!1}return ee}finally{A=null,M=se,D=!1}}var Te=!1,P=null,T=-1,k=5,R=-1;function N(){return!(s.unstable_now()-R<k)}function V(){if(P!==null){var Z=s.unstable_now();R=Z;var he=!0;try{he=P(!0,Z)}finally{he?I():(Te=!1,P=null)}}else Te=!1}var I;if(typeof ye=="function")I=function(){ye(V)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Be=ue.port2;ue.port1.onmessage=V,I=function(){Be.postMessage(null)}}else I=function(){$(V,0)};function Ae(Z){P=Z,Te||(Te=!0,I())}function Ie(Z,he){T=$(function(){Z(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_continueExecution=function(){H||D||(H=!0,Ae(Le))},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return M},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(Z){switch(M){case 1:case 2:case 3:var he=3;break;default:he=M}var se=M;M=he;try{return Z()}finally{M=se}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Z,he){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var se=M;M=Z;try{return he()}finally{M=se}},s.unstable_scheduleCallback=function(Z,he,se){var O=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?O+se:O):se=O,Z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=se+L,Z={id:x++,callback:he,priorityLevel:Z,startTime:se,expirationTime:L,sortIndex:-1},se>O?(Z.sortIndex=se,e(_,Z),t(g)===null&&Z===t(_)&&(W?(oe(T),T=-1):W=!0,Ie(ve,se-O))):(Z.sortIndex=L,e(g,Z),H||D||(H=!0,Ae(Le))),Z},s.unstable_shouldYield=N,s.unstable_wrapCallback=function(Z){var he=M;return function(){var se=M;M=he;try{return Z.apply(this,arguments)}finally{M=se}}}})(bh)),bh}var xm;function f_(){return xm||(xm=1,Nh.exports=d_()),Nh.exports}var Tm;function p_(){if(Tm)return nn;Tm=1;var s=pd(),e=f_();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},A={};function M(n){return g.call(A,n)?!0:g.call(x,n)?!1:_.test(n)?A[n]=!0:(x[n]=!0,!1)}function D(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function H(n,r,a,c){if(r===null||typeof r>"u"||D(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function W(n,r,a,c,d,p,w){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=w}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];$[r]=new W(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var oe=/[\-:]([a-z])/g;function ye(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(oe,ye);$[r]=new W(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(oe,ye);$[r]=new W(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(oe,ye);$[r]=new W(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function le(n,r,a,c){var d=$.hasOwnProperty(r)?$[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(H(r,a,d,c)&&(a=null),c||d===null?M(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var ve=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Le=Symbol.for("react.element"),Te=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),N=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Be=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),Z=Symbol.iterator;function he(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,O;function L(n){if(O===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+n}var ee=!1;function Se(n,r){if(!n||ee)return"";ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(z){var c=z}Reflect.construct(n,[],r)}else{try{r.call()}catch(z){c=z}n.call(r.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,S=p.length-1;1<=w&&0<=S&&d[w]!==p[S];)S--;for(;1<=w&&0<=S;w--,S--)if(d[w]!==p[S]){if(w!==1||S!==1)do if(w--,S--,0>S||d[w]!==p[S]){var C=`
`+d[w].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=w&&0<=S);break}}}finally{ee=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?L(n):""}function fe(n){switch(n.tag){case 5:return L(n.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return n=Se(n.type,!1),n;case 11:return n=Se(n.type.render,!1),n;case 1:return n=Se(n.type,!0),n;default:return""}}function Pe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case Te:return"Portal";case k:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case R:return(n._context.displayName||"Context")+".Provider";case V:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Be:return r=n.displayName||null,r!==null?r:Pe(n.type)||"Memo";case Ae:r=n._payload,n=n._init;try{return Pe(n(r))}catch{}}return null}function Me(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Y(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function K(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ne(n){var r=K(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ne(n){n._valueTracker||(n._valueTracker=ne(n))}function tt(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=K(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Ce(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $t(n,r){var a=r.checked;return se({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Gt(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Y(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Or(n,r){r=r.checked,r!=null&&le(n,"checked",r,!1)}function vo(n,r){Or(n,r);var a=Y(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?ri(n,r.type,a):r.hasOwnProperty("defaultValue")&&ri(n,r.type,Y(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Ha(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ri(n,r,a){(r!=="number"||Ce(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var sr=Array.isArray;function ir(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Y(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function _o(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function si(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(sr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Y(a)}}function ii(n,r){var a=Y(r.value),c=Y(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function wo(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function mt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?mt(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var or,Eo=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(or=or||document.createElement("div"),or.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=or.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Vr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_s=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(n){_s.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),vs[r]=vs[n]})});function xo(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||vs.hasOwnProperty(n)&&vs[n]?(""+r).trim():r+"px"}function To(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=xo(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Io=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function So(n,r){if(r){if(Io[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function ko(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ws=null;function oi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ai=null,hn=null,Un=null;function li(n){if(n=Jo(n)){if(typeof ai!="function")throw Error(t(280));var r=n.stateNode;r&&(r=El(r),ai(n.stateNode,n.type,r))}}function zn(n){hn?Un?Un.push(n):Un=[n]:hn=n}function Ao(){if(hn){var n=hn,r=Un;if(Un=hn=null,li(n),r)for(n=0;n<r.length;n++)li(r[n])}}function Es(n,r){return n(r)}function Co(){}var ar=!1;function Ro(n,r,a){if(ar)return n(r,a);ar=!0;try{return Es(n,r,a)}finally{ar=!1,(hn!==null||Un!==null)&&(Co(),Ao())}}function ut(n,r){var a=n.stateNode;if(a===null)return null;var c=El(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var ui=!1;if(m)try{var In={};Object.defineProperty(In,"passive",{get:function(){ui=!0}}),window.addEventListener("test",In,In),window.removeEventListener("test",In,In)}catch{ui=!1}function xs(n,r,a,c,d,p,w,S,C){var z=Array.prototype.slice.call(arguments,3);try{r.apply(a,z)}catch(G){this.onError(G)}}var Ts=!1,ci=null,Sn=!1,Po=null,nc={onError:function(n){Ts=!0,ci=n}};function hi(n,r,a,c,d,p,w,S,C){Ts=!1,ci=null,xs.apply(nc,arguments)}function qa(n,r,a,c,d,p,w,S,C){if(hi.apply(this,arguments),Ts){if(Ts){var z=ci;Ts=!1,ci=null}else throw Error(t(198));Sn||(Sn=!0,Po=z)}}function kn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Is(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function An(n){if(kn(n)!==n)throw Error(t(188))}function Ka(n){var r=n.alternate;if(!r){if(r=kn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return An(d),n;if(p===c)return An(d),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,S=d.child;S;){if(S===a){w=!0,a=d,c=p;break}if(S===c){w=!0,c=d,a=p;break}S=S.sibling}if(!w){for(S=p.child;S;){if(S===a){w=!0,a=p,c=d;break}if(S===c){w=!0,c=p,a=d;break}S=S.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function No(n){return n=Ka(n),n!==null?di(n):null}function di(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=di(n);if(r!==null)return r;n=n.sibling}return null}var fi=e.unstable_scheduleCallback,bo=e.unstable_cancelCallback,Ga=e.unstable_shouldYield,rc=e.unstable_requestPaint,Ye=e.unstable_now,Qa=e.unstable_getCurrentPriorityLevel,Ss=e.unstable_ImmediatePriority,Lr=e.unstable_UserBlockingPriority,dn=e.unstable_NormalPriority,Do=e.unstable_LowPriority,Ja=e.unstable_IdlePriority,ks=null,rn=null;function Ya(n){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(ks,n,void 0,(n.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Za,Oo=Math.log,Xa=Math.LN2;function Za(n){return n>>>=0,n===0?32:31-(Oo(n)/Xa|0)|0}var pi=64,mi=4194304;function Mr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function As(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var S=w&~d;S!==0?c=Mr(S):(p&=w,p!==0&&(c=Mr(p)))}else w=a&~d,w!==0?c=Mr(w):p!==0&&(c=Mr(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-Wt(r),d=1<<a,c|=n[a],r&=~d;return c}function sc(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-Wt(p),S=1<<w,C=d[w];C===-1?((S&a)===0||(S&c)!==0)&&(d[w]=sc(S,r)):C<=r&&(n.expiredLanes|=S),p&=~S}}function sn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Cs(){var n=pi;return pi<<=1,(pi&4194240)===0&&(pi=64),n}function jr(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Fr(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Wt(r),n[r]=a}function Je(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Wt(a),p=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function Ur(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-Wt(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Ue=0;function zr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var el,gi,tl,nl,rl,Vo=!1,Bn=[],At=null,Cn=null,Rn=null,Br=new Map,fn=new Map,$n=[],ic="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sl(n,r){switch(n){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Br.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(r.pointerId)}}function Qt(n,r,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=Jo(r),r!==null&&gi(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function oc(n,r,a,c,d){switch(r){case"focusin":return At=Qt(At,n,r,a,c,d),!0;case"dragenter":return Cn=Qt(Cn,n,r,a,c,d),!0;case"mouseover":return Rn=Qt(Rn,n,r,a,c,d),!0;case"pointerover":var p=d.pointerId;return Br.set(p,Qt(Br.get(p)||null,n,r,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,fn.set(p,Qt(fn.get(p)||null,n,r,a,c,d)),!0}return!1}function il(n){var r=Ds(n.target);if(r!==null){var a=kn(r);if(a!==null){if(r=a.tag,r===13){if(r=Is(a),r!==null){n.blockedOn=r,rl(n.priority,function(){tl(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ur(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=yi(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);ws=c,a.target.dispatchEvent(c),ws=null}else return r=Jo(a),r!==null&&gi(r),n.blockedOn=a,!1;r.shift()}return!0}function Rs(n,r,a){ur(n)&&a.delete(r)}function ol(){Vo=!1,At!==null&&ur(At)&&(At=null),Cn!==null&&ur(Cn)&&(Cn=null),Rn!==null&&ur(Rn)&&(Rn=null),Br.forEach(Rs),fn.forEach(Rs)}function Pn(n,r){n.blockedOn===r&&(n.blockedOn=null,Vo||(Vo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ol)))}function Nn(n){function r(d){return Pn(d,n)}if(0<Bn.length){Pn(Bn[0],n);for(var a=1;a<Bn.length;a++){var c=Bn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(At!==null&&Pn(At,n),Cn!==null&&Pn(Cn,n),Rn!==null&&Pn(Rn,n),Br.forEach(r),fn.forEach(r),a=0;a<$n.length;a++)c=$n[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<$n.length&&(a=$n[0],a.blockedOn===null);)il(a),a.blockedOn===null&&$n.shift()}var cr=ve.ReactCurrentBatchConfig,$r=!0;function nt(n,r,a,c){var d=Ue,p=cr.transition;cr.transition=null;try{Ue=1,Lo(n,r,a,c)}finally{Ue=d,cr.transition=p}}function ac(n,r,a,c){var d=Ue,p=cr.transition;cr.transition=null;try{Ue=4,Lo(n,r,a,c)}finally{Ue=d,cr.transition=p}}function Lo(n,r,a,c){if($r){var d=yi(n,r,a,c);if(d===null)vc(n,r,c,Ps,a),sl(n,c);else if(oc(d,n,r,a,c))c.stopPropagation();else if(sl(n,c),r&4&&-1<ic.indexOf(n)){for(;d!==null;){var p=Jo(d);if(p!==null&&el(p),p=yi(n,r,a,c),p===null&&vc(n,r,c,Ps,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else vc(n,r,c,null,a)}}var Ps=null;function yi(n,r,a,c){if(Ps=null,n=oi(c),n=Ds(n),n!==null)if(r=kn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Is(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Ps=n,null}function Mo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qa()){case Ss:return 1;case Lr:return 4;case dn:case Do:return 16;case Ja:return 536870912;default:return 16}default:return 16}}var on=null,vi=null,Jt=null;function jo(){if(Jt)return Jt;var n,r=vi,a=r.length,c,d="value"in on?on.value:on.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&r[a-c]===d[p-c];c++);return Jt=d.slice(n,1<c?1-c:void 0)}function _i(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Wn(){return!0}function Fo(){return!1}function Ct(n){function r(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Wn:Fo,this.isPropagationStopped=Fo,this}return se(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),r}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=Ct(bn),Hn=se({},bn,{view:0,detail:0}),lc=Ct(Hn),Ei,hr,Wr,Ns=se({},Hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wr&&(Wr&&n.type==="mousemove"?(Ei=n.screenX-Wr.screenX,hr=n.screenY-Wr.screenY):hr=Ei=0,Wr=n),Ei)},movementY:function(n){return"movementY"in n?n.movementY:hr}}),xi=Ct(Ns),Uo=se({},Ns,{dataTransfer:0}),al=Ct(Uo),Ti=se({},Hn,{relatedTarget:0}),Ii=Ct(Ti),ll=se({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),dr=Ct(ll),ul=se({},bn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cl=Ct(ul),hl=se({},bn,{data:0}),zo=Ct(hl),Si={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=dl[n])?!!r[n]:!1}function qn(){return fl}var l=se({},Hn,{key:function(n){if(n.key){var r=Si[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=_i(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ht[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qn,charCode:function(n){return n.type==="keypress"?_i(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_i(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=Ct(l),y=se({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=Ct(y),j=se({},Hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qn}),B=Ct(j),re=se({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Ct(re),yt=se({},Ns,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$e=Ct(yt),xt=[9,13,27,32],dt=m&&"CompositionEvent"in window,pn=null;m&&"documentMode"in document&&(pn=document.documentMode);var an=m&&"TextEvent"in window&&!pn,bs=m&&(!dt||pn&&8<pn&&11>=pn),ki=" ",hf=!1;function df(n,r){switch(n){case"keyup":return xt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ff(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ai=!1;function o0(n,r){switch(n){case"compositionend":return ff(r);case"keypress":return r.which!==32?null:(hf=!0,ki);case"textInput":return n=r.data,n===ki&&hf?null:n;default:return null}}function a0(n,r){if(Ai)return n==="compositionend"||!dt&&df(n,r)?(n=jo(),Jt=vi=on=null,Ai=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return bs&&r.locale!=="ko"?null:r.data;default:return null}}var l0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!l0[n.type]:r==="textarea"}function mf(n,r,a,c){zn(c),r=vl(r,"onChange"),0<r.length&&(a=new wi("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Bo=null,$o=null;function u0(n){Df(n,0)}function pl(n){var r=bi(n);if(tt(r))return n}function c0(n,r){if(n==="change")return r}var gf=!1;if(m){var uc;if(m){var cc="oninput"in document;if(!cc){var yf=document.createElement("div");yf.setAttribute("oninput","return;"),cc=typeof yf.oninput=="function"}uc=cc}else uc=!1;gf=uc&&(!document.documentMode||9<document.documentMode)}function vf(){Bo&&(Bo.detachEvent("onpropertychange",_f),$o=Bo=null)}function _f(n){if(n.propertyName==="value"&&pl($o)){var r=[];mf(r,$o,n,oi(n)),Ro(u0,r)}}function h0(n,r,a){n==="focusin"?(vf(),Bo=r,$o=a,Bo.attachEvent("onpropertychange",_f)):n==="focusout"&&vf()}function d0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pl($o)}function f0(n,r){if(n==="click")return pl(r)}function p0(n,r){if(n==="input"||n==="change")return pl(r)}function m0(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Dn=typeof Object.is=="function"?Object.is:m0;function Wo(n,r){if(Dn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!Dn(n[d],r[d]))return!1}return!0}function wf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ef(n,r){var a=wf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wf(a)}}function xf(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?xf(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Tf(){for(var n=window,r=Ce();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Ce(n.document)}return r}function hc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function g0(n){var r=Tf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&xf(a.ownerDocument.documentElement,a)){if(c!==null&&hc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Ef(a,p);var w=Ef(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var y0=m&&"documentMode"in document&&11>=document.documentMode,Ci=null,dc=null,Ho=null,fc=!1;function If(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fc||Ci==null||Ci!==Ce(c)||(c=Ci,"selectionStart"in c&&hc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ho&&Wo(Ho,c)||(Ho=c,c=vl(dc,"onSelect"),0<c.length&&(r=new wi("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Ci)))}function ml(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ri={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionend:ml("Transition","TransitionEnd")},pc={},Sf={};m&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function gl(n){if(pc[n])return pc[n];if(!Ri[n])return n;var r=Ri[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Sf)return pc[n]=r[a];return n}var kf=gl("animationend"),Af=gl("animationiteration"),Cf=gl("animationstart"),Rf=gl("transitionend"),Pf=new Map,Nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(n,r){Pf.set(n,r),u(r,[n])}for(var mc=0;mc<Nf.length;mc++){var gc=Nf[mc],v0=gc.toLowerCase(),_0=gc[0].toUpperCase()+gc.slice(1);Hr(v0,"on"+_0)}Hr(kf,"onAnimationEnd"),Hr(Af,"onAnimationIteration"),Hr(Cf,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(Rf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w0=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function bf(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,qa(c,r,void 0,n),n.currentTarget=null}function Df(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var w=c.length-1;0<=w;w--){var S=c[w],C=S.instance,z=S.currentTarget;if(S=S.listener,C!==p&&d.isPropagationStopped())break e;bf(d,S,z),p=C}else for(w=0;w<c.length;w++){if(S=c[w],C=S.instance,z=S.currentTarget,S=S.listener,C!==p&&d.isPropagationStopped())break e;bf(d,S,z),p=C}}}if(Sn)throw n=Po,Sn=!1,Po=null,n}function Ze(n,r){var a=r[Ic];a===void 0&&(a=r[Ic]=new Set);var c=n+"__bubble";a.has(c)||(Of(r,n,2,!1),a.add(c))}function yc(n,r,a){var c=0;r&&(c|=4),Of(a,n,c,r)}var yl="_reactListening"+Math.random().toString(36).slice(2);function Ko(n){if(!n[yl]){n[yl]=!0,i.forEach(function(a){a!=="selectionchange"&&(w0.has(a)||yc(a,!1,n),yc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[yl]||(r[yl]=!0,yc("selectionchange",!1,r))}}function Of(n,r,a,c){switch(Mo(r)){case 1:var d=nt;break;case 4:d=ac;break;default:d=Lo}a=d.bind(null,r,a,n),d=void 0,!ui||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function vc(n,r,a,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var C=w.tag;if((C===3||C===4)&&(C=w.stateNode.containerInfo,C===d||C.nodeType===8&&C.parentNode===d))return;w=w.return}for(;S!==null;){if(w=Ds(S),w===null)return;if(C=w.tag,C===5||C===6){c=p=w;continue e}S=S.parentNode}}c=c.return}Ro(function(){var z=p,G=oi(a),J=[];e:{var q=Pf.get(n);if(q!==void 0){var ae=wi,de=n;switch(n){case"keypress":if(_i(a)===0)break e;case"keydown":case"keyup":ae=f;break;case"focusin":de="focus",ae=Ii;break;case"focusout":de="blur",ae=Ii;break;case"beforeblur":case"afterblur":ae=Ii;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=al;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=B;break;case kf:case Af:case Cf:ae=dr;break;case Rf:ae=Ge;break;case"scroll":ae=lc;break;case"wheel":ae=$e;break;case"copy":case"cut":case"paste":ae=cl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=E}var pe=(r&4)!==0,ct=!pe&&n==="scroll",F=pe?q!==null?q+"Capture":null:q;pe=[];for(var b=z,U;b!==null;){U=b;var te=U.stateNode;if(U.tag===5&&te!==null&&(U=te,F!==null&&(te=ut(b,F),te!=null&&pe.push(Go(b,te,U)))),ct)break;b=b.return}0<pe.length&&(q=new ae(q,de,null,a,G),J.push({event:q,listeners:pe}))}}if((r&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",q&&a!==ws&&(de=a.relatedTarget||a.fromElement)&&(Ds(de)||de[fr]))break e;if((ae||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,ae?(de=a.relatedTarget||a.toElement,ae=z,de=de?Ds(de):null,de!==null&&(ct=kn(de),de!==ct||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=z),ae!==de)){if(pe=xi,te="onMouseLeave",F="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(pe=E,te="onPointerLeave",F="onPointerEnter",b="pointer"),ct=ae==null?q:bi(ae),U=de==null?q:bi(de),q=new pe(te,b+"leave",ae,a,G),q.target=ct,q.relatedTarget=U,te=null,Ds(G)===z&&(pe=new pe(F,b+"enter",de,a,G),pe.target=U,pe.relatedTarget=ct,te=pe),ct=te,ae&&de)t:{for(pe=ae,F=de,b=0,U=pe;U;U=Pi(U))b++;for(U=0,te=F;te;te=Pi(te))U++;for(;0<b-U;)pe=Pi(pe),b--;for(;0<U-b;)F=Pi(F),U--;for(;b--;){if(pe===F||F!==null&&pe===F.alternate)break t;pe=Pi(pe),F=Pi(F)}pe=null}else pe=null;ae!==null&&Vf(J,q,ae,pe,!1),de!==null&&ct!==null&&Vf(J,ct,de,pe,!0)}}e:{if(q=z?bi(z):window,ae=q.nodeName&&q.nodeName.toLowerCase(),ae==="select"||ae==="input"&&q.type==="file")var ge=c0;else if(pf(q))if(gf)ge=p0;else{ge=d0;var _e=h0}else(ae=q.nodeName)&&ae.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ge=f0);if(ge&&(ge=ge(n,z))){mf(J,ge,a,G);break e}_e&&_e(n,q,z),n==="focusout"&&(_e=q._wrapperState)&&_e.controlled&&q.type==="number"&&ri(q,"number",q.value)}switch(_e=z?bi(z):window,n){case"focusin":(pf(_e)||_e.contentEditable==="true")&&(Ci=_e,dc=z,Ho=null);break;case"focusout":Ho=dc=Ci=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,If(J,a,G);break;case"selectionchange":if(y0)break;case"keydown":case"keyup":If(J,a,G)}var we;if(dt)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ai?df(n,a)&&(Re="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(bs&&a.locale!=="ko"&&(Ai||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ai&&(we=jo()):(on=G,vi="value"in on?on.value:on.textContent,Ai=!0)),_e=vl(z,Re),0<_e.length&&(Re=new zo(Re,n,null,a,G),J.push({event:Re,listeners:_e}),we?Re.data=we:(we=ff(a),we!==null&&(Re.data=we)))),(we=an?o0(n,a):a0(n,a))&&(z=vl(z,"onBeforeInput"),0<z.length&&(G=new zo("onBeforeInput","beforeinput",null,a,G),J.push({event:G,listeners:z}),G.data=we))}Df(J,r)})}function Go(n,r,a){return{instance:n,listener:r,currentTarget:a}}function vl(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=ut(n,a),p!=null&&c.unshift(Go(n,p,d)),p=ut(n,r),p!=null&&c.push(Go(n,p,d))),n=n.return}return c}function Pi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Vf(n,r,a,c,d){for(var p=r._reactName,w=[];a!==null&&a!==c;){var S=a,C=S.alternate,z=S.stateNode;if(C!==null&&C===c)break;S.tag===5&&z!==null&&(S=z,d?(C=ut(a,p),C!=null&&w.unshift(Go(a,C,S))):d||(C=ut(a,p),C!=null&&w.push(Go(a,C,S)))),a=a.return}w.length!==0&&n.push({event:r,listeners:w})}var E0=/\r\n?/g,x0=/\u0000|\uFFFD/g;function Lf(n){return(typeof n=="string"?n:""+n).replace(E0,`
`).replace(x0,"")}function _l(n,r,a){if(r=Lf(r),Lf(n)!==r&&a)throw Error(t(425))}function wl(){}var _c=null,wc=null;function Ec(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var xc=typeof setTimeout=="function"?setTimeout:void 0,T0=typeof clearTimeout=="function"?clearTimeout:void 0,Mf=typeof Promise=="function"?Promise:void 0,I0=typeof queueMicrotask=="function"?queueMicrotask:typeof Mf<"u"?function(n){return Mf.resolve(null).then(n).catch(S0)}:xc;function S0(n){setTimeout(function(){throw n})}function Tc(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Nn(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Nn(r)}function qr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function jf(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),Kn="__reactFiber$"+Ni,Qo="__reactProps$"+Ni,fr="__reactContainer$"+Ni,Ic="__reactEvents$"+Ni,k0="__reactListeners$"+Ni,A0="__reactHandles$"+Ni;function Ds(n){var r=n[Kn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[fr]||a[Kn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=jf(n);n!==null;){if(a=n[Kn])return a;n=jf(n)}return r}n=a,a=n.parentNode}return null}function Jo(n){return n=n[Kn]||n[fr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function bi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function El(n){return n[Qo]||null}var Sc=[],Di=-1;function Kr(n){return{current:n}}function et(n){0>Di||(n.current=Sc[Di],Sc[Di]=null,Di--)}function Xe(n,r){Di++,Sc[Di]=n.current,n.current=r}var Gr={},Vt=Kr(Gr),Yt=Kr(!1),Os=Gr;function Oi(n,r){var a=n.type.contextTypes;if(!a)return Gr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Xt(n){return n=n.childContextTypes,n!=null}function xl(){et(Yt),et(Vt)}function Ff(n,r,a){if(Vt.current!==Gr)throw Error(t(168));Xe(Vt,r),Xe(Yt,a)}function Uf(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,Me(n)||"Unknown",d));return se({},a,c)}function Tl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Gr,Os=Vt.current,Xe(Vt,n),Xe(Yt,Yt.current),!0}function zf(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Uf(n,r,Os),c.__reactInternalMemoizedMergedChildContext=n,et(Yt),et(Vt),Xe(Vt,n)):et(Yt),Xe(Yt,a)}var pr=null,Il=!1,kc=!1;function Bf(n){pr===null?pr=[n]:pr.push(n)}function C0(n){Il=!0,Bf(n)}function Qr(){if(!kc&&pr!==null){kc=!0;var n=0,r=Ue;try{var a=pr;for(Ue=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}pr=null,Il=!1}catch(d){throw pr!==null&&(pr=pr.slice(n+1)),fi(Ss,Qr),d}finally{Ue=r,kc=!1}}return null}var Vi=[],Li=0,Sl=null,kl=0,mn=[],gn=0,Vs=null,mr=1,gr="";function Ls(n,r){Vi[Li++]=kl,Vi[Li++]=Sl,Sl=n,kl=r}function $f(n,r,a){mn[gn++]=mr,mn[gn++]=gr,mn[gn++]=Vs,Vs=n;var c=mr;n=gr;var d=32-Wt(c)-1;c&=~(1<<d),a+=1;var p=32-Wt(r)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,mr=1<<32-Wt(r)+d|a<<d|c,gr=p+n}else mr=1<<p|a<<d|c,gr=n}function Ac(n){n.return!==null&&(Ls(n,1),$f(n,1,0))}function Cc(n){for(;n===Sl;)Sl=Vi[--Li],Vi[Li]=null,kl=Vi[--Li],Vi[Li]=null;for(;n===Vs;)Vs=mn[--gn],mn[gn]=null,gr=mn[--gn],mn[gn]=null,mr=mn[--gn],mn[gn]=null}var ln=null,un=null,rt=!1,On=null;function Wf(n,r){var a=wn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function Hf(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,ln=n,un=qr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,ln=n,un=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Vs!==null?{id:mr,overflow:gr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=wn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,ln=n,un=null,!0):!1;default:return!1}}function Rc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pc(n){if(rt){var r=un;if(r){var a=r;if(!Hf(n,r)){if(Rc(n))throw Error(t(418));r=qr(a.nextSibling);var c=ln;r&&Hf(n,r)?Wf(c,a):(n.flags=n.flags&-4097|2,rt=!1,ln=n)}}else{if(Rc(n))throw Error(t(418));n.flags=n.flags&-4097|2,rt=!1,ln=n}}}function qf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ln=n}function Al(n){if(n!==ln)return!1;if(!rt)return qf(n),rt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Ec(n.type,n.memoizedProps)),r&&(r=un)){if(Rc(n))throw Kf(),Error(t(418));for(;r;)Wf(n,r),r=qr(r.nextSibling)}if(qf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){un=qr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}un=null}}else un=ln?qr(n.stateNode.nextSibling):null;return!0}function Kf(){for(var n=un;n;)n=qr(n.nextSibling)}function Mi(){un=ln=null,rt=!1}function Nc(n){On===null?On=[n]:On.push(n)}var R0=ve.ReactCurrentBatchConfig;function Yo(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(w){var S=d.refs;w===null?delete S[p]:S[p]=w},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Cl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Gf(n){var r=n._init;return r(n._payload)}function Qf(n){function r(F,b){if(n){var U=F.deletions;U===null?(F.deletions=[b],F.flags|=16):U.push(b)}}function a(F,b){if(!n)return null;for(;b!==null;)r(F,b),b=b.sibling;return null}function c(F,b){for(F=new Map;b!==null;)b.key!==null?F.set(b.key,b):F.set(b.index,b),b=b.sibling;return F}function d(F,b){return F=rs(F,b),F.index=0,F.sibling=null,F}function p(F,b,U){return F.index=U,n?(U=F.alternate,U!==null?(U=U.index,U<b?(F.flags|=2,b):U):(F.flags|=2,b)):(F.flags|=1048576,b)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function S(F,b,U,te){return b===null||b.tag!==6?(b=xh(U,F.mode,te),b.return=F,b):(b=d(b,U),b.return=F,b)}function C(F,b,U,te){var ge=U.type;return ge===P?G(F,b,U.props.children,te,U.key):b!==null&&(b.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Ae&&Gf(ge)===b.type)?(te=d(b,U.props),te.ref=Yo(F,b,U),te.return=F,te):(te=Xl(U.type,U.key,U.props,null,F.mode,te),te.ref=Yo(F,b,U),te.return=F,te)}function z(F,b,U,te){return b===null||b.tag!==4||b.stateNode.containerInfo!==U.containerInfo||b.stateNode.implementation!==U.implementation?(b=Th(U,F.mode,te),b.return=F,b):(b=d(b,U.children||[]),b.return=F,b)}function G(F,b,U,te,ge){return b===null||b.tag!==7?(b=Ws(U,F.mode,te,ge),b.return=F,b):(b=d(b,U),b.return=F,b)}function J(F,b,U){if(typeof b=="string"&&b!==""||typeof b=="number")return b=xh(""+b,F.mode,U),b.return=F,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Le:return U=Xl(b.type,b.key,b.props,null,F.mode,U),U.ref=Yo(F,null,b),U.return=F,U;case Te:return b=Th(b,F.mode,U),b.return=F,b;case Ae:var te=b._init;return J(F,te(b._payload),U)}if(sr(b)||he(b))return b=Ws(b,F.mode,U,null),b.return=F,b;Cl(F,b)}return null}function q(F,b,U,te){var ge=b!==null?b.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ge!==null?null:S(F,b,""+U,te);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Le:return U.key===ge?C(F,b,U,te):null;case Te:return U.key===ge?z(F,b,U,te):null;case Ae:return ge=U._init,q(F,b,ge(U._payload),te)}if(sr(U)||he(U))return ge!==null?null:G(F,b,U,te,null);Cl(F,U)}return null}function ae(F,b,U,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number")return F=F.get(U)||null,S(b,F,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Le:return F=F.get(te.key===null?U:te.key)||null,C(b,F,te,ge);case Te:return F=F.get(te.key===null?U:te.key)||null,z(b,F,te,ge);case Ae:var _e=te._init;return ae(F,b,U,_e(te._payload),ge)}if(sr(te)||he(te))return F=F.get(U)||null,G(b,F,te,ge,null);Cl(b,te)}return null}function de(F,b,U,te){for(var ge=null,_e=null,we=b,Re=b=0,St=null;we!==null&&Re<U.length;Re++){we.index>Re?(St=we,we=null):St=we.sibling;var qe=q(F,we,U[Re],te);if(qe===null){we===null&&(we=St);break}n&&we&&qe.alternate===null&&r(F,we),b=p(qe,b,Re),_e===null?ge=qe:_e.sibling=qe,_e=qe,we=St}if(Re===U.length)return a(F,we),rt&&Ls(F,Re),ge;if(we===null){for(;Re<U.length;Re++)we=J(F,U[Re],te),we!==null&&(b=p(we,b,Re),_e===null?ge=we:_e.sibling=we,_e=we);return rt&&Ls(F,Re),ge}for(we=c(F,we);Re<U.length;Re++)St=ae(we,F,Re,U[Re],te),St!==null&&(n&&St.alternate!==null&&we.delete(St.key===null?Re:St.key),b=p(St,b,Re),_e===null?ge=St:_e.sibling=St,_e=St);return n&&we.forEach(function(ss){return r(F,ss)}),rt&&Ls(F,Re),ge}function pe(F,b,U,te){var ge=he(U);if(typeof ge!="function")throw Error(t(150));if(U=ge.call(U),U==null)throw Error(t(151));for(var _e=ge=null,we=b,Re=b=0,St=null,qe=U.next();we!==null&&!qe.done;Re++,qe=U.next()){we.index>Re?(St=we,we=null):St=we.sibling;var ss=q(F,we,qe.value,te);if(ss===null){we===null&&(we=St);break}n&&we&&ss.alternate===null&&r(F,we),b=p(ss,b,Re),_e===null?ge=ss:_e.sibling=ss,_e=ss,we=St}if(qe.done)return a(F,we),rt&&Ls(F,Re),ge;if(we===null){for(;!qe.done;Re++,qe=U.next())qe=J(F,qe.value,te),qe!==null&&(b=p(qe,b,Re),_e===null?ge=qe:_e.sibling=qe,_e=qe);return rt&&Ls(F,Re),ge}for(we=c(F,we);!qe.done;Re++,qe=U.next())qe=ae(we,F,Re,qe.value,te),qe!==null&&(n&&qe.alternate!==null&&we.delete(qe.key===null?Re:qe.key),b=p(qe,b,Re),_e===null?ge=qe:_e.sibling=qe,_e=qe);return n&&we.forEach(function(l_){return r(F,l_)}),rt&&Ls(F,Re),ge}function ct(F,b,U,te){if(typeof U=="object"&&U!==null&&U.type===P&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Le:e:{for(var ge=U.key,_e=b;_e!==null;){if(_e.key===ge){if(ge=U.type,ge===P){if(_e.tag===7){a(F,_e.sibling),b=d(_e,U.props.children),b.return=F,F=b;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Ae&&Gf(ge)===_e.type){a(F,_e.sibling),b=d(_e,U.props),b.ref=Yo(F,_e,U),b.return=F,F=b;break e}a(F,_e);break}else r(F,_e);_e=_e.sibling}U.type===P?(b=Ws(U.props.children,F.mode,te,U.key),b.return=F,F=b):(te=Xl(U.type,U.key,U.props,null,F.mode,te),te.ref=Yo(F,b,U),te.return=F,F=te)}return w(F);case Te:e:{for(_e=U.key;b!==null;){if(b.key===_e)if(b.tag===4&&b.stateNode.containerInfo===U.containerInfo&&b.stateNode.implementation===U.implementation){a(F,b.sibling),b=d(b,U.children||[]),b.return=F,F=b;break e}else{a(F,b);break}else r(F,b);b=b.sibling}b=Th(U,F.mode,te),b.return=F,F=b}return w(F);case Ae:return _e=U._init,ct(F,b,_e(U._payload),te)}if(sr(U))return de(F,b,U,te);if(he(U))return pe(F,b,U,te);Cl(F,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,b!==null&&b.tag===6?(a(F,b.sibling),b=d(b,U),b.return=F,F=b):(a(F,b),b=xh(U,F.mode,te),b.return=F,F=b),w(F)):a(F,b)}return ct}var ji=Qf(!0),Jf=Qf(!1),Rl=Kr(null),Pl=null,Fi=null,bc=null;function Dc(){bc=Fi=Pl=null}function Oc(n){var r=Rl.current;et(Rl),n._currentValue=r}function Vc(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Ui(n,r){Pl=n,bc=Fi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Zt=!0),n.firstContext=null)}function yn(n){var r=n._currentValue;if(bc!==n)if(n={context:n,memoizedValue:r,next:null},Fi===null){if(Pl===null)throw Error(t(308));Fi=n,Pl.dependencies={lanes:0,firstContext:n}}else Fi=Fi.next=n;return r}var Ms=null;function Lc(n){Ms===null?Ms=[n]:Ms.push(n)}function Yf(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,Lc(r)):(a.next=d.next,d.next=a),r.interleaved=a,yr(n,c)}function yr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Jr=!1;function Mc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function vr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Yr(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(He&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,yr(n,a)}return d=c.interleaved,d===null?(r.next=r,Lc(c)):(r.next=d.next,d.next=r),c.interleaved=r,yr(n,a)}function Nl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ur(n,a)}}function Zf(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function bl(n,r,a,c){var d=n.updateQueue;Jr=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var C=S,z=C.next;C.next=null,w===null?p=z:w.next=z,w=C;var G=n.alternate;G!==null&&(G=G.updateQueue,S=G.lastBaseUpdate,S!==w&&(S===null?G.firstBaseUpdate=z:S.next=z,G.lastBaseUpdate=C))}if(p!==null){var J=d.baseState;w=0,G=z=C=null,S=p;do{var q=S.lane,ae=S.eventTime;if((c&q)===q){G!==null&&(G=G.next={eventTime:ae,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var de=n,pe=S;switch(q=r,ae=a,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){J=de.call(ae,J,q);break e}J=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,q=typeof de=="function"?de.call(ae,J,q):de,q==null)break e;J=se({},J,q);break e;case 2:Jr=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,q=d.effects,q===null?d.effects=[S]:q.push(S))}else ae={eventTime:ae,lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},G===null?(z=G=ae,C=J):G=G.next=ae,w|=q;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;q=S,S=q.next,q.next=null,d.lastBaseUpdate=q,d.shared.pending=null}}while(!0);if(G===null&&(C=J),d.baseState=C,d.firstBaseUpdate=z,d.lastBaseUpdate=G,r=d.shared.interleaved,r!==null){d=r;do w|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);Us|=w,n.lanes=w,n.memoizedState=J}}function ep(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Xo={},Gn=Kr(Xo),Zo=Kr(Xo),ea=Kr(Xo);function js(n){if(n===Xo)throw Error(t(174));return n}function jc(n,r){switch(Xe(ea,r),Xe(Zo,n),Xe(Gn,Xo),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:gt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=gt(r,n)}et(Gn),Xe(Gn,r)}function zi(){et(Gn),et(Zo),et(ea)}function tp(n){js(ea.current);var r=js(Gn.current),a=gt(r,n.type);r!==a&&(Xe(Zo,n),Xe(Gn,a))}function Fc(n){Zo.current===n&&(et(Gn),et(Zo))}var st=Kr(0);function Dl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Uc=[];function zc(){for(var n=0;n<Uc.length;n++)Uc[n]._workInProgressVersionPrimary=null;Uc.length=0}var Ol=ve.ReactCurrentDispatcher,Bc=ve.ReactCurrentBatchConfig,Fs=0,it=null,vt=null,Tt=null,Vl=!1,ta=!1,na=0,P0=0;function Lt(){throw Error(t(321))}function $c(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Dn(n[a],r[a]))return!1;return!0}function Wc(n,r,a,c,d,p){if(Fs=p,it=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ol.current=n===null||n.memoizedState===null?O0:V0,n=a(c,d),ta){p=0;do{if(ta=!1,na=0,25<=p)throw Error(t(301));p+=1,Tt=vt=null,r.updateQueue=null,Ol.current=L0,n=a(c,d)}while(ta)}if(Ol.current=jl,r=vt!==null&&vt.next!==null,Fs=0,Tt=vt=it=null,Vl=!1,r)throw Error(t(300));return n}function Hc(){var n=na!==0;return na=0,n}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?it.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function vn(){if(vt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var r=Tt===null?it.memoizedState:Tt.next;if(r!==null)Tt=r,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Tt===null?it.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function ra(n,r){return typeof r=="function"?r(n):r}function qc(n){var r=vn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=vt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=w=null,C=null,z=p;do{var G=z.lane;if((Fs&G)===G)C!==null&&(C=C.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var J={lane:G,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};C===null?(S=C=J,w=c):C=C.next=J,it.lanes|=G,Us|=G}z=z.next}while(z!==null&&z!==p);C===null?w=c:C.next=S,Dn(c,r.memoizedState)||(Zt=!0),r.memoizedState=c,r.baseState=w,r.baseQueue=C,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,it.lanes|=p,Us|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Kc(n){var r=vn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);Dn(p,r.memoizedState)||(Zt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function np(){}function rp(n,r){var a=it,c=vn(),d=r(),p=!Dn(c.memoizedState,d);if(p&&(c.memoizedState=d,Zt=!0),c=c.queue,Gc(op.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,sa(9,ip.bind(null,a,c,d,r),void 0,null),It===null)throw Error(t(349));(Fs&30)!==0||sp(a,r,d)}return d}function sp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=it.updateQueue,r===null?(r={lastEffect:null,stores:null},it.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function ip(n,r,a,c){r.value=a,r.getSnapshot=c,ap(r)&&lp(n)}function op(n,r,a){return a(function(){ap(r)&&lp(n)})}function ap(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Dn(n,a)}catch{return!0}}function lp(n){var r=yr(n,1);r!==null&&jn(r,n,1,-1)}function up(n){var r=Qn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:n},r.queue=n,n=n.dispatch=D0.bind(null,it,n),[r.memoizedState,n]}function sa(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=it.updateQueue,r===null?(r={lastEffect:null,stores:null},it.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function cp(){return vn().memoizedState}function Ll(n,r,a,c){var d=Qn();it.flags|=n,d.memoizedState=sa(1|r,a,void 0,c===void 0?null:c)}function Ml(n,r,a,c){var d=vn();c=c===void 0?null:c;var p=void 0;if(vt!==null){var w=vt.memoizedState;if(p=w.destroy,c!==null&&$c(c,w.deps)){d.memoizedState=sa(r,a,p,c);return}}it.flags|=n,d.memoizedState=sa(1|r,a,p,c)}function hp(n,r){return Ll(8390656,8,n,r)}function Gc(n,r){return Ml(2048,8,n,r)}function dp(n,r){return Ml(4,2,n,r)}function fp(n,r){return Ml(4,4,n,r)}function pp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function mp(n,r,a){return a=a!=null?a.concat([n]):null,Ml(4,4,pp.bind(null,r,n),a)}function Qc(){}function gp(n,r){var a=vn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&$c(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function yp(n,r){var a=vn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&$c(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function vp(n,r,a){return(Fs&21)===0?(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=a):(Dn(a,r)||(a=Cs(),it.lanes|=a,Us|=a,n.baseState=!0),r)}function N0(n,r){var a=Ue;Ue=a!==0&&4>a?a:4,n(!0);var c=Bc.transition;Bc.transition={};try{n(!1),r()}finally{Ue=a,Bc.transition=c}}function _p(){return vn().memoizedState}function b0(n,r,a){var c=ts(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},wp(n))Ep(r,a);else if(a=Yf(n,r,a,c),a!==null){var d=Kt();jn(a,n,c,d),xp(a,r,c)}}function D0(n,r,a){var c=ts(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(wp(n))Ep(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var w=r.lastRenderedState,S=p(w,a);if(d.hasEagerState=!0,d.eagerState=S,Dn(S,w)){var C=r.interleaved;C===null?(d.next=d,Lc(r)):(d.next=C.next,C.next=d),r.interleaved=d;return}}catch{}finally{}a=Yf(n,r,d,c),a!==null&&(d=Kt(),jn(a,n,c,d),xp(a,r,c))}}function wp(n){var r=n.alternate;return n===it||r!==null&&r===it}function Ep(n,r){ta=Vl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function xp(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Ur(n,a)}}var jl={readContext:yn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},O0={readContext:yn,useCallback:function(n,r){return Qn().memoizedState=[n,r===void 0?null:r],n},useContext:yn,useEffect:hp,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Ll(4194308,4,pp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ll(4194308,4,n,r)},useInsertionEffect:function(n,r){return Ll(4,2,n,r)},useMemo:function(n,r){var a=Qn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Qn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=b0.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var r=Qn();return n={current:n},r.memoizedState=n},useState:up,useDebugValue:Qc,useDeferredValue:function(n){return Qn().memoizedState=n},useTransition:function(){var n=up(!1),r=n[0];return n=N0.bind(null,n[1]),Qn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=it,d=Qn();if(rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),It===null)throw Error(t(349));(Fs&30)!==0||sp(c,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,hp(op.bind(null,c,p,n),[n]),c.flags|=2048,sa(9,ip.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=Qn(),r=It.identifierPrefix;if(rt){var a=gr,c=mr;a=(c&~(1<<32-Wt(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=na++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=P0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},V0={readContext:yn,useCallback:gp,useContext:yn,useEffect:Gc,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:yp,useReducer:qc,useRef:cp,useState:function(){return qc(ra)},useDebugValue:Qc,useDeferredValue:function(n){var r=vn();return vp(r,vt.memoizedState,n)},useTransition:function(){var n=qc(ra)[0],r=vn().memoizedState;return[n,r]},useMutableSource:np,useSyncExternalStore:rp,useId:_p,unstable_isNewReconciler:!1},L0={readContext:yn,useCallback:gp,useContext:yn,useEffect:Gc,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:yp,useReducer:Kc,useRef:cp,useState:function(){return Kc(ra)},useDebugValue:Qc,useDeferredValue:function(n){var r=vn();return vt===null?r.memoizedState=n:vp(r,vt.memoizedState,n)},useTransition:function(){var n=Kc(ra)[0],r=vn().memoizedState;return[n,r]},useMutableSource:np,useSyncExternalStore:rp,useId:_p,unstable_isNewReconciler:!1};function Vn(n,r){if(n&&n.defaultProps){r=se({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Jc(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:se({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Fl={isMounted:function(n){return(n=n._reactInternals)?kn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Kt(),d=ts(n),p=vr(c,d);p.payload=r,a!=null&&(p.callback=a),r=Yr(n,p,d),r!==null&&(jn(r,n,d,c),Nl(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Kt(),d=ts(n),p=vr(c,d);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=Yr(n,p,d),r!==null&&(jn(r,n,d,c),Nl(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Kt(),c=ts(n),d=vr(a,c);d.tag=2,r!=null&&(d.callback=r),r=Yr(n,d,c),r!==null&&(jn(r,n,c,a),Nl(r,n,c))}};function Tp(n,r,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):r.prototype&&r.prototype.isPureReactComponent?!Wo(a,c)||!Wo(d,p):!0}function Ip(n,r,a){var c=!1,d=Gr,p=r.contextType;return typeof p=="object"&&p!==null?p=yn(p):(d=Xt(r)?Os:Vt.current,c=r.contextTypes,p=(c=c!=null)?Oi(n,d):Gr),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Fl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),r}function Sp(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Fl.enqueueReplaceState(r,r.state,null)}function Yc(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Mc(n);var p=r.contextType;typeof p=="object"&&p!==null?d.context=yn(p):(p=Xt(r)?Os:Vt.current,d.context=Oi(n,p)),d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Jc(n,r,p,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Fl.enqueueReplaceState(d,d.state,null),bl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Bi(n,r){try{var a="",c=r;do a+=fe(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:d,digest:null}}function Xc(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Zc(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var M0=typeof WeakMap=="function"?WeakMap:Map;function kp(n,r,a){a=vr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){ql||(ql=!0,ph=c),Zc(n,r)},a}function Ap(n,r,a){a=vr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){Zc(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Zc(n,r),typeof c!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var w=r.stack;this.componentDidCatch(r.value,{componentStack:w!==null?w:""})}),a}function Cp(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new M0;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=Y0.bind(null,n,r,a),r.then(n,n))}function Rp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Pp(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=vr(-1,1),r.tag=2,Yr(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var j0=ve.ReactCurrentOwner,Zt=!1;function qt(n,r,a,c){r.child=n===null?Jf(r,null,a,c):ji(r,n.child,a,c)}function Np(n,r,a,c,d){a=a.render;var p=r.ref;return Ui(r,d),c=Wc(n,r,a,c,p,d),a=Hc(),n!==null&&!Zt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,_r(n,r,d)):(rt&&a&&Ac(r),r.flags|=1,qt(n,r,c,d),r.child)}function bp(n,r,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!Eh(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,Dp(n,r,p,c,d)):(n=Xl(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Wo,a(w,c)&&n.ref===r.ref)return _r(n,r,d)}return r.flags|=1,n=rs(p,c),n.ref=r.ref,n.return=r,r.child=n}function Dp(n,r,a,c,d){if(n!==null){var p=n.memoizedProps;if(Wo(p,c)&&n.ref===r.ref)if(Zt=!1,r.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Zt=!0);else return r.lanes=n.lanes,_r(n,r,d)}return eh(n,r,a,c,d)}function Op(n,r,a){var c=r.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Wi,cn),cn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Xe(Wi,cn),cn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Xe(Wi,cn),cn|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,Xe(Wi,cn),cn|=c;return qt(n,r,d,a),r.child}function Vp(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function eh(n,r,a,c,d){var p=Xt(a)?Os:Vt.current;return p=Oi(r,p),Ui(r,d),a=Wc(n,r,a,c,p,d),c=Hc(),n!==null&&!Zt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,_r(n,r,d)):(rt&&c&&Ac(r),r.flags|=1,qt(n,r,a,d),r.child)}function Lp(n,r,a,c,d){if(Xt(a)){var p=!0;Tl(r)}else p=!1;if(Ui(r,d),r.stateNode===null)zl(n,r),Ip(r,a,c),Yc(r,a,c,d),c=!0;else if(n===null){var w=r.stateNode,S=r.memoizedProps;w.props=S;var C=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=yn(z):(z=Xt(a)?Os:Vt.current,z=Oi(r,z));var G=a.getDerivedStateFromProps,J=typeof G=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==c||C!==z)&&Sp(r,w,c,z),Jr=!1;var q=r.memoizedState;w.state=q,bl(r,c,w,d),C=r.memoizedState,S!==c||q!==C||Yt.current||Jr?(typeof G=="function"&&(Jc(r,a,G,c),C=r.memoizedState),(S=Jr||Tp(r,a,S,c,q,C,z))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=C),w.props=c,w.state=C,w.context=z,c=S):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{w=r.stateNode,Xf(n,r),S=r.memoizedProps,z=r.type===r.elementType?S:Vn(r.type,S),w.props=z,J=r.pendingProps,q=w.context,C=a.contextType,typeof C=="object"&&C!==null?C=yn(C):(C=Xt(a)?Os:Vt.current,C=Oi(r,C));var ae=a.getDerivedStateFromProps;(G=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==J||q!==C)&&Sp(r,w,c,C),Jr=!1,q=r.memoizedState,w.state=q,bl(r,c,w,d);var de=r.memoizedState;S!==J||q!==de||Yt.current||Jr?(typeof ae=="function"&&(Jc(r,a,ae,c),de=r.memoizedState),(z=Jr||Tp(r,a,z,c,q,de,C)||!1)?(G||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,de,C),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,de,C)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=de),w.props=c,w.state=de,w.context=C,c=z):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&q===n.memoizedState||(r.flags|=1024),c=!1)}return th(n,r,a,c,p,d)}function th(n,r,a,c,d,p){Vp(n,r);var w=(r.flags&128)!==0;if(!c&&!w)return d&&zf(r,a,!1),_r(n,r,p);c=r.stateNode,j0.current=r;var S=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&w?(r.child=ji(r,n.child,null,p),r.child=ji(r,null,S,p)):qt(n,r,S,p),r.memoizedState=c.state,d&&zf(r,a,!0),r.child}function Mp(n){var r=n.stateNode;r.pendingContext?Ff(n,r.pendingContext,r.pendingContext!==r.context):r.context&&Ff(n,r.context,!1),jc(n,r.containerInfo)}function jp(n,r,a,c,d){return Mi(),Nc(d),r.flags|=256,qt(n,r,a,c),r.child}var nh={dehydrated:null,treeContext:null,retryLane:0};function rh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Fp(n,r,a){var c=r.pendingProps,d=st.current,p=!1,w=(r.flags&128)!==0,S;if((S=w)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(st,d&1),n===null)return Pc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=r.mode,p=r.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Zl(w,c,0,null),n=Ws(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=rh(a),r.memoizedState=nh,n):sh(r,w));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return F0(n,r,w,c,S,d,a);if(p){p=c.fallback,w=r.mode,d=n.child,S=d.sibling;var C={mode:"hidden",children:c.children};return(w&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=C,r.deletions=null):(c=rs(d,C),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=rs(S,p):(p=Ws(p,w,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,w=n.child.memoizedState,w=w===null?rh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,r.memoizedState=nh,c}return p=n.child,n=p.sibling,c=rs(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function sh(n,r){return r=Zl({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Ul(n,r,a,c){return c!==null&&Nc(c),ji(r,n.child,null,a),n=sh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function F0(n,r,a,c,d,p,w){if(a)return r.flags&256?(r.flags&=-257,c=Xc(Error(t(422))),Ul(n,r,w,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=Zl({mode:"visible",children:c.children},d,0,null),p=Ws(p,d,w,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&ji(r,n.child,null,w),r.child.memoizedState=rh(w),r.memoizedState=nh,p);if((r.mode&1)===0)return Ul(n,r,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(t(419)),c=Xc(p,c,void 0),Ul(n,r,w,c)}if(S=(w&n.childLanes)!==0,Zt||S){if(c=It,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,yr(n,d),jn(c,n,d,-1))}return wh(),c=Xc(Error(t(421))),Ul(n,r,w,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=X0.bind(null,n),d._reactRetry=r,null):(n=p.treeContext,un=qr(d.nextSibling),ln=r,rt=!0,On=null,n!==null&&(mn[gn++]=mr,mn[gn++]=gr,mn[gn++]=Vs,mr=n.id,gr=n.overflow,Vs=r),r=sh(r,c.children),r.flags|=4096,r)}function Up(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Vc(n.return,r,a)}function ih(n,r,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function zp(n,r,a){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(qt(n,r,c.children,a),c=st.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Up(n,a,r);else if(n.tag===19)Up(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(st,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Dl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),ih(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Dl(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ih(r,!0,a,null,p);break;case"together":ih(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function zl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function _r(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Us|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=rs(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=rs(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function U0(n,r,a){switch(r.tag){case 3:Mp(r),Mi();break;case 5:tp(r);break;case 1:Xt(r.type)&&Tl(r);break;case 4:jc(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Xe(Rl,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Xe(st,st.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Fp(n,r,a):(Xe(st,st.current&1),n=_r(n,r,a),n!==null?n.sibling:null);Xe(st,st.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return zp(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(st,st.current),c)break;return null;case 22:case 23:return r.lanes=0,Op(n,r,a)}return _r(n,r,a)}var Bp,oh,$p,Wp;Bp=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},oh=function(){},$p=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,js(Gn.current);var p=null;switch(a){case"input":d=$t(n,d),c=$t(n,c),p=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),p=[];break;case"textarea":d=_o(n,d),c=_o(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=wl)}So(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var S=d[z];for(w in S)S.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var C=c[z];if(S=d?.[z],c.hasOwnProperty(z)&&C!==S&&(C!=null||S!=null))if(z==="style")if(S){for(w in S)!S.hasOwnProperty(w)||C&&C.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in C)C.hasOwnProperty(w)&&S[w]!==C[w]&&(a||(a={}),a[w]=C[w])}else a||(p||(p=[]),p.push(z,a)),a=C;else z==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,S=S?S.__html:void 0,C!=null&&S!==C&&(p=p||[]).push(z,C)):z==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(z,""+C):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(C!=null&&z==="onScroll"&&Ze("scroll",n),p||S===C||(p=[])):(p=p||[]).push(z,C))}a&&(p=p||[]).push("style",a);var z=p;(r.updateQueue=z)&&(r.flags|=4)}},Wp=function(n,r,a,c){a!==c&&(r.flags|=4)};function ia(n,r){if(!rt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function z0(n,r,a){var c=r.pendingProps;switch(Cc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(r),null;case 1:return Xt(r.type)&&xl(),Mt(r),null;case 3:return c=r.stateNode,zi(),et(Yt),et(Vt),zc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Al(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,On!==null&&(yh(On),On=null))),oh(n,r),Mt(r),null;case 5:Fc(r);var d=js(ea.current);if(a=r.type,n!==null&&r.stateNode!=null)$p(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Mt(r),null}if(n=js(Gn.current),Al(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[Kn]=r,c[Qo]=p,n=(r.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(d=0;d<qo.length;d++)Ze(qo[d],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Gt(c,p),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",c);break;case"textarea":si(c,p),Ze("invalid",c)}So(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var S=p[w];w==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&_l(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&_l(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Ze("scroll",c)}switch(a){case"input":Ne(c),Ha(c,p,!0);break;case"textarea":Ne(c),wo(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=wl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Kn]=r,n[Qo]=c,Bp(n,r,!1,!1),r.stateNode=n;e:{switch(w=ko(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),d=c;break;case"iframe":case"object":case"embed":Ze("load",n),d=c;break;case"video":case"audio":for(d=0;d<qo.length;d++)Ze(qo[d],n);d=c;break;case"source":Ze("error",n),d=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),d=c;break;case"details":Ze("toggle",n),d=c;break;case"input":Gt(n,c),d=$t(n,c),Ze("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":si(n,c),d=_o(n,c),Ze("invalid",n);break;default:d=c}So(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var C=S[p];p==="style"?To(n,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Eo(n,C)):p==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&Vr(n,C):typeof C=="number"&&Vr(n,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?C!=null&&p==="onScroll"&&Ze("scroll",n):C!=null&&le(n,p,C,w))}switch(a){case"input":Ne(n),Ha(n,c,!1);break;case"textarea":Ne(n),wo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Y(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?ir(n,!!c.multiple,p,!1):c.defaultValue!=null&&ir(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=wl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Mt(r),null;case 6:if(n&&r.stateNode!=null)Wp(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=js(ea.current),js(Gn.current),Al(r)){if(c=r.stateNode,a=r.memoizedProps,c[Kn]=r,(p=c.nodeValue!==a)&&(n=ln,n!==null))switch(n.tag){case 3:_l(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_l(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Kn]=r,r.stateNode=c}return Mt(r),null;case 13:if(et(st),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(rt&&un!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Kf(),Mi(),r.flags|=98560,p=!1;else if(p=Al(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Kn]=r}else Mi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mt(r),p=!1}else On!==null&&(yh(On),On=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(st.current&1)!==0?_t===0&&(_t=3):wh())),r.updateQueue!==null&&(r.flags|=4),Mt(r),null);case 4:return zi(),oh(n,r),n===null&&Ko(r.stateNode.containerInfo),Mt(r),null;case 10:return Oc(r.type._context),Mt(r),null;case 17:return Xt(r.type)&&xl(),Mt(r),null;case 19:if(et(st),p=r.memoizedState,p===null)return Mt(r),null;if(c=(r.flags&128)!==0,w=p.rendering,w===null)if(c)ia(p,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=Dl(n),w!==null){for(r.flags|=128,ia(p,!1),c=w.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(st,st.current&1|2),r.child}n=n.sibling}p.tail!==null&&Ye()>Hi&&(r.flags|=128,c=!0,ia(p,!1),r.lanes=4194304)}else{if(!c)if(n=Dl(w),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ia(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!rt)return Mt(r),null}else 2*Ye()-p.renderingStartTime>Hi&&a!==1073741824&&(r.flags|=128,c=!0,ia(p,!1),r.lanes=4194304);p.isBackwards?(w.sibling=r.child,r.child=w):(a=p.last,a!==null?a.sibling=w:r.child=w,p.last=w)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ye(),r.sibling=null,a=st.current,Xe(st,c?a&1|2:a&1),r):(Mt(r),null);case 22:case 23:return _h(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(cn&1073741824)!==0&&(Mt(r),r.subtreeFlags&6&&(r.flags|=8192)):Mt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function B0(n,r){switch(Cc(r),r.tag){case 1:return Xt(r.type)&&xl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return zi(),et(Yt),et(Vt),zc(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return Fc(r),null;case 13:if(et(st),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Mi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return et(st),null;case 4:return zi(),null;case 10:return Oc(r.type._context),null;case 22:case 23:return _h(),null;case 24:return null;default:return null}}var Bl=!1,jt=!1,$0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function $i(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,r,c)}else a.current=null}function ah(n,r,a){try{a()}catch(c){at(n,r,c)}}var Hp=!1;function W0(n,r){if(_c=$r,n=Tf(),hc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,S=-1,C=-1,z=0,G=0,J=n,q=null;t:for(;;){for(var ae;J!==a||d!==0&&J.nodeType!==3||(S=w+d),J!==p||c!==0&&J.nodeType!==3||(C=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(ae=J.firstChild)!==null;)q=J,J=ae;for(;;){if(J===n)break t;if(q===a&&++z===d&&(S=w),q===p&&++G===c&&(C=w),(ae=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=ae}a=S===-1||C===-1?null:{start:S,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(wc={focusedElem:n,selectionRange:a},$r=!1,ce=r;ce!==null;)if(r=ce,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,ce=n;else for(;ce!==null;){r=ce;try{var de=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,ct=de.memoizedState,F=r.stateNode,b=F.getSnapshotBeforeUpdate(r.elementType===r.type?pe:Vn(r.type,pe),ct);F.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var U=r.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){at(r,r.return,te)}if(n=r.sibling,n!==null){n.return=r.return,ce=n;break}ce=r.return}return de=Hp,Hp=!1,de}function oa(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&ah(r,a,p)}d=d.next}while(d!==c)}}function $l(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function lh(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function qp(n){var r=n.alternate;r!==null&&(n.alternate=null,qp(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[Kn],delete r[Qo],delete r[Ic],delete r[k0],delete r[A0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Kp(n){return n.tag===5||n.tag===3||n.tag===4}function Gp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Kp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function uh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=wl));else if(c!==4&&(n=n.child,n!==null))for(uh(n,r,a),n=n.sibling;n!==null;)uh(n,r,a),n=n.sibling}function ch(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(ch(n,r,a),n=n.sibling;n!==null;)ch(n,r,a),n=n.sibling}var Rt=null,Ln=!1;function Xr(n,r,a){for(a=a.child;a!==null;)Qp(n,r,a),a=a.sibling}function Qp(n,r,a){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(ks,a)}catch{}switch(a.tag){case 5:jt||$i(a,r);case 6:var c=Rt,d=Ln;Rt=null,Xr(n,r,a),Rt=c,Ln=d,Rt!==null&&(Ln?(n=Rt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Rt.removeChild(a.stateNode));break;case 18:Rt!==null&&(Ln?(n=Rt,a=a.stateNode,n.nodeType===8?Tc(n.parentNode,a):n.nodeType===1&&Tc(n,a),Nn(n)):Tc(Rt,a.stateNode));break;case 4:c=Rt,d=Ln,Rt=a.stateNode.containerInfo,Ln=!0,Xr(n,r,a),Rt=c,Ln=d;break;case 0:case 11:case 14:case 15:if(!jt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&ah(a,r,w),d=d.next}while(d!==c)}Xr(n,r,a);break;case 1:if(!jt&&($i(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){at(a,r,S)}Xr(n,r,a);break;case 21:Xr(n,r,a);break;case 22:a.mode&1?(jt=(c=jt)||a.memoizedState!==null,Xr(n,r,a),jt=c):Xr(n,r,a);break;default:Xr(n,r,a)}}function Jp(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new $0),r.forEach(function(c){var d=Z0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Mn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=r,S=w;e:for(;S!==null;){switch(S.tag){case 5:Rt=S.stateNode,Ln=!1;break e;case 3:Rt=S.stateNode.containerInfo,Ln=!0;break e;case 4:Rt=S.stateNode.containerInfo,Ln=!0;break e}S=S.return}if(Rt===null)throw Error(t(160));Qp(p,w,d),Rt=null,Ln=!1;var C=d.alternate;C!==null&&(C.return=null),d.return=null}catch(z){at(d,r,z)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Yp(r,n),r=r.sibling}function Yp(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Mn(r,n),Jn(n),c&4){try{oa(3,n,n.return),$l(3,n)}catch(pe){at(n,n.return,pe)}try{oa(5,n,n.return)}catch(pe){at(n,n.return,pe)}}break;case 1:Mn(r,n),Jn(n),c&512&&a!==null&&$i(a,a.return);break;case 5:if(Mn(r,n),Jn(n),c&512&&a!==null&&$i(a,a.return),n.flags&32){var d=n.stateNode;try{Vr(d,"")}catch(pe){at(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,S=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Or(d,p),ko(S,w);var z=ko(S,p);for(w=0;w<C.length;w+=2){var G=C[w],J=C[w+1];G==="style"?To(d,J):G==="dangerouslySetInnerHTML"?Eo(d,J):G==="children"?Vr(d,J):le(d,G,J,z)}switch(S){case"input":vo(d,p);break;case"textarea":ii(d,p);break;case"select":var q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?ir(d,!!p.multiple,ae,!1):q!==!!p.multiple&&(p.defaultValue!=null?ir(d,!!p.multiple,p.defaultValue,!0):ir(d,!!p.multiple,p.multiple?[]:"",!1))}d[Qo]=p}catch(pe){at(n,n.return,pe)}}break;case 6:if(Mn(r,n),Jn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(pe){at(n,n.return,pe)}}break;case 3:if(Mn(r,n),Jn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Nn(r.containerInfo)}catch(pe){at(n,n.return,pe)}break;case 4:Mn(r,n),Jn(n);break;case 13:Mn(r,n),Jn(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(fh=Ye())),c&4&&Jp(n);break;case 22:if(G=a!==null&&a.memoizedState!==null,n.mode&1?(jt=(z=jt)||G,Mn(r,n),jt=z):Mn(r,n),Jn(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!G&&(n.mode&1)!==0)for(ce=n,G=n.child;G!==null;){for(J=ce=G;ce!==null;){switch(q=ce,ae=q.child,q.tag){case 0:case 11:case 14:case 15:oa(4,q,q.return);break;case 1:$i(q,q.return);var de=q.stateNode;if(typeof de.componentWillUnmount=="function"){c=q,a=q.return;try{r=c,de.props=r.memoizedProps,de.state=r.memoizedState,de.componentWillUnmount()}catch(pe){at(c,a,pe)}}break;case 5:$i(q,q.return);break;case 22:if(q.memoizedState!==null){em(J);continue}}ae!==null?(ae.return=q,ce=ae):em(J)}G=G.sibling}e:for(G=null,J=n;;){if(J.tag===5){if(G===null){G=J;try{d=J.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=J.stateNode,C=J.memoizedProps.style,w=C!=null&&C.hasOwnProperty("display")?C.display:null,S.style.display=xo("display",w))}catch(pe){at(n,n.return,pe)}}}else if(J.tag===6){if(G===null)try{J.stateNode.nodeValue=z?"":J.memoizedProps}catch(pe){at(n,n.return,pe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;G===J&&(G=null),J=J.return}G===J&&(G=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Mn(r,n),Jn(n),c&4&&Jp(n);break;case 21:break;default:Mn(r,n),Jn(n)}}function Jn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Kp(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Vr(d,""),c.flags&=-33);var p=Gp(n);ch(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,S=Gp(n);uh(n,S,w);break;default:throw Error(t(161))}}catch(C){at(n,n.return,C)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function H0(n,r,a){ce=n,Xp(n)}function Xp(n,r,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Bl;if(!w){var S=d.alternate,C=S!==null&&S.memoizedState!==null||jt;S=Bl;var z=jt;if(Bl=w,(jt=C)&&!z)for(ce=d;ce!==null;)w=ce,C=w.child,w.tag===22&&w.memoizedState!==null?tm(d):C!==null?(C.return=w,ce=C):tm(d);for(;p!==null;)ce=p,Xp(p),p=p.sibling;ce=d,Bl=S,jt=z}Zp(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):Zp(n)}}function Zp(n){for(;ce!==null;){var r=ce;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:jt||$l(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!jt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Vn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&ep(r,p,c);break;case 3:var w=r.updateQueue;if(w!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}ep(r,w,a)}break;case 5:var S=r.stateNode;if(a===null&&r.flags&4){a=S;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var z=r.alternate;if(z!==null){var G=z.memoizedState;if(G!==null){var J=G.dehydrated;J!==null&&Nn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||r.flags&512&&lh(r)}catch(q){at(r,r.return,q)}}if(r===n){ce=null;break}if(a=r.sibling,a!==null){a.return=r.return,ce=a;break}ce=r.return}}function em(n){for(;ce!==null;){var r=ce;if(r===n){ce=null;break}var a=r.sibling;if(a!==null){a.return=r.return,ce=a;break}ce=r.return}}function tm(n){for(;ce!==null;){var r=ce;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{$l(4,r)}catch(C){at(r,a,C)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(C){at(r,d,C)}}var p=r.return;try{lh(r)}catch(C){at(r,p,C)}break;case 5:var w=r.return;try{lh(r)}catch(C){at(r,w,C)}}}catch(C){at(r,r.return,C)}if(r===n){ce=null;break}var S=r.sibling;if(S!==null){S.return=r.return,ce=S;break}ce=r.return}}var q0=Math.ceil,Wl=ve.ReactCurrentDispatcher,hh=ve.ReactCurrentOwner,_n=ve.ReactCurrentBatchConfig,He=0,It=null,ft=null,Pt=0,cn=0,Wi=Kr(0),_t=0,aa=null,Us=0,Hl=0,dh=0,la=null,en=null,fh=0,Hi=1/0,wr=null,ql=!1,ph=null,Zr=null,Kl=!1,es=null,Gl=0,ua=0,mh=null,Ql=-1,Jl=0;function Kt(){return(He&6)!==0?Ye():Ql!==-1?Ql:Ql=Ye()}function ts(n){return(n.mode&1)===0?1:(He&2)!==0&&Pt!==0?Pt&-Pt:R0.transition!==null?(Jl===0&&(Jl=Cs()),Jl):(n=Ue,n!==0||(n=window.event,n=n===void 0?16:Mo(n.type)),n)}function jn(n,r,a,c){if(50<ua)throw ua=0,mh=null,Error(t(185));Fr(n,a,c),((He&2)===0||n!==It)&&(n===It&&((He&2)===0&&(Hl|=a),_t===4&&ns(n,Pt)),tn(n,c),a===1&&He===0&&(r.mode&1)===0&&(Hi=Ye()+500,Il&&Qr()))}function tn(n,r){var a=n.callbackNode;lr(n,r);var c=As(n,n===It?Pt:0);if(c===0)a!==null&&bo(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&bo(a),r===1)n.tag===0?C0(rm.bind(null,n)):Bf(rm.bind(null,n)),I0(function(){(He&6)===0&&Qr()}),a=null;else{switch(zr(c)){case 1:a=Ss;break;case 4:a=Lr;break;case 16:a=dn;break;case 536870912:a=Ja;break;default:a=dn}a=hm(a,nm.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function nm(n,r){if(Ql=-1,Jl=0,(He&6)!==0)throw Error(t(327));var a=n.callbackNode;if(qi()&&n.callbackNode!==a)return null;var c=As(n,n===It?Pt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=Yl(n,c);else{r=c;var d=He;He|=2;var p=im();(It!==n||Pt!==r)&&(wr=null,Hi=Ye()+500,Bs(n,r));do try{Q0();break}catch(S){sm(n,S)}while(!0);Dc(),Wl.current=p,He=d,ft!==null?r=0:(It=null,Pt=0,r=_t)}if(r!==0){if(r===2&&(d=sn(n),d!==0&&(c=d,r=gh(n,d))),r===1)throw a=aa,Bs(n,0),ns(n,c),tn(n,Ye()),a;if(r===6)ns(n,c);else{if(d=n.current.alternate,(c&30)===0&&!K0(d)&&(r=Yl(n,c),r===2&&(p=sn(n),p!==0&&(c=p,r=gh(n,p))),r===1))throw a=aa,Bs(n,0),ns(n,c),tn(n,Ye()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:$s(n,en,wr);break;case 3:if(ns(n,c),(c&130023424)===c&&(r=fh+500-Ye(),10<r)){if(As(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=xc($s.bind(null,n,en,wr),r);break}$s(n,en,wr);break;case 4:if(ns(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var w=31-Wt(c);p=1<<w,w=r[w],w>d&&(d=w),c&=~p}if(c=d,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*q0(c/1960))-c,10<c){n.timeoutHandle=xc($s.bind(null,n,en,wr),c);break}$s(n,en,wr);break;case 5:$s(n,en,wr);break;default:throw Error(t(329))}}}return tn(n,Ye()),n.callbackNode===a?nm.bind(null,n):null}function gh(n,r){var a=la;return n.current.memoizedState.isDehydrated&&(Bs(n,r).flags|=256),n=Yl(n,r),n!==2&&(r=en,en=a,r!==null&&yh(r)),n}function yh(n){en===null?en=n:en.push.apply(en,n)}function K0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Dn(p(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ns(n,r){for(r&=~dh,r&=~Hl,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Wt(r),c=1<<a;n[a]=-1,r&=~c}}function rm(n){if((He&6)!==0)throw Error(t(327));qi();var r=As(n,0);if((r&1)===0)return tn(n,Ye()),null;var a=Yl(n,r);if(n.tag!==0&&a===2){var c=sn(n);c!==0&&(r=c,a=gh(n,c))}if(a===1)throw a=aa,Bs(n,0),ns(n,r),tn(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,$s(n,en,wr),tn(n,Ye()),null}function vh(n,r){var a=He;He|=1;try{return n(r)}finally{He=a,He===0&&(Hi=Ye()+500,Il&&Qr())}}function zs(n){es!==null&&es.tag===0&&(He&6)===0&&qi();var r=He;He|=1;var a=_n.transition,c=Ue;try{if(_n.transition=null,Ue=1,n)return n()}finally{Ue=c,_n.transition=a,He=r,(He&6)===0&&Qr()}}function _h(){cn=Wi.current,et(Wi)}function Bs(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,T0(a)),ft!==null)for(a=ft.return;a!==null;){var c=a;switch(Cc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&xl();break;case 3:zi(),et(Yt),et(Vt),zc();break;case 5:Fc(c);break;case 4:zi();break;case 13:et(st);break;case 19:et(st);break;case 10:Oc(c.type._context);break;case 22:case 23:_h()}a=a.return}if(It=n,ft=n=rs(n.current,null),Pt=cn=r,_t=0,aa=null,dh=Hl=Us=0,en=la=null,Ms!==null){for(r=0;r<Ms.length;r++)if(a=Ms[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}Ms=null}return n}function sm(n,r){do{var a=ft;try{if(Dc(),Ol.current=jl,Vl){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Vl=!1}if(Fs=0,Tt=vt=it=null,ta=!1,na=0,hh.current=null,a===null||a.return===null){_t=1,aa=r,ft=null;break}e:{var p=n,w=a.return,S=a,C=r;if(r=Pt,S.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var z=C,G=S,J=G.tag;if((G.mode&1)===0&&(J===0||J===11||J===15)){var q=G.alternate;q?(G.updateQueue=q.updateQueue,G.memoizedState=q.memoizedState,G.lanes=q.lanes):(G.updateQueue=null,G.memoizedState=null)}var ae=Rp(w);if(ae!==null){ae.flags&=-257,Pp(ae,w,S,p,r),ae.mode&1&&Cp(p,z,r),r=ae,C=z;var de=r.updateQueue;if(de===null){var pe=new Set;pe.add(C),r.updateQueue=pe}else de.add(C);break e}else{if((r&1)===0){Cp(p,z,r),wh();break e}C=Error(t(426))}}else if(rt&&S.mode&1){var ct=Rp(w);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),Pp(ct,w,S,p,r),Nc(Bi(C,S));break e}}p=C=Bi(C,S),_t!==4&&(_t=2),la===null?la=[p]:la.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var F=kp(p,C,r);Zf(p,F);break e;case 1:S=C;var b=p.type,U=p.stateNode;if((p.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Zr===null||!Zr.has(U)))){p.flags|=65536,r&=-r,p.lanes|=r;var te=Ap(p,S,r);Zf(p,te);break e}}p=p.return}while(p!==null)}am(a)}catch(ge){r=ge,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function im(){var n=Wl.current;return Wl.current=jl,n===null?jl:n}function wh(){(_t===0||_t===3||_t===2)&&(_t=4),It===null||(Us&268435455)===0&&(Hl&268435455)===0||ns(It,Pt)}function Yl(n,r){var a=He;He|=2;var c=im();(It!==n||Pt!==r)&&(wr=null,Bs(n,r));do try{G0();break}catch(d){sm(n,d)}while(!0);if(Dc(),He=a,Wl.current=c,ft!==null)throw Error(t(261));return It=null,Pt=0,_t}function G0(){for(;ft!==null;)om(ft)}function Q0(){for(;ft!==null&&!Ga();)om(ft)}function om(n){var r=cm(n.alternate,n,cn);n.memoizedProps=n.pendingProps,r===null?am(n):ft=r,hh.current=null}function am(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=z0(a,r,cn),a!==null){ft=a;return}}else{if(a=B0(a,r),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,ft=null;return}}if(r=r.sibling,r!==null){ft=r;return}ft=r=n}while(r!==null);_t===0&&(_t=5)}function $s(n,r,a){var c=Ue,d=_n.transition;try{_n.transition=null,Ue=1,J0(n,r,a,c)}finally{_n.transition=d,Ue=c}return null}function J0(n,r,a,c){do qi();while(es!==null);if((He&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Je(n,p),n===It&&(ft=It=null,Pt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Kl||(Kl=!0,hm(dn,function(){return qi(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=_n.transition,_n.transition=null;var w=Ue;Ue=1;var S=He;He|=4,hh.current=null,W0(n,a),Yp(a,n),g0(wc),$r=!!_c,wc=_c=null,n.current=a,H0(a),rc(),He=S,Ue=w,_n.transition=p}else n.current=a;if(Kl&&(Kl=!1,es=n,Gl=d),p=n.pendingLanes,p===0&&(Zr=null),Ya(a.stateNode),tn(n,Ye()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ql)throw ql=!1,n=ph,ph=null,n;return(Gl&1)!==0&&n.tag!==0&&qi(),p=n.pendingLanes,(p&1)!==0?n===mh?ua++:(ua=0,mh=n):ua=0,Qr(),null}function qi(){if(es!==null){var n=zr(Gl),r=_n.transition,a=Ue;try{if(_n.transition=null,Ue=16>n?16:n,es===null)var c=!1;else{if(n=es,es=null,Gl=0,(He&6)!==0)throw Error(t(331));var d=He;for(He|=4,ce=n.current;ce!==null;){var p=ce,w=p.child;if((ce.flags&16)!==0){var S=p.deletions;if(S!==null){for(var C=0;C<S.length;C++){var z=S[C];for(ce=z;ce!==null;){var G=ce;switch(G.tag){case 0:case 11:case 15:oa(8,G,p)}var J=G.child;if(J!==null)J.return=G,ce=J;else for(;ce!==null;){G=ce;var q=G.sibling,ae=G.return;if(qp(G),G===z){ce=null;break}if(q!==null){q.return=ae,ce=q;break}ce=ae}}}var de=p.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var ct=pe.sibling;pe.sibling=null,pe=ct}while(pe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ce=w;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:oa(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,ce=F;break e}ce=p.return}}var b=n.current;for(ce=b;ce!==null;){w=ce;var U=w.child;if((w.subtreeFlags&2064)!==0&&U!==null)U.return=w,ce=U;else e:for(w=b;ce!==null;){if(S=ce,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:$l(9,S)}}catch(ge){at(S,S.return,ge)}if(S===w){ce=null;break e}var te=S.sibling;if(te!==null){te.return=S.return,ce=te;break e}ce=S.return}}if(He=d,Qr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(ks,n)}catch{}c=!0}return c}finally{Ue=a,_n.transition=r}}return!1}function lm(n,r,a){r=Bi(a,r),r=kp(n,r,1),n=Yr(n,r,1),r=Kt(),n!==null&&(Fr(n,1,r),tn(n,r))}function at(n,r,a){if(n.tag===3)lm(n,n,a);else for(;r!==null;){if(r.tag===3){lm(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zr===null||!Zr.has(c))){n=Bi(a,n),n=Ap(r,n,1),r=Yr(r,n,1),n=Kt(),r!==null&&(Fr(r,1,n),tn(r,n));break}}r=r.return}}function Y0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Kt(),n.pingedLanes|=n.suspendedLanes&a,It===n&&(Pt&a)===a&&(_t===4||_t===3&&(Pt&130023424)===Pt&&500>Ye()-fh?Bs(n,0):dh|=a),tn(n,r)}function um(n,r){r===0&&((n.mode&1)===0?r=1:(r=mi,mi<<=1,(mi&130023424)===0&&(mi=4194304)));var a=Kt();n=yr(n,r),n!==null&&(Fr(n,r,a),tn(n,a))}function X0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),um(n,a)}function Z0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),um(n,a)}var cm;cm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Yt.current)Zt=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return Zt=!1,U0(n,r,a);Zt=(n.flags&131072)!==0}else Zt=!1,rt&&(r.flags&1048576)!==0&&$f(r,kl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;zl(n,r),n=r.pendingProps;var d=Oi(r,Vt.current);Ui(r,a),d=Wc(null,r,c,n,d,a);var p=Hc();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Xt(c)?(p=!0,Tl(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Mc(r),d.updater=Fl,r.stateNode=d,d._reactInternals=r,Yc(r,c,n,a),r=th(null,r,c,!0,p,a)):(r.tag=0,rt&&p&&Ac(r),qt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(zl(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=t_(c),n=Vn(c,n),d){case 0:r=eh(null,r,c,n,a);break e;case 1:r=Lp(null,r,c,n,a);break e;case 11:r=Np(null,r,c,n,a);break e;case 14:r=bp(null,r,c,Vn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Vn(c,d),eh(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Vn(c,d),Lp(n,r,c,d,a);case 3:e:{if(Mp(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,d=p.element,Xf(n,r),bl(r,c,null,a);var w=r.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=Bi(Error(t(423)),r),r=jp(n,r,c,a,d);break e}else if(c!==d){d=Bi(Error(t(424)),r),r=jp(n,r,c,a,d);break e}else for(un=qr(r.stateNode.containerInfo.firstChild),ln=r,rt=!0,On=null,a=Jf(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Mi(),c===d){r=_r(n,r,a);break e}qt(n,r,c,a)}r=r.child}return r;case 5:return tp(r),n===null&&Pc(r),c=r.type,d=r.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,Ec(c,d)?w=null:p!==null&&Ec(c,p)&&(r.flags|=32),Vp(n,r),qt(n,r,w,a),r.child;case 6:return n===null&&Pc(r),null;case 13:return Fp(n,r,a);case 4:return jc(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=ji(r,null,c,a):qt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Vn(c,d),Np(n,r,c,d,a);case 7:return qt(n,r,r.pendingProps,a),r.child;case 8:return qt(n,r,r.pendingProps.children,a),r.child;case 12:return qt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,w=d.value,Xe(Rl,c._currentValue),c._currentValue=w,p!==null)if(Dn(p.value,w)){if(p.children===d.children&&!Yt.current){r=_r(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var S=p.dependencies;if(S!==null){w=p.child;for(var C=S.firstContext;C!==null;){if(C.context===c){if(p.tag===1){C=vr(-1,a&-a),C.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var G=z.pending;G===null?C.next=C:(C.next=G.next,G.next=C),z.pending=C}}p.lanes|=a,C=p.alternate,C!==null&&(C.lanes|=a),Vc(p.return,a,r),S.lanes|=a;break}C=C.next}}else if(p.tag===10)w=p.type===r.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,S=w.alternate,S!==null&&(S.lanes|=a),Vc(w,a,r),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===r){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}qt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Ui(r,a),d=yn(d),c=c(d),r.flags|=1,qt(n,r,c,a),r.child;case 14:return c=r.type,d=Vn(c,r.pendingProps),d=Vn(c.type,d),bp(n,r,c,d,a);case 15:return Dp(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Vn(c,d),zl(n,r),r.tag=1,Xt(c)?(n=!0,Tl(r)):n=!1,Ui(r,a),Ip(r,c,d),Yc(r,c,d,a),th(null,r,c,!0,n,a);case 19:return zp(n,r,a);case 22:return Op(n,r,a)}throw Error(t(156,r.tag))};function hm(n,r){return fi(n,r)}function e_(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,r,a,c){return new e_(n,r,a,c)}function Eh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function t_(n){if(typeof n=="function")return Eh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===Be)return 14}return 2}function rs(n,r){var a=n.alternate;return a===null?(a=wn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Xl(n,r,a,c,d,p){var w=2;if(c=n,typeof n=="function")Eh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case P:return Ws(a.children,d,p,r);case T:w=8,d|=8;break;case k:return n=wn(12,a,r,d|2),n.elementType=k,n.lanes=p,n;case I:return n=wn(13,a,r,d),n.elementType=I,n.lanes=p,n;case ue:return n=wn(19,a,r,d),n.elementType=ue,n.lanes=p,n;case Ie:return Zl(a,d,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:w=10;break e;case N:w=9;break e;case V:w=11;break e;case Be:w=14;break e;case Ae:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=wn(w,a,r,d),r.elementType=n,r.type=c,r.lanes=p,r}function Ws(n,r,a,c){return n=wn(7,n,c,r),n.lanes=a,n}function Zl(n,r,a,c){return n=wn(22,n,c,r),n.elementType=Ie,n.lanes=a,n.stateNode={isHidden:!1},n}function xh(n,r,a){return n=wn(6,n,null,r),n.lanes=a,n}function Th(n,r,a){return r=wn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function n_(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jr(0),this.expirationTimes=jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ih(n,r,a,c,d,p,w,S,C){return n=new n_(n,r,a,S,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=wn(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mc(p),n}function r_(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function dm(n){if(!n)return Gr;n=n._reactInternals;e:{if(kn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Xt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Xt(a))return Uf(n,a,r)}return r}function fm(n,r,a,c,d,p,w,S,C){return n=Ih(a,c,!0,n,d,p,w,S,C),n.context=dm(null),a=n.current,c=Kt(),d=ts(a),p=vr(c,d),p.callback=r??null,Yr(a,p,d),n.current.lanes=d,Fr(n,d,c),tn(n,c),n}function eu(n,r,a,c){var d=r.current,p=Kt(),w=ts(d);return a=dm(a),r.context===null?r.context=a:r.pendingContext=a,r=vr(p,w),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Yr(d,r,w),n!==null&&(jn(n,d,w,p),Nl(n,d,w)),w}function tu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function pm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Sh(n,r){pm(n,r),(n=n.alternate)&&pm(n,r)}function s_(){return null}var mm=typeof reportError=="function"?reportError:function(n){console.error(n)};function kh(n){this._internalRoot=n}nu.prototype.render=kh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));eu(n,r,null,null)},nu.prototype.unmount=kh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;zs(function(){eu(null,n,null,null)}),r[fr]=null}};function nu(n){this._internalRoot=n}nu.prototype.unstable_scheduleHydration=function(n){if(n){var r=nl();n={blockedOn:null,target:n,priority:r};for(var a=0;a<$n.length&&r!==0&&r<$n[a].priority;a++);$n.splice(a,0,n),a===0&&il(n)}};function Ah(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ru(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function gm(){}function i_(n,r,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=tu(w);p.call(z)}}var w=fm(r,c,n,0,null,!1,!1,"",gm);return n._reactRootContainer=w,n[fr]=w.current,Ko(n.nodeType===8?n.parentNode:n),zs(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var z=tu(C);S.call(z)}}var C=Ih(n,0,!1,null,null,!1,!1,"",gm);return n._reactRootContainer=C,n[fr]=C.current,Ko(n.nodeType===8?n.parentNode:n),zs(function(){eu(r,C,a,c)}),C}function su(n,r,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var S=d;d=function(){var C=tu(w);S.call(C)}}eu(r,w,n,d)}else w=i_(a,r,n,d,c);return tu(w)}el=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Mr(r.pendingLanes);a!==0&&(Ur(r,a|1),tn(r,Ye()),(He&6)===0&&(Hi=Ye()+500,Qr()))}break;case 13:zs(function(){var c=yr(n,1);if(c!==null){var d=Kt();jn(c,n,1,d)}}),Sh(n,1)}},gi=function(n){if(n.tag===13){var r=yr(n,134217728);if(r!==null){var a=Kt();jn(r,n,134217728,a)}Sh(n,134217728)}},tl=function(n){if(n.tag===13){var r=ts(n),a=yr(n,r);if(a!==null){var c=Kt();jn(a,n,r,c)}Sh(n,r)}},nl=function(){return Ue},rl=function(n,r){var a=Ue;try{return Ue=n,r()}finally{Ue=a}},ai=function(n,r,a){switch(r){case"input":if(vo(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=El(c);if(!d)throw Error(t(90));tt(c),vo(c,d)}}}break;case"textarea":ii(n,a);break;case"select":r=a.value,r!=null&&ir(n,!!a.multiple,r,!1)}},Es=vh,Co=zs;var o_={usingClientEntryPoint:!1,Events:[Jo,bi,El,zn,Ao,vh]},ca={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a_={bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=No(n),n===null?null:n.stateNode},findFiberByHostInstance:ca.findFiberByHostInstance||s_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ks=iu.inject(a_),rn=iu}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o_,nn.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ah(r))throw Error(t(200));return r_(n,r,null,a)},nn.createRoot=function(n,r){if(!Ah(n))throw Error(t(299));var a=!1,c="",d=mm;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Ih(n,1,!1,null,null,a,!1,c,d),n[fr]=r.current,Ko(n.nodeType===8?n.parentNode:n),new kh(r)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=No(r),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return zs(n)},nn.hydrate=function(n,r,a){if(!ru(r))throw Error(t(200));return su(null,n,r,!0,a)},nn.hydrateRoot=function(n,r,a){if(!Ah(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=mm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),r=fm(r,null,n,1,a??null,d,!1,p,w),n[fr]=r.current,Ko(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new nu(r)},nn.render=function(n,r,a){if(!ru(r))throw Error(t(200));return su(null,n,r,!1,a)},nn.unmountComponentAtNode=function(n){if(!ru(n))throw Error(t(40));return n._reactRootContainer?(zs(function(){su(null,null,n,!1,function(){n._reactRootContainer=null,n[fr]=null})}),!0):!1},nn.unstable_batchedUpdates=vh,nn.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!ru(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return su(n,r,a,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var Im;function m_(){if(Im)return Ph.exports;Im=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ph.exports=p_(),Ph.exports}var Sm;function g_(){if(Sm)return ou;Sm=1;var s=m_();return ou.createRoot=s.createRoot,ou.hydrateRoot=s.hydrateRoot,ou}var y_=g_();const v_=$g(y_);var km={};const Wg=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},__=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Hg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,x=u>>2,A=(u&3)<<4|m>>4;let M=(m&15)<<2|_>>6,D=_&63;g||(D=64,h||(M=64)),i.push(t[x],t[A],t[M],t[D])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Wg(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):__(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const A=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||A==null)throw new w_;const M=u<<2|m>>4;if(i.push(M),_!==64){const D=m<<4&240|_>>2;if(i.push(D),A!==64){const H=_<<6&192|A;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class w_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E_=function(s){const e=Wg(s);return Hg.encodeByteArray(e,!0)},xu=function(s){return E_(s).replace(/\./g,"")},qg=function(s){try{return Hg.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function x_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const T_=()=>x_().__FIREBASE_DEFAULTS__,I_=()=>{if(typeof process>"u"||typeof km>"u")return;const s=km.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},S_=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&qg(s[1]);return e&&JSON.parse(e)},Uu=()=>{try{return T_()||I_()||S_()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Kg=s=>{var e,t;return(t=(e=Uu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},k_=s=>{const e=Kg(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Gg=()=>{var s;return(s=Uu())===null||s===void 0?void 0:s.config},Qg=s=>{var e;return(e=Uu())===null||e===void 0?void 0:e[`_${s}`]};class A_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function C_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[xu(JSON.stringify(t)),xu(JSON.stringify(h)),""].join(".")}function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function P_(){var s;const e=(s=Uu())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b_(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function D_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function O_(){const s=Bt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function V_(){return!P_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L_(){try{return typeof indexedDB=="object"}catch{return!1}}function M_(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}const j_="FirebaseError";class Dr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=j_,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ba.prototype.create)}}class ba{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?F_(u,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Dr(o,m,i)}}function F_(s,e){return s.replace(U_,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const U_=/\{\$([^}]+)}/g;function z_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Tu(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],h=e[o];if(Am(u)&&Am(h)){if(!Tu(u,h))return!1}else if(u!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Am(s){return s!==null&&typeof s=="object"}function Da(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function B_(s,e){const t=new $_(s,e);return t.subscribe.bind(t)}class $_{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");W_(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Dh),o.error===void 0&&(o.error=Dh),o.complete===void 0&&(o.complete=Dh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W_(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Dh(){}function Tn(s){return s&&s._delegate?s._delegate:s}class Js{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Hs="[DEFAULT]";class H_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new A_;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K_(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:q_(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function q_(s){return s===Hs?void 0:s}function K_(s){return s.instantiationMode==="EAGER"}class G_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new H_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const Q_={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},J_=ze.INFO,Y_={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},X_=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Y_[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gd{constructor(e){this.name=e,this._logLevel=J_,this._logHandler=X_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const Z_=(s,e)=>e.some(t=>s instanceof t);let Cm,Rm;function ew(){return Cm||(Cm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tw(){return Rm||(Rm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jg=new WeakMap,Wh=new WeakMap,Yg=new WeakMap,Oh=new WeakMap,yd=new WeakMap;function nw(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(ds(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Jg.set(t,s)}).catch(()=>{}),yd.set(e,s),e}function rw(s){if(Wh.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Wh.set(s,e)}let Hh={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Wh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Yg.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ds(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function sw(s){Hh=s(Hh)}function iw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Vh(this),e,...t);return Yg.set(i,e.sort?e.sort():[e]),ds(i)}:tw().includes(s)?function(...e){return s.apply(Vh(this),e),ds(Jg.get(this))}:function(...e){return ds(s.apply(Vh(this),e))}}function ow(s){return typeof s=="function"?iw(s):(s instanceof IDBTransaction&&rw(s),Z_(s,ew())?new Proxy(s,Hh):s)}function ds(s){if(s instanceof IDBRequest)return nw(s);if(Oh.has(s))return Oh.get(s);const e=ow(s);return e!==s&&(Oh.set(s,e),yd.set(e,s)),e}const Vh=s=>yd.get(s);function aw(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),m=ds(h);return i&&h.addEventListener("upgradeneeded",g=>{i(ds(h.result),g.oldVersion,g.newVersion,ds(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const lw=["get","getKey","getAll","getAllKeys","count"],uw=["put","add","delete","clear"],Lh=new Map;function Pm(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=uw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||lw.includes(t)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return Lh.set(e,u),u}sw(s=>({...s,get:(e,t,i)=>Pm(e,t)||s.get(e,t,i),has:(e,t)=>!!Pm(e,t)||s.has(e,t)}));class cw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function hw(s){const e=s.getComponent();return e?.type==="VERSION"}const qh="@firebase/app",Nm="0.10.13";const Ar=new gd("@firebase/app"),dw="@firebase/app-compat",fw="@firebase/analytics-compat",pw="@firebase/analytics",mw="@firebase/app-check-compat",gw="@firebase/app-check",yw="@firebase/auth",vw="@firebase/auth-compat",_w="@firebase/database",ww="@firebase/data-connect",Ew="@firebase/database-compat",xw="@firebase/functions",Tw="@firebase/functions-compat",Iw="@firebase/installations",Sw="@firebase/installations-compat",kw="@firebase/messaging",Aw="@firebase/messaging-compat",Cw="@firebase/performance",Rw="@firebase/performance-compat",Pw="@firebase/remote-config",Nw="@firebase/remote-config-compat",bw="@firebase/storage",Dw="@firebase/storage-compat",Ow="@firebase/firestore",Vw="@firebase/vertexai-preview",Lw="@firebase/firestore-compat",Mw="firebase",jw="10.14.1";const Kh="[DEFAULT]",Fw={[qh]:"fire-core",[dw]:"fire-core-compat",[pw]:"fire-analytics",[fw]:"fire-analytics-compat",[gw]:"fire-app-check",[mw]:"fire-app-check-compat",[yw]:"fire-auth",[vw]:"fire-auth-compat",[_w]:"fire-rtdb",[ww]:"fire-data-connect",[Ew]:"fire-rtdb-compat",[xw]:"fire-fn",[Tw]:"fire-fn-compat",[Iw]:"fire-iid",[Sw]:"fire-iid-compat",[kw]:"fire-fcm",[Aw]:"fire-fcm-compat",[Cw]:"fire-perf",[Rw]:"fire-perf-compat",[Pw]:"fire-rc",[Nw]:"fire-rc-compat",[bw]:"fire-gcs",[Dw]:"fire-gcs-compat",[Ow]:"fire-fst",[Lw]:"fire-fst-compat",[Vw]:"fire-vertex","fire-js":"fire-js",[Mw]:"fire-js-all"};const Iu=new Map,Uw=new Map,Gh=new Map;function bm(s,e){try{s.container.addComponent(e)}catch(t){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function no(s){const e=s.name;if(Gh.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Gh.set(e,s);for(const t of Iu.values())bm(t,s);for(const t of Uw.values())bm(t,s);return!0}function vd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Yn(s){return s.settings!==void 0}const zw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fs=new ba("app","Firebase",zw);class Bw{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fs.create("app-deleted",{appName:this._name})}}const ho=jw;function Xg(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Kh,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw fs.create("bad-app-name",{appName:String(o)});if(t||(t=Gg()),!t)throw fs.create("no-options");const u=Iu.get(o);if(u){if(Tu(t,u.options)&&Tu(i,u.config))return u;throw fs.create("duplicate-app",{appName:o})}const h=new G_(o);for(const g of Gh.values())h.addComponent(g);const m=new Bw(t,i,h);return Iu.set(o,m),m}function Zg(s=Kh){const e=Iu.get(s);if(!e&&s===Kh&&Gg())return Xg();if(!e)throw fs.create("no-app",{appName:s});return e}function ps(s,e,t){var i;let o=(i=Fw[s])!==null&&i!==void 0?i:s;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(m.join(" "));return}no(new Js(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const $w="firebase-heartbeat-database",Ww=1,xa="firebase-heartbeat-store";let Mh=null;function ey(){return Mh||(Mh=aw($w,Ww,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(xa)}catch(t){console.warn(t)}}}}).catch(s=>{throw fs.create("idb-open",{originalErrorMessage:s.message})})),Mh}async function Hw(s){try{const t=(await ey()).transaction(xa),i=await t.objectStore(xa).get(ty(s));return await t.done,i}catch(e){if(e instanceof Dr)Ar.warn(e.message);else{const t=fs.create("idb-get",{originalErrorMessage:e?.message});Ar.warn(t.message)}}}async function Dm(s,e){try{const i=(await ey()).transaction(xa,"readwrite");await i.objectStore(xa).put(e,ty(s)),await i.done}catch(t){if(t instanceof Dr)Ar.warn(t.message);else{const i=fs.create("idb-set",{originalErrorMessage:t?.message});Ar.warn(i.message)}}}function ty(s){return`${s.name}!${s.options.appId}`}const qw=1024,Kw=720*60*60*1e3;class Gw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jw(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Om();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=Kw}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ar.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Om(),{heartbeatsToSend:i,unsentEntries:o}=Qw(this._heartbeatsCache.heartbeats),u=xu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return Ar.warn(t),""}}}function Om(){return new Date().toISOString().substring(0,10)}function Qw(s,e=qw){const t=[];let i=s.slice();for(const o of s){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Vm(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Vm(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Jw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L_()?M_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Hw(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Dm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Dm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Vm(s){return xu(JSON.stringify({version:2,heartbeats:s})).length}function Yw(s){no(new Js("platform-logger",e=>new cw(e),"PRIVATE")),no(new Js("heartbeat",e=>new Gw(e),"PRIVATE")),ps(qh,Nm,s),ps(qh,Nm,"esm2017"),ps("fire-js","")}Yw("");var Xw="firebase",Zw="10.14.1";ps(Xw,Zw,"app");function _d(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(t[i[o]]=s[i[o]]);return t}function ny(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eE=ny,ry=new ba("auth","Firebase",ny());const Su=new gd("@firebase/auth");function tE(s,...e){Su.logLevel<=ze.WARN&&Su.warn(`Auth (${ho}): ${s}`,...e)}function fu(s,...e){Su.logLevel<=ze.ERROR&&Su.error(`Auth (${ho}): ${s}`,...e)}function Cr(s,...e){throw wd(s,...e)}function Xn(s,...e){return wd(s,...e)}function sy(s,e,t){const i=Object.assign(Object.assign({},eE()),{[e]:t});return new ba("auth","Firebase",i).create(e,{appName:s.name})}function Ir(s){return sy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wd(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return ry.create(s,...e)}function be(s,e,...t){if(!s)throw wd(e,...t)}function Er(s){const e="INTERNAL ASSERTION FAILED: "+s;throw fu(e),new Error(e)}function Rr(s,e){s||Er(e)}function Qh(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function nE(){return Lm()==="http:"||Lm()==="https:"}function Lm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}function rE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nE()||b_()||"connection"in navigator)?navigator.onLine:!0}function sE(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Oa{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rr(t>e,"Short delay should be less than long delay!"),this.isMobile=R_()||D_()}get(){return rE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ed(s,e){Rr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class iy{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const oE=new Oa(3e4,6e4);function Va(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function fo(s,e,t,i,o={}){return oy(s,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const m=Da(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _=Object.assign({method:e,headers:g},u);return N_()||(_.referrerPolicy="no-referrer"),iy.fetch()(ay(s,s.config.apiHost,t,m),_)})}async function oy(s,e,t){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},iE),e);try{const o=new aE(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw au(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw au(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw au(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw au(s,"user-disabled",h);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw sy(s,x,_);Cr(s,x)}}catch(o){if(o instanceof Dr)throw o;Cr(s,"network-request-failed",{message:String(o)})}}async function xd(s,e,t,i,o={}){const u=await fo(s,e,t,i,o);return"mfaPendingCredential"in u&&Cr(s,"multi-factor-auth-required",{_serverResponse:u}),u}function ay(s,e,t,i){const o=`${e}${t}?${i}`;return s.config.emulator?Ed(s.config,o):`${s.config.apiScheme}://${o}`}class aE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),oE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function au(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Xn(s,e,i);return o.customData._tokenResponse=t,o}async function lE(s,e){return fo(s,"POST","/v1/accounts:delete",e)}async function ly(s,e){return fo(s,"POST","/v1/accounts:lookup",e)}function ya(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uE(s,e=!1){const t=Tn(s),i=await t.getIdToken(e),o=Td(i);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:i,authTime:ya(jh(o.auth_time)),issuedAtTime:ya(jh(o.iat)),expirationTime:ya(jh(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function jh(s){return Number(s)*1e3}function Td(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return fu("JWT malformed, contained fewer than 3 sections"),null;try{const o=qg(t);return o?JSON.parse(o):(fu("Failed to decode base64 JWT payload"),null)}catch(o){return fu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Mm(s){const e=Td(s);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ta(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Dr&&cE(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function cE({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class hE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ya(this.lastLoginAt),this.creationTime=ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ku(s){var e;const t=s.auth,i=await s.getIdToken(),o=await Ta(s,ly(t,{idToken:i}));be(o?.users.length,t,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?uy(u.providerUserInfo):[],m=fE(s.providerData,h),g=s.isAnonymous,_=!(s.email&&u.passwordHash)&&!m?.length,x=g?_:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Jh(u.createdAt,u.lastLoginAt),isAnonymous:x};Object.assign(s,A)}async function dE(s){const e=Tn(s);await ku(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fE(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function uy(s){return s.map(e=>{var{providerId:t}=e,i=_d(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function pE(s,e){const t=await oy(s,{},async()=>{const i=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=ay(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",iy.fetch()(h,{method:"POST",headers:m,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mE(s,e){return fo(s,"POST","/v2/accounts:revokeToken",Va(s,e))}class Yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=Mm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await pE(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,h=new Yi;return i&&(be(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(be(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yi,this.toJSON())}_performRefresh(){return Er("not implemented")}}function is(s,e){be(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class xr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,u=_d(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Jh(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Ta(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uE(this,e)}reload(){return dE(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ku(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await Ta(this,lE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,u,h,m,g,_,x;const A=(i=t.displayName)!==null&&i!==void 0?i:void 0,M=(o=t.email)!==null&&o!==void 0?o:void 0,D=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,H=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(m=t.tenantId)!==null&&m!==void 0?m:void 0,$=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,oe=(_=t.createdAt)!==null&&_!==void 0?_:void 0,ye=(x=t.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:le,emailVerified:ve,isAnonymous:Le,providerData:Te,stsTokenManager:P}=t;be(le&&P,e,"internal-error");const T=Yi.fromJSON(this.name,P);be(typeof le=="string",e,"internal-error"),is(A,e.name),is(M,e.name),be(typeof ve=="boolean",e,"internal-error"),be(typeof Le=="boolean",e,"internal-error"),is(D,e.name),is(H,e.name),is(W,e.name),is($,e.name),is(oe,e.name),is(ye,e.name);const k=new xr({uid:le,auth:e,email:M,emailVerified:ve,displayName:A,isAnonymous:Le,photoURL:H,phoneNumber:D,tenantId:W,stsTokenManager:T,createdAt:oe,lastLoginAt:ye});return Te&&Array.isArray(Te)&&(k.providerData=Te.map(R=>Object.assign({},R))),$&&(k._redirectEventId=$),k}static async _fromIdTokenResponse(e,t,i=!1){const o=new Yi;o.updateFromServerResponse(t);const u=new xr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ku(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?uy(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new Yi;m.updateFromIdToken(i);const g=new xr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Jh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,_),g}}const jm=new Map;function Tr(s){Rr(s instanceof Function,"Expected a class definition");let e=jm.get(s);return e?(Rr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,jm.set(s,e),e)}class cy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cy.type="NONE";const Fm=cy;function pu(s,e,t){return`firebase:${s}:${e}:${t}`}class Xi{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=pu(this.userKey,o.apiKey,u),this.fullPersistenceKey=pu("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Xi(Tr(Fm),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||Tr(Fm);const h=pu(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const x=await _._get(h);if(x){const A=xr._fromJSON(e,x);_!==u&&(m=A),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Xi(u,e,i):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==u)try{await _._remove(h)}catch{}})),new Xi(u,e,i))}}function Um(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(py(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gy(e))return"Blackberry";if(yy(e))return"Webos";if(dy(e))return"Safari";if((e.includes("chrome/")||fy(e))&&!e.includes("edge/"))return"Chrome";if(my(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function hy(s=Bt()){return/firefox\//i.test(s)}function dy(s=Bt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fy(s=Bt()){return/crios\//i.test(s)}function py(s=Bt()){return/iemobile/i.test(s)}function my(s=Bt()){return/android/i.test(s)}function gy(s=Bt()){return/blackberry/i.test(s)}function yy(s=Bt()){return/webos/i.test(s)}function Id(s=Bt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function gE(s=Bt()){var e;return Id(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yE(){return O_()&&document.documentMode===10}function vy(s=Bt()){return Id(s)||my(s)||yy(s)||gy(s)||/windows phone/i.test(s)||py(s)}function _y(s,e=[]){let t;switch(s){case"Browser":t=Um(Bt());break;case"Worker":t=`${Um(Bt())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ho}/${i}`}class vE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function _E(s,e={}){return fo(s,"GET","/v2/passwordPolicy",Va(s,e))}const wE=6;class EE{constructor(e){var t,i,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:wE,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,u,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class xE{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zm(this),this.idTokenSubscription=new zm(this),this.beforeStateQueue=new vE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ry,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ly(this,{idToken:e}),i=await xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Yn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&g?.user&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ku(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(Ir(this));const t=e?Tn(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _E(this),t=new EE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ba("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await mE(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Tr(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[Tr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_y(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&tE(`Error while retrieving App Check token: ${t.error}`),t?.token}}function La(s){return Tn(s)}class zm{constructor(e){this.auth=e,this.observer=null,this.addObserver=B_(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TE(s){Sd=s}function IE(s){return Sd.loadJS(s)}function SE(){return Sd.gapiScript}function kE(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function AE(s,e){const t=vd(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Tu(u,e??{}))return o;Cr(o,"already-initialized")}return t.initialize({options:e})}function CE(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Tr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function RE(s,e,t){const i=La(s);be(i._canInitEmulator,i,"emulator-config-failed"),be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=wy(e),{host:h,port:m}=PE(e),g=m===null?"":`:${m}`;i.config.emulator={url:`${u}//${h}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),NE()}function wy(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function PE(s){const e=wy(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:Bm(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:Bm(h)}}}function Bm(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function NE(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ey{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,t){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}}async function Zi(s,e){return xd(s,"POST","/v1/accounts:signInWithIdp",Va(s,e))}const bE="http://localhost";class Ys extends Ey{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,u=_d(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new Ys(i,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Zi(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Zi(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zi(e,t)}buildRequest(){const e={requestUri:bE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Da(t)}return e}}class xy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ma extends xy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class as extends Ma{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";class ls extends Ma{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ys._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ls.credential(t,i)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";class us extends Ma{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";class cs extends Ma{constructor(){super("twitter.com")}static credential(e,t){return Ys._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return cs.credential(t,i)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";async function DE(s,e){return xd(s,"POST","/v1/accounts:signUp",Va(s,e))}class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await xr._fromIdTokenResponse(e,i,o),h=$m(i);return new Pr({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=$m(i);return new Pr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function $m(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function OE(s){var e;if(Yn(s.app))return Promise.reject(Ir(s));const t=La(s);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Pr({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await DE(t,{returnSecureToken:!0}),o=await Pr._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}class Au extends Dr{constructor(e,t,i,o){var u;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Au(e,t,i,o)}}function Ty(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Au._fromErrorAndOperation(s,u,e,i):u})}async function VE(s,e,t=!1){const i=await Ta(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Pr._forOperation(s,"link",i)}async function LE(s,e,t=!1){const{auth:i}=s;if(Yn(i.app))return Promise.reject(Ir(i));const o="reauthenticate";try{const u=await Ta(s,Ty(i,o,e,s),t);be(u.idToken,i,"internal-error");const h=Td(u.idToken);be(h,i,"internal-error");const{sub:m}=h;return be(s.uid===m,i,"user-mismatch"),Pr._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Cr(i,"user-mismatch"),u}}async function ME(s,e,t=!1){if(Yn(s.app))return Promise.reject(Ir(s));const i="signIn",o=await Ty(s,i,e),u=await Pr._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}async function jE(s,e){return xd(s,"POST","/v1/accounts:signInWithCustomToken",Va(s,e))}async function FE(s,e){if(Yn(s.app))return Promise.reject(Ir(s));const t=La(s),i=await jE(t,{token:e,returnSecureToken:!0}),o=await Pr._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(o.user),o}function UE(s,e,t,i){return Tn(s).onIdTokenChanged(e,t,i)}function zE(s,e,t){return Tn(s).beforeAuthStateChanged(e,t)}function BE(s,e,t,i){return Tn(s).onAuthStateChanged(e,t,i)}const Cu="__sak";class Iy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cu,"1"),this.storage.removeItem(Cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $E=1e3,WE=10;class Sy extends Iy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);yE()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,WE):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},$E)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sy.type="LOCAL";const HE=Sy;class ky extends Iy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ky.type="SESSION";const Ay=ky;function qE(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class zu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new zu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,u)),g=await qE(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zu.receivers=[];function kd(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class KE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const _=kd("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(A){const M=A;if(M.data.eventId===_)switch(M.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(M.data.response);break;default:clearTimeout(x),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Zn(){return window}function GE(s){Zn().location.href=s}function Cy(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function QE(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JE(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function YE(){return Cy()?self:null}const Ry="firebaseLocalStorageDb",XE=1,Ru="firebaseLocalStorage",Py="fbase_key";class ja{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bu(s,e){return s.transaction([Ru],e?"readwrite":"readonly").objectStore(Ru)}function ZE(){const s=indexedDB.deleteDatabase(Ry);return new ja(s).toPromise()}function Yh(){const s=indexedDB.open(Ry,XE);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Ru,{keyPath:Py})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Ru)?e(i):(i.close(),await ZE(),e(await Yh()))})})}async function Wm(s,e,t){const i=Bu(s,!0).put({[Py]:e,value:t});return new ja(i).toPromise()}async function e1(s,e){const t=Bu(s,!1).get(e),i=await new ja(t).toPromise();return i===void 0?null:i.value}function Hm(s,e){const t=Bu(s,!0).delete(e);return new ja(t).toPromise()}const t1=800,n1=3;class Ny{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>n1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zu._getInstance(YE()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await QE(),!this.activeServiceWorker)return;this.sender=new KE(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yh();return await Wm(e,Cu,"1"),await Hm(e,Cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wm(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>e1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Bu(o,!1).getAll();return new ja(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ny.type="LOCAL";const r1=Ny;new Oa(3e4,6e4);function s1(s,e){return e?Tr(e):(be(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Ad extends Ey{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function i1(s){return ME(s.auth,new Ad(s),s.bypassAuthState)}function o1(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),LE(t,new Ad(s),s.bypassAuthState)}async function a1(s){const{auth:e,user:t}=s;return be(t,e,"internal-error"),VE(t,new Ad(s),s.bypassAuthState)}class by{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i1;case"linkViaPopup":case"linkViaRedirect":return a1;case"reauthViaPopup":case"reauthViaRedirect":return o1;default:Cr(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const l1=new Oa(2e3,1e4);class Ji extends by{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,Ji.currentPopupAction&&Ji.currentPopupAction.cancel(),Ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=kd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l1.get())};e()}}Ji.currentPopupAction=null;const u1="pendingRedirect",mu=new Map;class c1 extends by{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=mu.get(this.auth._key());if(!e){try{const i=await h1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}mu.set(this.auth._key(),e)}return this.bypassAuthState||mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h1(s,e){const t=p1(e),i=f1(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function d1(s,e){mu.set(s._key(),e)}function f1(s){return Tr(s._redirectPersistence)}function p1(s){return pu(u1,s.config.apiKey,s.name)}async function m1(s,e,t=!1){if(Yn(s.app))return Promise.reject(Ir(s));const i=La(s),o=s1(i,e),h=await new c1(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const g1=600*1e3;class y1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Dy(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Xn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g1&&this.cachedEventUids.clear(),this.cachedEventUids.has(qm(e))}saveEventToCache(e){this.cachedEventUids.add(qm(e)),this.lastProcessedEventTime=Date.now()}}function qm(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Dy({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function v1(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dy(s);default:return!1}}async function _1(s,e={}){return fo(s,"GET","/v1/projects",e)}const w1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E1=/^https?/;async function x1(s){if(s.config.emulator)return;const{authorizedDomains:e}=await _1(s);for(const t of e)try{if(T1(t))return}catch{}Cr(s,"unauthorized-domain")}function T1(s){const e=Qh(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!E1.test(t))return!1;if(w1.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const I1=new Oa(3e4,6e4);function Km(){const s=Zn().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function S1(s){return new Promise((e,t)=>{var i,o,u;function h(){Km(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Km(),t(Xn(s,"network-request-failed"))},timeout:I1.get()})}if(!((o=(i=Zn().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Zn().gapi)===null||u===void 0)&&u.load)h();else{const m=kE("iframefcb");return Zn()[m]=()=>{gapi.load?h():t(Xn(s,"network-request-failed"))},IE(`${SE()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw gu=null,e})}let gu=null;function k1(s){return gu=gu||S1(s),gu}const A1=new Oa(5e3,15e3),C1="__/auth/iframe",R1="emulator/auth/iframe",P1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b1(s){const e=s.config;be(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Ed(e,R1):`https://${s.config.authDomain}/${C1}`,i={apiKey:e.apiKey,appName:s.name,v:ho},o=N1.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${Da(i).slice(1)}`}async function D1(s){const e=await k1(s),t=Zn().gapi;return be(t,s,"internal-error"),e.open({where:document.body,url:b1(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P1,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const h=Xn(s,"network-request-failed"),m=Zn().setTimeout(()=>{u(h)},A1.get());function g(){Zn().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{u(h)})}))}const O1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V1=500,L1=600,M1="_blank",j1="http://localhost";class Gm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function F1(s,e,t,i=V1,o=L1){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g=Object.assign(Object.assign({},O1),{width:i.toString(),height:o.toString(),top:u,left:h}),_=Bt().toLowerCase();t&&(m=fy(_)?M1:t),hy(_)&&(e=e||j1,g.scrollbars="yes");const x=Object.entries(g).reduce((M,[D,H])=>`${M}${D}=${H},`,"");if(gE(_)&&m!=="_self")return U1(e||"",m),new Gm(null);const A=window.open(e||"",m,x);be(A,s,"popup-blocked");try{A.focus()}catch{}return new Gm(A)}function U1(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const z1="__/auth/handler",B1="emulator/auth/handler",$1=encodeURIComponent("fac");async function Qm(s,e,t,i,o,u){be(s.config.authDomain,s,"auth-domain-config-required"),be(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:ho,eventId:o};if(e instanceof xy){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",z_(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,A]of Object.entries({}))h[x]=A}if(e instanceof Ma){const x=e.getScopes().filter(A=>A!=="");x.length>0&&(h.scopes=x.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const g=await s._getAppCheckToken(),_=g?`#${$1}=${encodeURIComponent(g)}`:"";return`${W1(s)}?${Da(m).slice(1)}${_}`}function W1({config:s}){return s.emulator?Ed(s,B1):`https://${s.authDomain}/${z1}`}const Fh="webStorageSupport";class H1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ay,this._completeRedirectFn=m1,this._overrideRedirectResult=d1}async _openPopup(e,t,i,o){var u;Rr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await Qm(e,t,i,Qh(),o);return F1(e,h,kd())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await Qm(e,t,i,Qh(),o);return GE(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Rr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await D1(e),i=new y1(e);return t.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fh,{type:Fh},o=>{var u;const h=(u=o?.[0])===null||u===void 0?void 0:u[Fh];h!==void 0&&t(!!h),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=x1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vy()||dy()||Id()}}const q1=H1;var Jm="@firebase/auth",Ym="1.7.9";class K1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function G1(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q1(s){no(new Js("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;be(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_y(s)},_=new xE(i,o,u,g);return CE(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),no(new Js("auth-internal",e=>{const t=La(e.getProvider("auth").getImmediate());return(i=>new K1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ps(Jm,Ym,G1(s)),ps(Jm,Ym,"esm2017")}const J1=300,Y1=Qg("authIdTokenMaxAge")||J1;let Xm=null;const X1=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Y1)return;const o=t?.token;Xm!==o&&(Xm=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Z1(s=Zg()){const e=vd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=AE(s,{popupRedirectResolver:q1,persistence:[r1,HE,Ay]}),i=Qg("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=X1(u.toString());zE(t,h,()=>h(t.currentUser)),UE(t,m=>h(m))}}const o=Kg("auth");return o&&RE(t,`http://${o}`),t}function ex(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}TE({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Xn("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",ex().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q1("Browser");var Zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ks,Oy;(function(){var s;function e(P,T){function k(){}k.prototype=T.prototype,P.D=T.prototype,P.prototype=new k,P.prototype.constructor=P,P.C=function(R,N,V){for(var I=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)I[ue-2]=arguments[ue];return T.prototype[N].apply(R,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,T,k){k||(k=0);var R=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)R[N]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(N=0;16>N;++N)R[N]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=P.g[0],k=P.g[1],N=P.g[2];var V=P.g[3],I=T+(V^k&(N^V))+R[0]+3614090360&4294967295;T=k+(I<<7&4294967295|I>>>25),I=V+(N^T&(k^N))+R[1]+3905402710&4294967295,V=T+(I<<12&4294967295|I>>>20),I=N+(k^V&(T^k))+R[2]+606105819&4294967295,N=V+(I<<17&4294967295|I>>>15),I=k+(T^N&(V^T))+R[3]+3250441966&4294967295,k=N+(I<<22&4294967295|I>>>10),I=T+(V^k&(N^V))+R[4]+4118548399&4294967295,T=k+(I<<7&4294967295|I>>>25),I=V+(N^T&(k^N))+R[5]+1200080426&4294967295,V=T+(I<<12&4294967295|I>>>20),I=N+(k^V&(T^k))+R[6]+2821735955&4294967295,N=V+(I<<17&4294967295|I>>>15),I=k+(T^N&(V^T))+R[7]+4249261313&4294967295,k=N+(I<<22&4294967295|I>>>10),I=T+(V^k&(N^V))+R[8]+1770035416&4294967295,T=k+(I<<7&4294967295|I>>>25),I=V+(N^T&(k^N))+R[9]+2336552879&4294967295,V=T+(I<<12&4294967295|I>>>20),I=N+(k^V&(T^k))+R[10]+4294925233&4294967295,N=V+(I<<17&4294967295|I>>>15),I=k+(T^N&(V^T))+R[11]+2304563134&4294967295,k=N+(I<<22&4294967295|I>>>10),I=T+(V^k&(N^V))+R[12]+1804603682&4294967295,T=k+(I<<7&4294967295|I>>>25),I=V+(N^T&(k^N))+R[13]+4254626195&4294967295,V=T+(I<<12&4294967295|I>>>20),I=N+(k^V&(T^k))+R[14]+2792965006&4294967295,N=V+(I<<17&4294967295|I>>>15),I=k+(T^N&(V^T))+R[15]+1236535329&4294967295,k=N+(I<<22&4294967295|I>>>10),I=T+(N^V&(k^N))+R[1]+4129170786&4294967295,T=k+(I<<5&4294967295|I>>>27),I=V+(k^N&(T^k))+R[6]+3225465664&4294967295,V=T+(I<<9&4294967295|I>>>23),I=N+(T^k&(V^T))+R[11]+643717713&4294967295,N=V+(I<<14&4294967295|I>>>18),I=k+(V^T&(N^V))+R[0]+3921069994&4294967295,k=N+(I<<20&4294967295|I>>>12),I=T+(N^V&(k^N))+R[5]+3593408605&4294967295,T=k+(I<<5&4294967295|I>>>27),I=V+(k^N&(T^k))+R[10]+38016083&4294967295,V=T+(I<<9&4294967295|I>>>23),I=N+(T^k&(V^T))+R[15]+3634488961&4294967295,N=V+(I<<14&4294967295|I>>>18),I=k+(V^T&(N^V))+R[4]+3889429448&4294967295,k=N+(I<<20&4294967295|I>>>12),I=T+(N^V&(k^N))+R[9]+568446438&4294967295,T=k+(I<<5&4294967295|I>>>27),I=V+(k^N&(T^k))+R[14]+3275163606&4294967295,V=T+(I<<9&4294967295|I>>>23),I=N+(T^k&(V^T))+R[3]+4107603335&4294967295,N=V+(I<<14&4294967295|I>>>18),I=k+(V^T&(N^V))+R[8]+1163531501&4294967295,k=N+(I<<20&4294967295|I>>>12),I=T+(N^V&(k^N))+R[13]+2850285829&4294967295,T=k+(I<<5&4294967295|I>>>27),I=V+(k^N&(T^k))+R[2]+4243563512&4294967295,V=T+(I<<9&4294967295|I>>>23),I=N+(T^k&(V^T))+R[7]+1735328473&4294967295,N=V+(I<<14&4294967295|I>>>18),I=k+(V^T&(N^V))+R[12]+2368359562&4294967295,k=N+(I<<20&4294967295|I>>>12),I=T+(k^N^V)+R[5]+4294588738&4294967295,T=k+(I<<4&4294967295|I>>>28),I=V+(T^k^N)+R[8]+2272392833&4294967295,V=T+(I<<11&4294967295|I>>>21),I=N+(V^T^k)+R[11]+1839030562&4294967295,N=V+(I<<16&4294967295|I>>>16),I=k+(N^V^T)+R[14]+4259657740&4294967295,k=N+(I<<23&4294967295|I>>>9),I=T+(k^N^V)+R[1]+2763975236&4294967295,T=k+(I<<4&4294967295|I>>>28),I=V+(T^k^N)+R[4]+1272893353&4294967295,V=T+(I<<11&4294967295|I>>>21),I=N+(V^T^k)+R[7]+4139469664&4294967295,N=V+(I<<16&4294967295|I>>>16),I=k+(N^V^T)+R[10]+3200236656&4294967295,k=N+(I<<23&4294967295|I>>>9),I=T+(k^N^V)+R[13]+681279174&4294967295,T=k+(I<<4&4294967295|I>>>28),I=V+(T^k^N)+R[0]+3936430074&4294967295,V=T+(I<<11&4294967295|I>>>21),I=N+(V^T^k)+R[3]+3572445317&4294967295,N=V+(I<<16&4294967295|I>>>16),I=k+(N^V^T)+R[6]+76029189&4294967295,k=N+(I<<23&4294967295|I>>>9),I=T+(k^N^V)+R[9]+3654602809&4294967295,T=k+(I<<4&4294967295|I>>>28),I=V+(T^k^N)+R[12]+3873151461&4294967295,V=T+(I<<11&4294967295|I>>>21),I=N+(V^T^k)+R[15]+530742520&4294967295,N=V+(I<<16&4294967295|I>>>16),I=k+(N^V^T)+R[2]+3299628645&4294967295,k=N+(I<<23&4294967295|I>>>9),I=T+(N^(k|~V))+R[0]+4096336452&4294967295,T=k+(I<<6&4294967295|I>>>26),I=V+(k^(T|~N))+R[7]+1126891415&4294967295,V=T+(I<<10&4294967295|I>>>22),I=N+(T^(V|~k))+R[14]+2878612391&4294967295,N=V+(I<<15&4294967295|I>>>17),I=k+(V^(N|~T))+R[5]+4237533241&4294967295,k=N+(I<<21&4294967295|I>>>11),I=T+(N^(k|~V))+R[12]+1700485571&4294967295,T=k+(I<<6&4294967295|I>>>26),I=V+(k^(T|~N))+R[3]+2399980690&4294967295,V=T+(I<<10&4294967295|I>>>22),I=N+(T^(V|~k))+R[10]+4293915773&4294967295,N=V+(I<<15&4294967295|I>>>17),I=k+(V^(N|~T))+R[1]+2240044497&4294967295,k=N+(I<<21&4294967295|I>>>11),I=T+(N^(k|~V))+R[8]+1873313359&4294967295,T=k+(I<<6&4294967295|I>>>26),I=V+(k^(T|~N))+R[15]+4264355552&4294967295,V=T+(I<<10&4294967295|I>>>22),I=N+(T^(V|~k))+R[6]+2734768916&4294967295,N=V+(I<<15&4294967295|I>>>17),I=k+(V^(N|~T))+R[13]+1309151649&4294967295,k=N+(I<<21&4294967295|I>>>11),I=T+(N^(k|~V))+R[4]+4149444226&4294967295,T=k+(I<<6&4294967295|I>>>26),I=V+(k^(T|~N))+R[11]+3174756917&4294967295,V=T+(I<<10&4294967295|I>>>22),I=N+(T^(V|~k))+R[2]+718787259&4294967295,N=V+(I<<15&4294967295|I>>>17),I=k+(V^(N|~T))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+V&4294967295}i.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var k=T-this.blockSize,R=this.B,N=this.h,V=0;V<T;){if(N==0)for(;V<=k;)o(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<T;)if(R[N++]=P.charCodeAt(V++),N==this.blockSize){o(this,R),N=0;break}}else for(;V<T;)if(R[N++]=P[V++],N==this.blockSize){o(this,R),N=0;break}}this.h=N,this.o+=T},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var k=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=k&255,k/=256;for(this.u(P),P=Array(16),T=k=0;4>T;++T)for(var R=0;32>R;R+=8)P[k++]=this.g[T]>>>R&255;return P};function u(P,T){var k=m;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=T(P)}function h(P,T){this.h=T;for(var k=[],R=!0,N=P.length-1;0<=N;N--){var V=P[N]|0;R&&V==T||(k[N]=V,R=!1)}this.g=k}var m={};function g(P){return-128<=P&&128>P?u(P,function(T){return new h([T|0],0>T?-1:0)}):new h([P|0],0>P?-1:0)}function _(P){if(isNaN(P)||!isFinite(P))return A;if(0>P)return $(_(-P));for(var T=[],k=1,R=0;P>=k;R++)T[R]=P/k|0,k*=4294967296;return new h(T,0)}function x(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return $(x(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=_(Math.pow(T,8)),R=A,N=0;N<P.length;N+=8){var V=Math.min(8,P.length-N),I=parseInt(P.substring(N,N+V),T);8>V?(V=_(Math.pow(T,V)),R=R.j(V).add(_(I))):(R=R.j(k),R=R.add(_(I)))}return R}var A=g(0),M=g(1),D=g(16777216);s=h.prototype,s.m=function(){if(W(this))return-$(this).m();for(var P=0,T=1,k=0;k<this.g.length;k++){var R=this.i(k);P+=(0<=R?R:4294967296+R)*T,T*=4294967296}return P},s.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(H(this))return"0";if(W(this))return"-"+$(this).toString(P);for(var T=_(Math.pow(P,6)),k=this,R="";;){var N=ve(k,T).g;k=oe(k,N.j(T));var V=((0<k.g.length?k.g[0]:k.h)>>>0).toString(P);if(k=N,H(k))return V+R;for(;6>V.length;)V="0"+V;R=V+R}},s.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function H(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function W(P){return P.h==-1}s.l=function(P){return P=oe(this,P),W(P)?-1:H(P)?0:1};function $(P){for(var T=P.g.length,k=[],R=0;R<T;R++)k[R]=~P.g[R];return new h(k,~P.h).add(M)}s.abs=function(){return W(this)?$(this):this},s.add=function(P){for(var T=Math.max(this.g.length,P.g.length),k=[],R=0,N=0;N<=T;N++){var V=R+(this.i(N)&65535)+(P.i(N)&65535),I=(V>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);R=I>>>16,V&=65535,I&=65535,k[N]=I<<16|V}return new h(k,k[k.length-1]&-2147483648?-1:0)};function oe(P,T){return P.add($(T))}s.j=function(P){if(H(this)||H(P))return A;if(W(this))return W(P)?$(this).j($(P)):$($(this).j(P));if(W(P))return $(this.j($(P)));if(0>this.l(D)&&0>P.l(D))return _(this.m()*P.m());for(var T=this.g.length+P.g.length,k=[],R=0;R<2*T;R++)k[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<P.g.length;N++){var V=this.i(R)>>>16,I=this.i(R)&65535,ue=P.i(N)>>>16,Be=P.i(N)&65535;k[2*R+2*N]+=I*Be,ye(k,2*R+2*N),k[2*R+2*N+1]+=V*Be,ye(k,2*R+2*N+1),k[2*R+2*N+1]+=I*ue,ye(k,2*R+2*N+1),k[2*R+2*N+2]+=V*ue,ye(k,2*R+2*N+2)}for(R=0;R<T;R++)k[R]=k[2*R+1]<<16|k[2*R];for(R=T;R<2*T;R++)k[R]=0;return new h(k,0)};function ye(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function le(P,T){this.g=P,this.h=T}function ve(P,T){if(H(T))throw Error("division by zero");if(H(P))return new le(A,A);if(W(P))return T=ve($(P),T),new le($(T.g),$(T.h));if(W(T))return T=ve(P,$(T)),new le($(T.g),T.h);if(30<P.g.length){if(W(P)||W(T))throw Error("slowDivide_ only works with positive integers.");for(var k=M,R=T;0>=R.l(P);)k=Le(k),R=Le(R);var N=Te(k,1),V=Te(R,1);for(R=Te(R,2),k=Te(k,2);!H(R);){var I=V.add(R);0>=I.l(P)&&(N=N.add(k),V=I),R=Te(R,1),k=Te(k,1)}return T=oe(P,N.j(T)),new le(N,T)}for(N=A;0<=P.l(T);){for(k=Math.max(1,Math.floor(P.m()/T.m())),R=Math.ceil(Math.log(k)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),V=_(k),I=V.j(T);W(I)||0<I.l(P);)k-=R,V=_(k),I=V.j(T);H(V)&&(V=M),N=N.add(V),P=oe(P,I)}return new le(N,P)}s.A=function(P){return ve(this,P).h},s.and=function(P){for(var T=Math.max(this.g.length,P.g.length),k=[],R=0;R<T;R++)k[R]=this.i(R)&P.i(R);return new h(k,this.h&P.h)},s.or=function(P){for(var T=Math.max(this.g.length,P.g.length),k=[],R=0;R<T;R++)k[R]=this.i(R)|P.i(R);return new h(k,this.h|P.h)},s.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),k=[],R=0;R<T;R++)k[R]=this.i(R)^P.i(R);return new h(k,this.h^P.h)};function Le(P){for(var T=P.g.length+1,k=[],R=0;R<T;R++)k[R]=P.i(R)<<1|P.i(R-1)>>>31;return new h(k,P.h)}function Te(P,T){var k=T>>5;T%=32;for(var R=P.g.length-k,N=[],V=0;V<R;V++)N[V]=0<T?P.i(V+k)>>>T|P.i(V+k+1)<<32-T:P.i(V+k);return new h(N,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Oy=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=x,Ks=h}).apply(typeof Zm<"u"?Zm:typeof self<"u"?self:typeof window<"u"?window:{});var lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vy,fa,Ly,yu,Xh,My,jy,Fy;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof lu=="object"&&lu];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(l,f){if(f)e:{var y=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var j=l[E];if(!(j in y))break e;y=y[j]}l=l[l.length-1],E=y[l],f=f(E),f!=E&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,E=!1,j={next:function(){if(!E&&y<l.length){var B=y++;return{value:f(B,l[B]),done:!1}}return E=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function _(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function x(l,f,y){return l.call.apply(l.bind,arguments)}function A(l,f,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,E),l.apply(f,j)}}return function(){return l.apply(f,arguments)}}function M(l,f,y){return M=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:A,M.apply(null,arguments)}function D(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function H(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,j,B){for(var re=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)re[Ge-2]=arguments[Ge];return f.prototype[j].apply(E,re)}}function W(l){const f=l.length;if(0<f){const y=Array(f);for(let E=0;E<f;E++)y[E]=l[E];return y}return[]}function $(l,f){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const j=l.length||0,B=E.length||0;l.length=j+B;for(let re=0;re<B;re++)l[j+re]=E[re]}else l.push(E)}}class oe{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ye(l){return/^[\s\xa0]*$/.test(l)}function le(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ve(l){return ve[" "](l),l}ve[" "]=function(){};var Le=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function Te(l,f,y){for(const E in l)f.call(y,l[E],E,l)}function P(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function T(l){const f={};for(const y in l)f[y]=l[y];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,f){let y,E;for(let j=1;j<arguments.length;j++){E=arguments[j];for(y in E)l[y]=E[y];for(let B=0;B<k.length;B++)y=k[B],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function N(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function V(l){m.setTimeout(()=>{throw l},0)}function I(){var l=he;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ue{constructor(){this.h=this.g=null}add(f,y){const E=Be.get();E.set(f,y),this.h?this.h.next=E:this.g=E,this.h=E}}var Be=new oe(()=>new Ae,l=>l.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,Z=!1,he=new ue,se=()=>{const l=m.Promise.resolve(void 0);Ie=()=>{l.then(O)}};var O=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(y){V(y)}var f=Be;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Z=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var Se=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l})();function fe(l,f){if(ee.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Le){e:{try{ve(f.nodeName);var j=!0;break e}catch{}j=!1}j||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&fe.aa.h.call(this)}}H(fe,ee);var Pe={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Y=0;function K(l,f,y,E,j){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!E,this.ha=j,this.key=++Y,this.da=this.fa=!1}function ne(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ne(l){this.src=l,this.g={},this.h=0}Ne.prototype.add=function(l,f,y,E,j){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var re=Ce(l,f,E,j);return-1<re?(f=l[re],y||(f.fa=!1)):(f=new K(f,this.src,B,!!E,j),f.fa=y,l.push(f)),f};function tt(l,f){var y=f.type;if(y in l.g){var E=l.g[y],j=Array.prototype.indexOf.call(E,f,void 0),B;(B=0<=j)&&Array.prototype.splice.call(E,j,1),B&&(ne(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Ce(l,f,y,E){for(var j=0;j<l.length;++j){var B=l[j];if(!B.da&&B.listener==f&&B.capture==!!y&&B.ha==E)return j}return-1}var $t="closure_lm_"+(1e6*Math.random()|0),Gt={};function Or(l,f,y,E,j){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Or(l,f[B],y,E,j);return null}return y=wo(y),l&&l[Me]?l.K(f,y,_(E)?!!E.capture:!1,j):vo(l,f,y,!1,E,j)}function vo(l,f,y,E,j,B){if(!f)throw Error("Invalid event type");var re=_(j)?!!j.capture:!!j,Ge=si(l);if(Ge||(l[$t]=Ge=new Ne(l)),y=Ge.add(f,y,E,re,B),y.proxy)return y;if(E=Ha(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)Se||(j=re),j===void 0&&(j=!1),l.addEventListener(f.toString(),E,j);else if(l.attachEvent)l.attachEvent(ir(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ha(){function l(y){return f.call(l.src,l.listener,y)}const f=_o;return l}function ri(l,f,y,E,j){if(Array.isArray(f))for(var B=0;B<f.length;B++)ri(l,f[B],y,E,j);else E=_(E)?!!E.capture:!!E,y=wo(y),l&&l[Me]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],y=Ce(B,y,E,j),-1<y&&(ne(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=si(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Ce(f,y,E,j)),(y=-1<l?f[l]:null)&&sr(y))}function sr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Me])tt(f.i,l);else{var y=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(y,E,l.capture):f.detachEvent?f.detachEvent(ir(y),E):f.addListener&&f.removeListener&&f.removeListener(E),(y=si(f))?(tt(y,l),y.h==0&&(y.src=null,f[$t]=null)):ne(l)}}}function ir(l){return l in Gt?Gt[l]:Gt[l]="on"+l}function _o(l,f){if(l.da)l=!0;else{f=new fe(f,this);var y=l.listener,E=l.ha||l.src;l.fa&&sr(l),l=y.call(E,f)}return l}function si(l){return l=l[$t],l instanceof Ne?l:null}var ii="__closure_events_fn_"+(1e9*Math.random()>>>0);function wo(l){return typeof l=="function"?l:(l[ii]||(l[ii]=function(f){return l.handleEvent(f)}),l[ii])}function mt(){L.call(this),this.i=new Ne(this),this.M=this,this.F=null}H(mt,L),mt.prototype[Me]=!0,mt.prototype.removeEventListener=function(l,f,y,E){ri(this,l,f,y,E)};function gt(l,f){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new ee(f,l);else if(f instanceof ee)f.target=f.target||l;else{var j=f;f=new ee(E,l),R(f,j)}if(j=!0,y)for(var B=y.length-1;0<=B;B--){var re=f.g=y[B];j=or(re,E,!0,f)&&j}if(re=f.g=l,j=or(re,E,!0,f)&&j,j=or(re,E,!1,f)&&j,y)for(B=0;B<y.length;B++)re=f.g=y[B],j=or(re,E,!1,f)&&j}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],E=0;E<y.length;E++)ne(y[E]);delete l.g[f],l.h--}}this.F=null},mt.prototype.K=function(l,f,y,E){return this.i.add(String(l),f,!1,y,E)},mt.prototype.L=function(l,f,y,E){return this.i.add(String(l),f,!0,y,E)};function or(l,f,y,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var j=!0,B=0;B<f.length;++B){var re=f[B];if(re&&!re.da&&re.capture==y){var Ge=re.listener,yt=re.ha||re.src;re.fa&&tt(l.i,re),j=Ge.call(yt,E)!==!1&&j}}return j&&!E.defaultPrevented}function Eo(l,f,y){if(typeof l=="function")y&&(l=M(l,y));else if(l&&typeof l.handleEvent=="function")l=M(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Vr(l){l.g=Eo(()=>{l.g=null,l.i&&(l.i=!1,Vr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class vs extends L{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Vr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(l){L.call(this),this.h=l,this.g={}}H(_s,L);var xo=[];function To(l){Te(l.g,function(f,y){this.g.hasOwnProperty(y)&&sr(f)},l),l.g={}}_s.prototype.N=function(){_s.aa.N.call(this),To(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Io=m.JSON.stringify,So=m.JSON.parse,ko=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function ws(){}ws.prototype.h=null;function oi(l){return l.h||(l.h=l.i())}function ai(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Un(){ee.call(this,"d")}H(Un,ee);function li(){ee.call(this,"c")}H(li,ee);var zn={},Ao=null;function Es(){return Ao=Ao||new mt}zn.La="serverreachability";function Co(l){ee.call(this,zn.La,l)}H(Co,ee);function ar(l){const f=Es();gt(f,new Co(f))}zn.STAT_EVENT="statevent";function Ro(l,f){ee.call(this,zn.STAT_EVENT,l),this.stat=f}H(Ro,ee);function ut(l){const f=Es();gt(f,new Ro(f,l))}zn.Ma="timingevent";function ui(l,f){ee.call(this,zn.Ma,l),this.size=f}H(ui,ee);function In(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function xs(){this.g=!0}xs.prototype.xa=function(){this.g=!1};function Ts(l,f,y,E,j,B){l.info(function(){if(l.g)if(B)for(var re="",Ge=B.split("&"),yt=0;yt<Ge.length;yt++){var $e=Ge[yt].split("=");if(1<$e.length){var xt=$e[0];$e=$e[1];var dt=xt.split("_");re=2<=dt.length&&dt[1]=="type"?re+(xt+"="+$e+"&"):re+(xt+"=redacted&")}}else re=null;else re=B;return"XMLHTTP REQ ("+E+") [attempt "+j+"]: "+f+`
`+y+`
`+re})}function ci(l,f,y,E,j,B,re){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+j+"]: "+f+`
`+y+`
`+B+" "+re})}function Sn(l,f,y,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+nc(l,y)+(E?" "+E:"")})}function Po(l,f){l.info(function(){return"TIMEOUT: "+f})}xs.prototype.info=function(){};function nc(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var j=E[1];if(Array.isArray(j)&&!(1>j.length)){var B=j[0];if(B!="noop"&&B!="stop"&&B!="close")for(var re=1;re<j.length;re++)j[re]=""}}}}return Io(y)}catch{return f}}var hi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kn;function Is(){}H(Is,ws),Is.prototype.g=function(){return new XMLHttpRequest},Is.prototype.i=function(){return{}},kn=new Is;function An(l,f,y,E){this.j=l,this.i=f,this.l=y,this.R=E||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ka}function Ka(){this.i=null,this.g="",this.h=!1}var No={},di={};function fi(l,f,y){l.L=1,l.v=Ur(sn(f)),l.m=y,l.P=!0,bo(l,null)}function bo(l,f){l.F=Date.now(),Ye(l),l.A=sn(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Br(y.i,"t",E),l.C=0,y=l.j.J,l.h=new Ka,l.g=hl(l.j,y?f:null,!l.m),0<l.O&&(l.M=new vs(M(l.Y,l,l.g),l.O)),f=l.U,y=l.g,E=l.ca;var j="readystatechange";Array.isArray(j)||(j&&(xo[0]=j.toString()),j=xo);for(var B=0;B<j.length;B++){var re=Or(y,j[B],E||f.handleEvent,!1,f.h||f);if(!re)break;f.g[re.key]=re}f=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),ar(),Ts(l.i,l.u,l.A,l.l,l.R,l.m)}An.prototype.ca=function(l){l=l.target;const f=this.M;f&&Jt(l)==3?f.j():this.Y(l)},An.prototype.Y=function(l){try{if(l==this.g)e:{const dt=Jt(this.g);var f=this.g.Ba();const pn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||jo(this.g)))){this.J||dt!=4||f==7||(f==8||0>=pn?ar(3):ar(2)),Ss(this);var y=this.g.Z();this.X=y;t:if(Ga(this)){var E=jo(this.g);l="";var j=E.length,B=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),Lr(this);var re="";break t}this.h.i=new m.TextDecoder}for(f=0;f<j;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(B&&f==j-1)});E.length=0,this.h.g+=l,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=y==200,ci(this.i,this.u,this.A,this.l,this.R,dt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,yt=this.g;if((Ge=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ye(Ge)){var $e=Ge;break t}}$e=null}if(y=$e)Sn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Do(this,y);else{this.o=!1,this.s=3,ut(12),dn(this),Lr(this);break e}}if(this.P){y=!0;let an;for(;!this.J&&this.C<re.length;)if(an=rc(this,re),an==di){dt==4&&(this.s=4,ut(14),y=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(an==No){this.s=4,ut(15),Sn(this.i,this.l,re,"[Invalid Chunk]"),y=!1;break}else Sn(this.i,this.l,an,null),Do(this,an);if(Ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||re.length!=0||this.h.h||(this.s=1,ut(16),y=!1),this.o=this.o&&y,!y)Sn(this.i,this.l,re,"[Invalid Chunked Response]"),dn(this),Lr(this);else if(0<re.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Uo(xt),xt.M=!0,ut(11))}}else Sn(this.i,this.l,re,null),Do(this,re);dt==4&&dn(this),this.o&&!this.J&&(dt==4?Ii(this.j,this):(this.o=!1,Ye(this)))}else _i(this.g),y==400&&0<re.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),dn(this),Lr(this)}}}catch{}finally{}};function Ga(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function rc(l,f){var y=l.C,E=f.indexOf(`
`,y);return E==-1?di:(y=Number(f.substring(y,E)),isNaN(y)?No:(E+=1,E+y>f.length?di:(f=f.slice(E,E+y),l.C=E+y,f)))}An.prototype.cancel=function(){this.J=!0,dn(this)};function Ye(l){l.S=Date.now()+l.I,Qa(l,l.I)}function Qa(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=In(M(l.ba,l),f)}function Ss(l){l.B&&(m.clearTimeout(l.B),l.B=null)}An.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Po(this.i,this.A),this.L!=2&&(ar(),ut(17)),dn(this),this.s=2,Lr(this)):Qa(this,this.S-l)};function Lr(l){l.j.G==0||l.J||Ii(l.j,l)}function dn(l){Ss(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,To(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Do(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Wt(y.h,l))){if(!l.K&&Wt(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var j=E;if(j[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Ti(y),bn(y);else break e;xi(y),ut(18)}}else y.za=j[1],0<y.za-y.T&&37500>j[2]&&y.F&&y.v==0&&!y.C&&(y.C=In(M(y.Za,y),6e3));if(1>=Ya(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else dr(y,11)}else if((l.K||y.g==l)&&Ti(y),!ye(f))for(j=y.Da.g.parse(f),f=0;f<j.length;f++){let $e=j[f];if(y.T=$e[0],$e=$e[1],y.G==2)if($e[0]=="c"){y.K=$e[1],y.ia=$e[2];const xt=$e[3];xt!=null&&(y.la=xt,y.j.info("VER="+y.la));const dt=$e[4];dt!=null&&(y.Aa=dt,y.j.info("SVER="+y.Aa));const pn=$e[5];pn!=null&&typeof pn=="number"&&0<pn&&(E=1.5*pn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const an=l.g;if(an){const bs=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var B=E.h;B.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Oo(B,B.h),B.h=null))}if(E.D){const ki=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;ki&&(E.ya=ki,Je(E.I,E.D,ki))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var re=l;if(E.qa=cl(E,E.J?E.ia:null,E.W),re.K){Xa(E.h,re);var Ge=re,yt=E.L;yt&&(Ge.I=yt),Ge.B&&(Ss(Ge),Ye(Ge)),E.g=re}else Ns(E);0<y.i.length&&Hn(y)}else $e[0]!="stop"&&$e[0]!="close"||dr(y,7);else y.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?dr(y,7):Ct(y):$e[0]!="noop"&&y.l&&y.l.ta($e),y.v=0)}}ar(4)}catch{}}var Ja=class{constructor(l,f){this.g=l,this.map=f}};function ks(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ya(l){return l.h?1:l.g?l.g.size:0}function Wt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Oo(l,f){l.g?l.g.add(f):l.h=f}function Xa(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}ks.prototype.cancel=function(){if(this.i=Za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Za(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return W(l.i)}function pi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,E=0;E<y;E++)f.push(l[E]);return f}f=[],y=0;for(E in l)f[y++]=l[E];return f}function mi(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const E in l)f[y++]=E;return f}}}function Mr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=mi(l),E=pi(l),j=E.length,B=0;B<j;B++)f.call(void 0,E[B],y&&y[B],l)}var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sc(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),j=null;if(0<=E){var B=l[y].substring(0,E);j=l[y].substring(E+1)}else B=l[y];f(B,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function lr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof lr){this.h=l.h,Cs(this,l.j),this.o=l.o,this.g=l.g,jr(this,l.s),this.l=l.l;var f=l.i,y=new Bn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Fr(this,y),this.m=l.m}else l&&(f=String(l).match(As))?(this.h=!1,Cs(this,f[1]||"",!0),this.o=Ue(f[2]||""),this.g=Ue(f[3]||"",!0),jr(this,f[4]),this.l=Ue(f[5]||"",!0),Fr(this,f[6]||"",!0),this.m=Ue(f[7]||"")):(this.h=!1,this.i=new Bn(null,this.h))}lr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(zr(f,gi,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(zr(f,gi,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(zr(y,y.charAt(0)=="/"?nl:tl,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",zr(y,Vo)),l.join("")};function sn(l){return new lr(l)}function Cs(l,f,y){l.j=y?Ue(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function jr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Fr(l,f,y){f instanceof Bn?(l.i=f,$n(l.i,l.h)):(y||(f=zr(f,rl)),l.i=new Bn(f,l.h))}function Je(l,f,y){l.i.set(f,y)}function Ur(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ue(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function zr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,el),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function el(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gi=/[#\/\?@]/g,tl=/[#\?:]/g,nl=/[#\?]/g,rl=/[#\?@]/g,Vo=/#/g;function Bn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function At(l){l.g||(l.g=new Map,l.h=0,l.i&&sc(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=Bn.prototype,s.add=function(l,f){At(this),this.i=null,l=fn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Cn(l,f){At(l),f=fn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Rn(l,f){return At(l),f=fn(l,f),l.g.has(f)}s.forEach=function(l,f){At(this),this.g.forEach(function(y,E){y.forEach(function(j){l.call(f,j,E,this)},this)},this)},s.na=function(){At(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let E=0;E<f.length;E++){const j=l[E];for(let B=0;B<j.length;B++)y.push(f[E])}return y},s.V=function(l){At(this);let f=[];if(typeof l=="string")Rn(this,l)&&(f=f.concat(this.g.get(fn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return At(this),this.i=null,l=fn(this,l),Rn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Br(l,f,y){Cn(l,f),0<y.length&&(l.i=null,l.g.set(fn(l,f),W(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var E=f[y];const B=encodeURIComponent(String(E)),re=this.V(E);for(E=0;E<re.length;E++){var j=B;re[E]!==""&&(j+="="+encodeURIComponent(String(re[E]))),l.push(j)}}return this.i=l.join("&")};function fn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function $n(l,f){f&&!l.j&&(At(l),l.i=null,l.g.forEach(function(y,E){var j=E.toLowerCase();E!=j&&(Cn(this,E),Br(this,j,y))},l)),l.j=f}function ic(l,f){const y=new xs;if(m.Image){const E=new Image;E.onload=D(Qt,y,"TestLoadImage: loaded",!0,f,E),E.onerror=D(Qt,y,"TestLoadImage: error",!1,f,E),E.onabort=D(Qt,y,"TestLoadImage: abort",!1,f,E),E.ontimeout=D(Qt,y,"TestLoadImage: timeout",!1,f,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function sl(l,f){const y=new xs,E=new AbortController,j=setTimeout(()=>{E.abort(),Qt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(B=>{clearTimeout(j),B.ok?Qt(y,"TestPingServer: ok",!0,f):Qt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),Qt(y,"TestPingServer: error",!1,f)})}function Qt(l,f,y,E,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),E(y)}catch{}}function oc(){this.g=new ko}function il(l,f,y){const E=y||"";try{Mr(l,function(j,B){let re=j;_(j)&&(re=Io(j)),f.push(E+B+"="+encodeURIComponent(re))})}catch(j){throw f.push(E+"type="+encodeURIComponent("_badmap")),j}}function ur(l){this.l=l.Ub||null,this.j=l.eb||!1}H(ur,ws),ur.prototype.g=function(){return new Rs(this.l,this.j)},ur.prototype.i=(function(l){return function(){return l}})({});function Rs(l,f){mt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Rs,mt),s=Rs.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Nn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Pn(this):Nn(this),this.readyState==3&&ol(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Pn(this))},s.Qa=function(l){this.g&&(this.response=l,Pn(this))},s.ga=function(){this.g&&Pn(this)};function Pn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Nn(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Nn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function cr(l){let f="";return Te(l,function(y,E){f+=E,f+=":",f+=y,f+=`\r
`}),f}function $r(l,f,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=cr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Je(l,f,y))}function nt(l){mt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(nt,mt);var ac=/^https?$/i,Lo=["POST","PUT"];s=nt.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kn.g(),this.v=this.o?oi(this.o):oi(kn),this.g.onreadystatechange=M(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){Ps(this,B);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var j in E)y.set(j,E[j]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const B of E.keys())y.set(B,E.get(B));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),j=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Lo,f,void 0))||E||j||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,re]of y)this.g.setRequestHeader(B,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vi(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Ps(this,B)}};function Ps(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,yi(l),on(l)}function yi(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),on(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),on(this,!0)),nt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Mo(this):this.bb())},s.bb=function(){Mo(this)};function Mo(l){if(l.h&&typeof h<"u"&&(!l.v[1]||Jt(l)!=4||l.Z()!=2)){if(l.u&&Jt(l)==4)Eo(l.Ea,0,l);else if(gt(l,"readystatechange"),Jt(l)==4){l.h=!1;try{const re=l.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var E;if(E=re===0){var j=String(l.D).match(As)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),E=!ac.test(j?j.toLowerCase():"")}y=E}if(y)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var B=2<Jt(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",yi(l)}}finally{on(l)}}}}function on(l,f){if(l.g){vi(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||gt(l,"ready");try{y.onreadystatechange=E}catch{}}}function vi(l){l.I&&(m.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function Jt(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),So(f)}};function jo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function _i(l){const f={};l=(l.g&&2<=Jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(ye(l[E]))continue;var y=N(l[E]);const j=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=f[j]||[];f[j]=B,B.push(y)}P(f,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function Fo(l){this.Aa=0,this.i=[],this.j=new xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wn("baseRetryDelayMs",5e3,l),this.cb=Wn("retryDelaySeedMs",1e4,l),this.Wa=Wn("forwardChannelMaxRetries",2,l),this.wa=Wn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ks(l&&l.concurrentRequestLimit),this.Da=new oc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Fo.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,E){ut(0),this.W=l,this.H=f||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=cl(this,null,this.W),Hn(this)};function Ct(l){if(wi(l),l.G==3){var f=l.U++,y=sn(l.I);if(Je(y,"SID",l.K),Je(y,"RID",f),Je(y,"TYPE","terminate"),hr(l,y),f=new An(l,l.j,f),f.L=2,f.v=Ur(sn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=hl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ye(f)}ul(l)}function bn(l){l.g&&(Uo(l),l.g.cancel(),l.g=null)}function wi(l){bn(l),l.u&&(m.clearTimeout(l.u),l.u=null),Ti(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Hn(l){if(!rn(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ie||se(),Z||(Ie(),Z=!0),he.add(f,l),l.B=0}}function lc(l,f){return Ya(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=In(M(l.Ga,l,f),ll(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const j=new An(this,this.j,l);let B=this.o;if(this.S&&(B?(B=T(B),R(B,this.S)):B=this.S),this.m!==null||this.O||(j.H=B,B=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Wr(this,j,f),y=sn(this.I),Je(y,"RID",l),Je(y,"CVER",22),this.D&&Je(y,"X-HTTP-Session-Id",this.D),hr(this,y),B&&(this.O?f="headers="+encodeURIComponent(String(cr(B)))+"&"+f:this.m&&$r(y,this.m,B)),Oo(this.h,j),this.Ua&&Je(y,"TYPE","init"),this.P?(Je(y,"$req",f),Je(y,"SID","null"),j.T=!0,fi(j,y,null)):fi(j,y,f),this.G=2}}else this.G==3&&(l?Ei(this,l):this.i.length==0||rn(this.h)||Ei(this))};function Ei(l,f){var y;f?y=f.l:y=l.U++;const E=sn(l.I);Je(E,"SID",l.K),Je(E,"RID",y),Je(E,"AID",l.T),hr(l,E),l.m&&l.o&&$r(E,l.m,l.o),y=new An(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Wr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Oo(l.h,y),fi(y,E,f)}function hr(l,f){l.H&&Te(l.H,function(y,E){Je(f,E,y)}),l.l&&Mr({},function(y,E){Je(f,E,y)})}function Wr(l,f,y){y=Math.min(l.i.length,y);var E=l.l?M(l.l.Na,l.l,l):null;e:{var j=l.i;let B=-1;for(;;){const re=["count="+y];B==-1?0<y?(B=j[0].g,re.push("ofs="+B)):B=0:re.push("ofs="+B);let Ge=!0;for(let yt=0;yt<y;yt++){let $e=j[yt].g;const xt=j[yt].map;if($e-=B,0>$e)B=Math.max(0,j[yt].g-100),Ge=!1;else try{il(xt,re,"req"+$e+"_")}catch{E&&E(xt)}}if(Ge){E=re.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,E}function Ns(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ie||se(),Z||(Ie(),Z=!0),he.add(f,l),l.v=0}}function xi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=In(M(l.Fa,l),ll(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,al(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=In(M(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),bn(this),al(this))};function Uo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function al(l){l.g=new An(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=sn(l.qa);Je(f,"RID","rpc"),Je(f,"SID",l.K),Je(f,"AID",l.T),Je(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(f,"TO",l.ja),Je(f,"TYPE","xmlhttp"),hr(l,f),l.m&&l.o&&$r(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Ur(sn(f)),y.m=null,y.P=!0,bo(y,l)}s.Za=function(){this.C!=null&&(this.C=null,bn(this),xi(this),ut(19))};function Ti(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function Ii(l,f){var y=null;if(l.g==f){Ti(l),Uo(l),l.g=null;var E=2}else if(Wt(l.h,f))y=f.D,Xa(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var j=l.B;E=Es(),gt(E,new ui(E,y)),Hn(l)}else Ns(l);else if(j=f.s,j==3||j==0&&0<f.X||!(E==1&&lc(l,f)||E==2&&xi(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),j){case 1:dr(l,5);break;case 4:dr(l,10);break;case 3:dr(l,6);break;default:dr(l,2)}}}function ll(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function dr(l,f){if(l.j.info("Error code "+f),f==2){var y=M(l.fb,l),E=l.Xa;const j=!E;E=new lr(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Cs(E,"https"),Ur(E),j?ic(E.toString(),y):sl(E.toString(),y)}else ut(2);l.G=0,l.l&&l.l.sa(f),ul(l),wi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function ul(l){if(l.G=0,l.ka=[],l.l){const f=Za(l.h);(f.length!=0||l.i.length!=0)&&($(l.ka,f),$(l.ka,l.i),l.h.i.length=0,W(l.i),l.i.length=0),l.l.ra()}}function cl(l,f,y){var E=y instanceof lr?sn(y):new lr(y);if(E.g!="")f&&(E.g=f+"."+E.g),jr(E,E.s);else{var j=m.location;E=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;var B=new lr(null);E&&Cs(B,E),f&&(B.g=f),j&&jr(B,j),y&&(B.l=y),E=B}return y=l.D,f=l.ya,y&&f&&Je(E,y,f),Je(E,"VER",l.la),hr(l,E),E}function hl(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new nt(new ur({eb:y})):new nt(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function zo(){}s=zo.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Si(){}Si.prototype.g=function(l,f){return new Ht(l,f)};function Ht(l,f){mt.call(this),this.g=new Fo(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ye(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ye(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new qn(this)}H(Ht,mt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Ct(this.g)},Ht.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Io(l),l=y);f.i.push(new Ja(f.Ya++,l)),f.G==3&&Hn(f)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,Ht.aa.N.call(this)};function dl(l){Un.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}H(dl,Un);function fl(){li.call(this),this.status=1}H(fl,li);function qn(l){this.g=l}H(qn,zo),qn.prototype.ua=function(){gt(this.g,"a")},qn.prototype.ta=function(l){gt(this.g,new dl(l))},qn.prototype.sa=function(l){gt(this.g,new fl)},qn.prototype.ra=function(){gt(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,Fy=function(){return new Si},jy=function(){return Es()},My=zn,Xh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hi.NO_ERROR=0,hi.TIMEOUT=8,hi.HTTP_ERROR=6,yu=hi,qa.COMPLETE="complete",Ly=qa,ai.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,fa=ai,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,Vy=nt}).apply(typeof lu<"u"?lu:typeof self<"u"?self:typeof window<"u"?window:{});const eg="@firebase/firestore";class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");let po="10.14.0";const Xs=new gd("@firebase/firestore");function da(){return Xs.logLevel}function me(s,...e){if(Xs.logLevel<=ze.DEBUG){const t=e.map(Cd);Xs.debug(`Firestore (${po}): ${s}`,...t)}}function Nr(s,...e){if(Xs.logLevel<=ze.ERROR){const t=e.map(Cd);Xs.error(`Firestore (${po}): ${s}`,...t)}}function ro(s,...e){if(Xs.logLevel<=ze.WARN){const t=e.map(Cd);Xs.warn(`Firestore (${po}): ${s}`,...t)}}function Cd(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function De(s="Unexpected state"){const e=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: `+s;throw Nr(e),new Error(e)}function Qe(s,e){s||De()}function Ve(s,e){return s}const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Uy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ut.UNAUTHENTICATED)))}shutdown(){}}class nx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rx{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new Gs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gs,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gs)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string"),new Uy(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Ut(e)}}class sx{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ix{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new sx(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ox{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ax{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);const i=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new ox(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class zy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=lx(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%e.length))}return i}}function Ke(s,e){return s<e?-1:s>e?1:0}function so(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}class Et{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Et(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Et(0,0))}static max(){return new Oe(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ia{constructor(e,t,i){t===void 0?t=0:t>e.length&&De(),i===void 0?i=e.length-t:i>e.length-t&&De(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class lt extends Ia{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const ux=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Ia{construct(e,t,i){return new bt(e,t,i)}static isValidIdentifier(e){return ux.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new Ee(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Ee(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ee(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(u(),o++)}if(u(),h)throw new Ee(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(lt.fromString(e))}static fromName(e){return new xe(lt.fromString(e).popFirst(5))}static empty(){return new xe(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new lt(e.slice()))}}function cx(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new Et(t+1,0):new Et(t,i));return new ms(o,xe.empty(),e)}function hx(s){return new ms(s.readTime,s.key,-1)}class ms{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ms(Oe.min(),xe.empty(),-1)}static max(){return new ms(Oe.max(),xe.empty(),-1)}}function dx(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(s.documentKey,e.documentKey),t!==0?t:Ke(s.largestBatchId,e.largestBatchId))}const fx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class px{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fa(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==fx)throw s;me("LocalStore","Unexpectedly lost primary lease")}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,i)=>{t(e)}))}static reject(e){return new Q(((t,i)=>{i(e)}))}static waitFor(e){return new Q(((t,i)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&t()}),(g=>i(g)))})),h=!0,u===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next((o=>o?Q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,u)=>{i.push(t.call(this,o,u))})),this.waitFor(i)}static mapArray(e,t){return new Q(((i,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;t(e[_]).next((x=>{h[_]=x,++m,m===u&&i(h)}),(x=>o(x)))}}))}static doWhile(e,t){return new Q(((i,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):i()};u()}))}}function mx(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ua(s){return s.name==="IndexedDbTransactionError"}class Rd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Rd.oe=-1;function $u(s){return s==null}function Pu(s){return s===0&&1/s==-1/0}function gx(s){return typeof s=="number"&&Number.isInteger(s)&&!Pu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function tg(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function mo(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function By(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??Nt.RED,this.left=o??Nt.EMPTY,this.right=u??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new Nt(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,i,o,u){return this}insert(e,t,i){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ng(this.data.getIterator())}getIteratorFrom(e){return new ng(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Dt(this.comparator);return t.data=e,t}}class ng{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new Dt(bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class $y extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $y("Invalid base64 string: "+u):u}})(e);return new Ot(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const yx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(s){if(Qe(!!s),typeof s=="string"){let e=0;const t=yx.exec(s);if(Qe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(s.seconds),nanos:ht(s.nanos)}}function ht(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Zs(s){return typeof s=="string"?Ot.fromBase64String(s):Ot.fromUint8Array(s)}function Pd(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Nd(s){const e=s.mapValue.fields.__previous_value__;return Pd(e)?Nd(e):e}function Sa(s){const e=gs(s.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}class vx{constructor(e,t,i,o,u,h,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_}}class ka{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}const cu={mapValue:{}};function ei(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Pd(s)?4:wx(s)?9007199254740991:_x(s)?10:11:De()}function nr(s,e){if(s===e)return!0;const t=ei(s);if(t!==ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Sa(s).isEqual(Sa(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=gs(o.timestampValue),m=gs(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Zs(o.bytesValue).isEqual(Zs(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return ht(o.geoPointValue.latitude)===ht(u.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ht(o.integerValue)===ht(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ht(o.doubleValue),m=ht(u.doubleValue);return h===m?Pu(h)===Pu(m):isNaN(h)&&isNaN(m)}return!1})(s,e);case 9:return so(s.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(tg(h)!==tg(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!nr(h[g],m[g])))return!1;return!0})(s,e);default:return De()}}function Aa(s,e){return(s.values||[]).find((t=>nr(t,e)))!==void 0}function io(s,e){if(s===e)return 0;const t=ei(s),i=ei(e);if(t!==i)return Ke(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=ht(u.integerValue||u.doubleValue),g=ht(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return rg(s.timestampValue,e.timestampValue);case 4:return rg(Sa(s),Sa(e));case 5:return Ke(s.stringValue,e.stringValue);case 6:return(function(u,h){const m=Zs(u),g=Zs(h);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const x=Ke(m[_],g[_]);if(x!==0)return x}return Ke(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Ke(ht(u.latitude),ht(h.latitude));return m!==0?m:Ke(ht(u.longitude),ht(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return sg(s.arrayValue,e.arrayValue);case 10:return(function(u,h){var m,g,_,x;const A=u.fields||{},M=h.fields||{},D=(m=A.value)===null||m===void 0?void 0:m.arrayValue,H=(g=M.value)===null||g===void 0?void 0:g.arrayValue,W=Ke(((_=D?.values)===null||_===void 0?void 0:_.length)||0,((x=H?.values)===null||x===void 0?void 0:x.length)||0);return W!==0?W:sg(D,H)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===cu.mapValue&&h===cu.mapValue)return 0;if(u===cu.mapValue)return 1;if(h===cu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},x=Object.keys(_);g.sort(),x.sort();for(let A=0;A<g.length&&A<x.length;++A){const M=Ke(g[A],x[A]);if(M!==0)return M;const D=io(m[g[A]],_[x[A]]);if(D!==0)return D}return Ke(g.length,x.length)})(s.mapValue,e.mapValue);default:throw De()}}function rg(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ke(s,e);const t=gs(s),i=gs(e),o=Ke(t.seconds,i.seconds);return o!==0?o:Ke(t.nanos,i.nanos)}function sg(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=io(t[o],i[o]);if(u)return u}return Ke(t.length,i.length)}function oo(s){return Zh(s)}function Zh(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=gs(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Zs(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return xe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=Zh(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${Zh(t.fields[h])}`;return o+"}"})(s.mapValue):De()}function ed(s){return!!s&&"integerValue"in s}function bd(s){return!!s&&"arrayValue"in s}function ig(s){return!!s&&"nullValue"in s}function og(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vu(s){return!!s&&"mapValue"in s}function _x(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function va(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return mo(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=va(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=va(s.arrayValue.values[t]);return e}return Object.assign({},s)}function wx(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!vu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(t)}setAll(e){let t=bt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=va(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());vu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];vu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){mo(t,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new En(va(this.value))}}function Wy(s){const e=[];return mo(s.fields,((t,i)=>{const o=new bt([t]);if(vu(i)){const u=Wy(i.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Fn(e)}class zt{constructor(e,t,i,o,u,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new zt(e,0,Oe.min(),Oe.min(),Oe.min(),En.empty(),0)}static newFoundDocument(e,t,i,o){return new zt(e,1,t,Oe.min(),i,o,0)}static newNoDocument(e,t){return new zt(e,2,t,Oe.min(),Oe.min(),En.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,Oe.min(),Oe.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nu{constructor(e,t){this.position=e,this.inclusive=t}}function ag(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?i=xe.comparator(xe.fromName(h.referenceValue),t.key):i=io(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function lg(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!nr(s.position[t],e.position[t]))return!1;return!0}class bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ex(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}let Hy=class{};class wt extends Hy{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Tx(e,t,i):t==="array-contains"?new kx(e,i):t==="in"?new Ax(e,i):t==="not-in"?new Cx(e,i):t==="array-contains-any"?new Rx(e,i):new wt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Ix(e,i):new Sx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(io(t,this.value)):t!==null&&ei(this.value)===ei(t)&&this.matchesComparison(io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends Hy{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new rr(e,t)}matches(e){return qy(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qy(s){return s.op==="and"}function Ky(s){return xx(s)&&qy(s)}function xx(s){for(const e of s.filters)if(e instanceof rr)return!1;return!0}function td(s){if(s instanceof wt)return s.field.canonicalString()+s.op.toString()+oo(s.value);if(Ky(s))return s.filters.map((e=>td(e))).join(",");{const e=s.filters.map((t=>td(t))).join(",");return`${s.op}(${e})`}}function Gy(s,e){return s instanceof wt?(function(i,o){return o instanceof wt&&i.op===o.op&&i.field.isEqual(o.field)&&nr(i.value,o.value)})(s,e):s instanceof rr?(function(i,o){return o instanceof rr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,h,m)=>u&&Gy(h,o.filters[m])),!0):!1})(s,e):void De()}function Qy(s){return s instanceof wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${oo(t.value)}`})(s):s instanceof rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Qy).join(" ,")+"}"})(s):"Filter"}class Tx extends wt{constructor(e,t,i){super(e,t,i),this.key=xe.fromName(i.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ix extends wt{constructor(e,t){super(e,"in",t),this.keys=Jy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sx extends wt{constructor(e,t){super(e,"not-in",t),this.keys=Jy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jy(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>xe.fromName(i.referenceValue)))}class kx extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bd(t)&&Aa(t.arrayValue,this.value)}}class Ax extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Aa(this.value.arrayValue,t)}}class Cx extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Aa(this.value.arrayValue,t)}}class Rx extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Aa(this.value.arrayValue,i)))}}class Px{constructor(e,t=null,i=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function ug(s,e=null,t=[],i=[],o=null,u=null,h=null){return new Px(s,e,t,i,o,u,h)}function Dd(s){const e=Ve(s);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>td(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),$u(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>oo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>oo(i))).join(",")),e.ue=t}return e.ue}function Od(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Ex(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Gy(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!lg(s.startAt,e.startAt)&&lg(s.endAt,e.endAt)}function nd(s){return xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Wu{constructor(e,t=null,i=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Nx(s,e,t,i,o,u,h,m){return new Wu(s,e,t,i,o,u,h,m)}function Vd(s){return new Wu(s)}function cg(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function bx(s){return s.collectionGroup!==null}function _a(s){const e=Ve(s);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Dt(bt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new bu(u,i))})),t.has(bt.keyField().canonicalString())||e.ce.push(new bu(bt.keyField(),i))}return e.ce}function er(s){const e=Ve(s);return e.le||(e.le=Dx(e,_a(s))),e.le}function Dx(s,e){if(s.limitType==="F")return ug(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new bu(o.field,u)}));const t=s.endAt?new Nu(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Nu(s.startAt.position,s.startAt.inclusive):null;return ug(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function rd(s,e,t){return new Wu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Hu(s,e){return Od(er(s),er(e))&&s.limitType===e.limitType}function Yy(s){return`${Dd(er(s))}|lt:${s.limitType}`}function Ki(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Qy(o))).join(", ")}]`),$u(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>oo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>oo(o))).join(",")),`Target(${i})`})(er(s))}; limitType=${s.limitType})`}function qu(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):xe.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of _a(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const _=ag(h,m,g);return h.inclusive?_<=0:_<0})(i.startAt,_a(i),o)||i.endAt&&!(function(h,m,g){const _=ag(h,m,g);return h.inclusive?_>=0:_>0})(i.endAt,_a(i),o))})(s,e)}function Ox(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Xy(s){return(e,t)=>{let i=!1;for(const o of _a(s)){const u=Vx(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function Vx(s,e,t){const i=s.field.isKeyField()?xe.comparator(e.key,t.key):(function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?io(g,_):De()})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return De()}}class go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,((t,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return By(this.inner)}size(){return this.innerSize}}const Lx=new ot(xe.comparator);function br(){return Lx}const Zy=new ot(xe.comparator);function pa(...s){let e=Zy;for(const t of s)e=e.insert(t.key,t);return e}function ev(s){let e=Zy;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function qs(){return wa()}function tv(){return wa()}function wa(){return new go((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Mx=new ot(xe.comparator),jx=new Dt(xe.comparator);function Fe(...s){let e=jx;for(const t of s)e=e.add(t);return e}const Fx=new Dt(Ke);function Ux(){return Fx}function Ld(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function nv(s){return{integerValue:""+s}}function zx(s,e){return gx(e)?nv(e):Ld(s,e)}class Ku{constructor(){this._=void 0}}function Bx(s,e,t){return s instanceof Ca?(function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Pd(u)&&(u=Nd(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}})(t,e):s instanceof Ra?sv(s,e):s instanceof Pa?iv(s,e):(function(o,u){const h=rv(o,u),m=hg(h)+hg(o.Pe);return ed(h)&&ed(o.Pe)?nv(m):Ld(o.serializer,m)})(s,e)}function $x(s,e,t){return s instanceof Ra?sv(s,e):s instanceof Pa?iv(s,e):t}function rv(s,e){return s instanceof Du?(function(i){return ed(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Ca extends Ku{}class Ra extends Ku{constructor(e){super(),this.elements=e}}function sv(s,e){const t=ov(e);for(const i of s.elements)t.some((o=>nr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Pa extends Ku{constructor(e){super(),this.elements=e}}function iv(s,e){let t=ov(e);for(const i of s.elements)t=t.filter((o=>!nr(o,i)));return{arrayValue:{values:t}}}class Du extends Ku{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function hg(s){return ht(s.integerValue||s.doubleValue)}function ov(s){return bd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Wx{constructor(e,t){this.field=e,this.transform=t}}function Hx(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof Ra&&o instanceof Ra||i instanceof Pa&&o instanceof Pa?so(i.elements,o.elements,nr):i instanceof Du&&o instanceof Du?nr(i.Pe,o.Pe):i instanceof Ca&&o instanceof Ca})(s.transform,e.transform)}class qx{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _u(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Gu{}function av(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new uv(s.key,Sr.none()):new za(s.key,s.data,Sr.none());{const t=s.data,i=En.empty();let o=new Dt(bt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),o=o.add(u)}return new ti(s.key,i,new Fn(o.toArray()),Sr.none())}}function Kx(s,e,t){s instanceof za?(function(o,u,h){const m=o.value.clone(),g=fg(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,e,t):s instanceof ti?(function(o,u,h){if(!_u(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=fg(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(lv(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ea(s,e,t,i){return s instanceof za?(function(u,h,m,g){if(!_u(u.precondition,h))return m;const _=u.value.clone(),x=pg(u.fieldTransforms,g,h);return _.setAll(x),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(s,e,t,i):s instanceof ti?(function(u,h,m,g){if(!_u(u.precondition,h))return m;const _=pg(u.fieldTransforms,g,h),x=h.data;return x.setAll(lv(u)),x.setAll(_),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,e,t,i):(function(u,h,m){return _u(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,e,t)}function Gx(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=rv(i.transform,o||null);u!=null&&(t===null&&(t=En.empty()),t.set(i.field,u))}return t||null}function dg(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&so(i,o,((u,h)=>Hx(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class za extends Gu{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ti extends Gu{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function lv(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function fg(s,e,t){const i=new Map;Qe(s.length===t.length);for(let o=0;o<t.length;o++){const u=s[o],h=u.transform,m=e.data.field(u.field);i.set(u.field,$x(h,m,t[o]))}return i}function pg(s,e,t){const i=new Map;for(const o of s){const u=o.transform,h=t.data.field(o.field);i.set(o.field,Bx(u,h,e))}return i}class uv extends Gu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qx extends Gu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jx{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Kx(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ea(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ea(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=tv();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const g=av(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,((t,i)=>dg(t,i)))&&so(this.baseMutations,e.baseMutations,((t,i)=>dg(t,i)))}}class Md{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Qe(e.mutations.length===i.length);let o=(function(){return Mx})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,i[h].version);return new Md(e,t,i,o)}}class Yx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Xx{constructor(e,t){this.count=e,this.unchangedNames=t}}var pt,We;function Zx(s){switch(s){default:return De();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function cv(s){if(s===void 0)return Nr("GRPC error has no .code"),X.UNKNOWN;switch(s){case pt.OK:return X.OK;case pt.CANCELLED:return X.CANCELLED;case pt.UNKNOWN:return X.UNKNOWN;case pt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case pt.INTERNAL:return X.INTERNAL;case pt.UNAVAILABLE:return X.UNAVAILABLE;case pt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case pt.NOT_FOUND:return X.NOT_FOUND;case pt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case pt.ABORTED:return X.ABORTED;case pt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case pt.DATA_LOSS:return X.DATA_LOSS;default:return De()}}(We=pt||(pt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";function eT(){return new TextEncoder}const tT=new Ks([4294967295,4294967295],0);function mg(s){const e=eT().encode(s),t=new Oy;return t.update(e),new Uint8Array(t.digest())}function gg(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ks([t,i],0),new Ks([o,u],0)]}class jd{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ma(`Invalid padding: ${t}`);if(i<0)throw new ma(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ma(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ma(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ks.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(Ks.fromNumber(i)));return o.compare(tT)===1&&(o=new Ks([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=mg(e),[i,o]=gg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new jd(u,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.Ie===0)return;const t=mg(e),[i,o]=gg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ma extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qu{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Ba.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Qu(Oe.min(),o,new ot(Ke),br(),Fe())}}class Ba{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ba(i,t,Fe(),Fe(),Fe())}}class wu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class hv{constructor(e,t){this.targetId=e,this.me=t}}class dv{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class yg{constructor(){this.fe=0,this.ge=_g(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Fe(),t=Fe(),i=Fe();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:De()}})),new Ba(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=_g()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nT{constructor(e){this.Le=e,this.Be=new Map,this.ke=br(),this.qe=vg(),this.Qe=new ot(Ke)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:De()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const u=o.target;if(nd(u))if(i===0){const h=new xe(u.path);this.Ue(t,h,zt.newNoDocument(h,Oe.min()))}else Qe(i===1);else{const h=this.Ye(t);if(h!==i){const m=this.Ze(e),g=m?this.Xe(m,e,h):1;if(g!==0){this.je(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,_)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=Zs(i).toUint8Array()}catch(g){if(g instanceof $y)return ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new jd(h,o,u)}catch(g){return ro(g instanceof ma?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((u=>{const h=this.Le.tt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(t,u,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((u,h)=>{const m=this.Je(h);if(m){if(u.current&&nd(m.target)){const g=new xe(m.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,zt.newNoDocument(g,e))}u.be&&(t.set(h,u.ve()),u.Ce())}}));let i=Fe();this.qe.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.Je(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(u))})),this.ke.forEach(((u,h)=>h.setReadTime(e)));const o=new Qu(e,t,this.Qe,this.ke,i);return this.ke=br(),this.qe=vg(),this.Qe=new ot(Ke),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new yg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Dt(Ke),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yg),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function vg(){return new ot(xe.comparator)}function _g(){return new ot(xe.comparator)}const rT={asc:"ASCENDING",desc:"DESCENDING"},sT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iT={and:"AND",or:"OR"};class oT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sd(s,e){return s.useProto3Json||$u(e)?e:{value:e}}function Ou(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function aT(s,e){return Ou(s,e.toTimestamp())}function tr(s){return Qe(!!s),Oe.fromTimestamp((function(t){const i=gs(t);return new Et(i.seconds,i.nanos)})(s))}function Fd(s,e){return id(s,e).canonicalString()}function id(s,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function pv(s){const e=lt.fromString(s);return Qe(_v(e)),e}function od(s,e){return Fd(s.databaseId,e.path)}function Uh(s,e){const t=pv(e);if(t.get(1)!==s.databaseId.projectId)throw new Ee(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ee(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new xe(gv(t))}function mv(s,e){return Fd(s.databaseId,e)}function lT(s){const e=pv(s);return e.length===4?lt.emptyPath():gv(e)}function ad(s){return new lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function gv(s){return Qe(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function wg(s,e,t){return{name:od(s,e),fields:t.value.mapValue.fields}}function uT(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:De()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(_,x){return _.useProto3Json?(Qe(x===void 0||typeof x=="string"),Ot.fromBase64String(x||"")):(Qe(x===void 0||x instanceof Buffer||x instanceof Uint8Array),Ot.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const x=_.code===void 0?X.UNKNOWN:cv(_.code);return new Ee(x,_.message||"")})(h);t=new dv(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Uh(s,i.document.name),u=tr(i.document.updateTime),h=i.document.createTime?tr(i.document.createTime):Oe.min(),m=new En({mapValue:{fields:i.document.fields}}),g=zt.newFoundDocument(o,u,h,m),_=i.targetIds||[],x=i.removedTargetIds||[];t=new wu(_,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Uh(s,i.document),u=i.readTime?tr(i.readTime):Oe.min(),h=zt.newNoDocument(o,u),m=i.removedTargetIds||[];t=new wu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Uh(s,i.document),u=i.removedTargetIds||[];t=new wu([],u,o,null)}else{if(!("filter"in e))return De();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,h=new Xx(o,u),m=i.targetId;t=new hv(m,h)}}return t}function cT(s,e){let t;if(e instanceof za)t={update:wg(s,e.key,e.value)};else if(e instanceof uv)t={delete:od(s,e.key)};else if(e instanceof ti)t={update:wg(s,e.key,e.data),updateMask:_T(e.fieldMask)};else{if(!(e instanceof Qx))return De();t={verify:od(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const m=h.transform;if(m instanceof Ca)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ra)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Pa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Du)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw De()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:aT(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:De()})(s,e.precondition)),t}function hT(s,e){return s&&s.length>0?(Qe(e!==void 0),s.map((t=>(function(o,u){let h=o.updateTime?tr(o.updateTime):tr(u);return h.isEqual(Oe.min())&&(h=tr(u)),new qx(h,o.transformResults||[])})(t,e)))):[]}function dT(s,e){return{documents:[mv(s,e.path)]}}function fT(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mv(s,o);const u=(function(_){if(_.length!==0)return vv(rr.create(_,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(_){if(_.length!==0)return _.map((x=>(function(M){return{field:Gi(M.field),direction:gT(M.dir)}})(x)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=sd(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{_t:t,parent:o}}function pT(s){let e=lT(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Qe(i===1);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=(function(A){const M=yv(A);return M instanceof rr&&Ky(M)?M.getFilters():[M]})(t.where));let h=[];t.orderBy&&(h=(function(A){return A.map((M=>(function(H){return new bu(Qi(H.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(M)))})(t.orderBy));let m=null;t.limit&&(m=(function(A){let M;return M=typeof A=="object"?A.value:A,$u(M)?null:M})(t.limit));let g=null;t.startAt&&(g=(function(A){const M=!!A.before,D=A.values||[];return new Nu(D,M)})(t.startAt));let _=null;return t.endAt&&(_=(function(A){const M=!A.before,D=A.values||[];return new Nu(D,M)})(t.endAt)),Nx(e,o,h,u,m,"F",g,_)}function mT(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yv(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Qi(t.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Qi(t.unaryFilter.field);return wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Qi(t.unaryFilter.field);return wt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Qi(t.unaryFilter.field);return wt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return De()}})(s):s.fieldFilter!==void 0?(function(t){return wt.create(Qi(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return rr.create(t.compositeFilter.filters.map((i=>yv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De()}})(t.compositeFilter.op))})(s):De()}function gT(s){return rT[s]}function yT(s){return sT[s]}function vT(s){return iT[s]}function Gi(s){return{fieldPath:s.canonicalString()}}function Qi(s){return bt.fromServerFormat(s.fieldPath)}function vv(s){return s instanceof wt?(function(t){if(t.op==="=="){if(og(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NAN"}};if(ig(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(og(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NOT_NAN"}};if(ig(t.value))return{unaryFilter:{field:Gi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gi(t.field),op:yT(t.op),value:t.value}}})(s):s instanceof rr?(function(t){const i=t.getFilters().map((o=>vv(o)));return i.length===1?i[0]:{compositeFilter:{op:vT(t.op),filters:i}}})(s):De()}function _T(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _v(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class hs{constructor(e,t,i,o,u=Oe.min(),h=Oe.min(),m=Ot.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wT{constructor(e){this.ct=e}}function ET(s){const e=pT({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?rd(e,e.limit,"L"):e}class xT{constructor(){this.un=new TT}addToCollectionParentIndex(e,t){return this.un.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(ms.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class TT{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Dt(lt.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Dt(lt.comparator)).toArray()}}class ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ao(0)}static kn(){return new ao(-1)}}class IT{constructor(){this.changes=new go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ST{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class kT{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ea(i.mutation,o,Fn.empty(),Et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Fe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Fe()){const o=qs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((u=>{let h=pa();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=qs();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Fe())))}populateOverlays(e,t,i){const o=[];return i.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let u=br();const h=wa(),m=(function(){return wa()})();return t.forEach(((g,_)=>{const x=i.get(_.key);o.has(_.key)&&(x===void 0||x.mutation instanceof ti)?u=u.insert(_.key,_):x!==void 0?(h.set(_.key,x.mutation.getFieldMask()),Ea(x.mutation,_,x.mutation.getFieldMask(),Et.now())):h.set(_.key,Fn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((_,x)=>h.set(_,x))),t.forEach(((_,x)=>{var A;return m.set(_,new ST(x,(A=h.get(_))!==null&&A!==void 0?A:null))})),m)))}recalculateAndSaveOverlays(e,t){const i=wa();let o=new ot(((h,m)=>h-m)),u=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let x=i.get(g)||Fn.empty();x=m.applyToLocalView(_,x),i.set(g,x);const A=(o.get(m.batchId)||Fe()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,x=g.value,A=tv();x.forEach((M=>{if(!u.has(M)){const D=av(t.get(M),i.get(M));D!==null&&A.set(M,D),u=u.add(M)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,A))}return Q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return xe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):Q.resolve(qs());let m=-1,g=u;return h.next((_=>Q.forEach(_,((x,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(x)?Q.resolve():this.remoteDocumentCache.getEntry(e,x).next((M=>{g=g.insert(x,M)}))))).next((()=>this.populateOverlays(e,_,u))).next((()=>this.computeViews(e,g,_,Fe()))).next((x=>({batchId:m,changes:ev(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((i=>{let o=pa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let h=pa();return this.indexManager.getCollectionParents(e,u).next((m=>Q.forEach(m,(g=>{const _=(function(A,M){return new Wu(M,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((x=>{x.forEach(((A,M)=>{h=h.insert(A,M)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o)))).next((h=>{u.forEach(((g,_)=>{const x=_.getKey();h.get(x)===null&&(h=h.insert(x,zt.newInvalidDocument(x)))}));let m=pa();return h.forEach(((g,_)=>{const x=u.get(g);x!==void 0&&Ea(x.mutation,_,Fn.empty(),Et.now()),qu(t,_)&&(m=m.insert(g,_))})),m}))}}class AT{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:ET(o.bundledQuery),readTime:tr(o.readTime)}})(t)),Q.resolve()}}class CT{constructor(){this.overlays=new ot(xe.comparator),this.Ir=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=qs();return Q.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,u)=>{this.ht(e,t,u)})),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=qs(),u=t.length+1,h=new xe(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new ot(((_,x)=>_-x));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let x=u.get(_.largestBatchId);x===null&&(x=qs(),u=u.insert(_.largestBatchId,x)),x.set(_.getKey(),_)}}const m=qs(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,x)=>m.set(_,x))),!(m.size()>=o)););return Q.resolve(m)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new Yx(t,i));let u=this.Ir.get(t);u===void 0&&(u=Fe(),this.Ir.set(t,u)),this.Ir.set(t,u.add(i.key))}}class RT{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}class Ud{constructor(){this.Tr=new Dt(kt.Er),this.dr=new Dt(kt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new kt(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new xe(new lt([])),i=new kt(t,e),o=new kt(t,e+1),u=[];return this.dr.forEachInRange([i,o],(h=>{this.Vr(h),u.push(h.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new xe(new lt([])),i=new kt(t,e),o=new kt(t,e+1);let u=Fe();return this.dr.forEachInRange([i,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new kt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return xe.comparator(e.key,t.key)||Ke(e.wr,t.wr)}static Ar(e,t){return Ke(e.wr,t.wr)||xe.comparator(e.key,t.key)}}class PT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Dt(kt.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Jx(u,t,i,o);this.mutationQueue.push(h);for(const m of o)this.br=this.br.add(new kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Q.resolve(h)}lookupMutationBatch(e,t){return Q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),u=o<0?0:o;return Q.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([i,o],(h=>{const m=this.Dr(h.wr);u.push(m)})),Q.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Dt(Ke);return t.forEach((o=>{const u=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],(m=>{i=i.add(m.wr)}))})),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;xe.isDocumentKey(u)||(u=u.child(""));const h=new kt(new xe(u),0);let m=new Dt(Ke);return this.br.forEachWhile((g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.wr)),!0)}),h),Q.resolve(this.Cr(m))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(t.mutations,(o=>{const u=new kt(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new kt(t,0),o=this.br.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NT{constructor(e){this.Mr=e,this.docs=(function(){return new ot(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let i=br();return t.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():zt.newInvalidDocument(o))})),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=br();const h=t.path,m=new xe(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:x}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||dx(hx(x),i)<=0||(o.has(x.key)||qu(t,x))&&(u=u.insert(x.key,x.mutableCopy()))}return Q.resolve(u)}getAllFromCollectionGroup(e,t,i,o){De()}Or(e,t){return Q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new bT(this)}getSize(e){return Q.resolve(this.size)}}class bT extends IT{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),Q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class DT{constructor(e){this.persistence=e,this.Nr=new go((t=>Dd(t)),Od),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ud,this.targetCount=0,this.kr=ao.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ao(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Kn(t),Q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.Nr.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),Q.waitFor(u).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),Q.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this.Br.containsKey(t))}}class OT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Rd(0),this.Kr=!1,this.Kr=!0,this.$r=new RT,this.referenceDelegate=e(this),this.Ur=new DT(this),this.indexManager=new xT,this.remoteDocumentCache=(function(o){return new NT(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new wT(t),this.Gr=new AT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new PT(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new VT(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,t){return Q.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class VT extends px{constructor(e){super(),this.currentSequenceNumber=e}}class zd{constructor(e){this.persistence=e,this.Jr=new Ud,this.Yr=null}static Zr(e){return new zd(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,(i=>{const o=xe.fromPath(i);return this.ei(e,o).next((u=>{u||t.removeEntry(o,Oe.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Q.or([()=>Q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Bd{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Fe(),o=Fe();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Bd(e,t.fromCache,i,o)}}class LT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class MT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return V_()?8:mx(Bt())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.Yi(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.Zi(e,t,o,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new LT;return this.Xi(e,t,h).next((m=>{if(u.result=m,this.zi)return this.es(e,t,h,m.size)}))})).next((()=>u.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(da()<=ze.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ki(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(da()<=ze.DEBUG&&me("QueryEngine","Query:",Ki(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(da()<=ze.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ki(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):Q.resolve())}Yi(e,t){if(cg(t))return Q.resolve(null);let i=er(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=rd(t,null,"F"),i=er(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Fe(...u);return this.Ji.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const _=this.ts(t,m);return this.ns(t,_,h,g.readTime)?this.Yi(e,rd(t,null,"F")):this.rs(e,_,t,g)}))))})))))}Zi(e,t,i,o){return cg(t)||o.isEqual(Oe.min())?Q.resolve(null):this.Ji.getDocuments(e,i).next((u=>{const h=this.ts(t,u);return this.ns(t,h,i,o)?Q.resolve(null):(da()<=ze.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ki(t)),this.rs(e,h,t,cx(o,-1)).next((m=>m)))}))}ts(e,t){let i=new Dt(Xy(e));return t.forEach(((o,u)=>{qu(e,u)&&(i=i.add(u))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,t,i){return da()<=ze.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ki(t)),this.Ji.getDocumentsMatchingQuery(e,t,ms.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}class jT{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new ot(Ke),this._s=new go((u=>Dd(u)),Od),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function FT(s,e,t,i){return new jT(s,e,t,i)}async function wv(s,e){const t=Ve(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],m=[];let g=Fe();for(const _ of o){h.push(_.batchId);for(const x of _.mutations)g=g.add(x.key)}for(const _ of u){m.push(_.batchId);for(const x of _.mutations)g=g.add(x.key)}return t.localDocuments.getDocuments(i,g).next((_=>({hs:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function UT(s,e){const t=Ve(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=t.cs.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,x){const A=_.batch,M=A.keys();let D=Q.resolve();return M.forEach((H=>{D=D.next((()=>x.getEntry(g,H))).next((W=>{const $=_.docVersions.get(H);Qe($!==null),W.version.compareTo($)<0&&(A.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),x.addEntry(W)))}))})),D.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Fe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Ev(s){const e=Ve(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function zT(s,e){const t=Ve(s),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const m=[];e.targetChanges.forEach(((x,A)=>{const M=o.get(A);if(!M)return;m.push(t.Ur.removeMatchingKeys(u,x.removedDocuments,A).next((()=>t.Ur.addMatchingKeys(u,x.addedDocuments,A))));let D=M.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?D=D.withResumeToken(Ot.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):x.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(x.resumeToken,i)),o=o.insert(A,D),(function(W,$,oe){return W.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(M,D,x)&&m.push(t.Ur.updateTargetData(u,D))}));let g=br(),_=Fe();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,x))})),m.push(BT(u,h,e.documentUpdates).next((x=>{g=x.Ps,_=x.Is}))),!i.isEqual(Oe.min())){const x=t.Ur.getLastRemoteSnapshotVersion(u).next((A=>t.Ur.setTargetsMetadata(u,u.currentSequenceNumber,i)));m.push(x)}return Q.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,_))).next((()=>g))})).then((u=>(t.os=o,u)))}function BT(s,e,t){let i=Fe(),o=Fe();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=br();return t.forEach(((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):me("LocalStore","Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{Ps:h,Is:o}}))}function $T(s,e){const t=Ve(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function WT(s,e){const t=Ve(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((u=>u?(o=u,Q.resolve(o)):t.Ur.allocateTargetId(i).next((h=>(o=new hs(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function ld(s,e,t){const i=Ve(s),o=i.os.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ua(h))throw h;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Eg(s,e,t){const i=Ve(s);let o=Oe.min(),u=Fe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,x){const A=Ve(g),M=A._s.get(x);return M!==void 0?Q.resolve(A.os.get(M)):A.Ur.getTargetData(_,x)})(i,h,er(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:Oe.min(),t?u:Fe()))).next((m=>(HT(i,Ox(e),m),{documents:m,Ts:u})))))}function HT(s,e,t){let i=s.us.get(e)||Oe.min();t.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.us.set(e,i)}class xg{constructor(){this.activeTargetIds=Ux()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qT{constructor(){this.so=new xg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KT{_o(e){}shutdown(){}}class Tg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let hu=null;function zh(){return hu===null?hu=(function(){return 268435456+Math.round(2147483648*Math.random())})():hu++,"0x"+hu.toString(16)}const GT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QT{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ft="WebChannelConnection";class JT extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(t,i,o,u,h){const m=zh(),g=this.xo(t,i.toUriEncodedString());me("RestConnection",`Sending RPC '${t}' ${m}:`,g,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,u,h),this.No(t,g,_,o).then((x=>(me("RestConnection",`Received RPC '${t}' ${m}: `,x),x)),(x=>{throw ro("RestConnection",`RPC '${t}' ${m} failed with error: `,x,"url: ",g,"request:",o),x}))}Lo(t,i,o,u,h,m){return this.Mo(t,i,o,u,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+po})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((u,h)=>t[h]=u)),o&&o.headers.forEach(((u,h)=>t[h]=u))}xo(t,i){const o=GT[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const u=zh();return new Promise(((h,m)=>{const g=new Vy;g.setWithCredentials(!0),g.listenOnce(Ly.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case yu.NO_ERROR:const x=g.getResponseJson();me(Ft,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),h(x);break;case yu.TIMEOUT:me(Ft,`RPC '${e}' ${u} timed out`),m(new Ee(X.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:const A=g.getStatus();if(me(Ft,`RPC '${e}' ${u} failed with status:`,A,"response text:",g.getResponseText()),A>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const D=M?.error;if(D&&D.status&&D.message){const H=(function($){const oe=$.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(oe)>=0?oe:X.UNKNOWN})(D.status);m(new Ee(H,D.message))}else m(new Ee(X.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Ee(X.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{me(Ft,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);me(Ft,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",_,i,15)}))}Bo(e,t,i){const o=zh(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Fy(),m=jy(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const x=u.join("");me(Ft,`Creating RPC '${e}' stream ${o}: ${x}`,g);const A=h.createWebChannel(x,g);let M=!1,D=!1;const H=new QT({Io:$=>{D?me(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(M||(me(Ft,`Opening RPC '${e}' stream ${o} transport.`),A.open(),M=!0),me(Ft,`RPC '${e}' stream ${o} sending:`,$),A.send($))},To:()=>A.close()}),W=($,oe,ye)=>{$.listen(oe,(le=>{try{ye(le)}catch(ve){setTimeout((()=>{throw ve}),0)}}))};return W(A,fa.EventType.OPEN,(()=>{D||(me(Ft,`RPC '${e}' stream ${o} transport opened.`),H.yo())})),W(A,fa.EventType.CLOSE,(()=>{D||(D=!0,me(Ft,`RPC '${e}' stream ${o} transport closed`),H.So())})),W(A,fa.EventType.ERROR,($=>{D||(D=!0,ro(Ft,`RPC '${e}' stream ${o} transport errored:`,$),H.So(new Ee(X.UNAVAILABLE,"The operation could not be completed")))})),W(A,fa.EventType.MESSAGE,($=>{var oe;if(!D){const ye=$.data[0];Qe(!!ye);const le=ye,ve=le.error||((oe=le[0])===null||oe===void 0?void 0:oe.error);if(ve){me(Ft,`RPC '${e}' stream ${o} received error:`,ve);const Le=ve.status;let Te=(function(k){const R=pt[k];if(R!==void 0)return cv(R)})(Le),P=ve.message;Te===void 0&&(Te=X.INTERNAL,P="Unknown error status: "+Le+" with message "+ve.message),D=!0,H.So(new Ee(Te,P)),A.close()}else me(Ft,`RPC '${e}' stream ${o} received:`,ye),H.bo(ye)}})),W(m,My.STAT_EVENT,($=>{$.stat===Xh.PROXY?me(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Xh.NOPROXY&&me(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{H.wo()}),0),H}}function Bh(){return typeof document<"u"?document:null}function Ju(s){return new oT(s,!0)}class xv{constructor(e,t,i=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Tv{constructor(e,t,i,o,u,h,m,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new Ee(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YT extends Tv{constructor(e,t,i,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=uT(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Oe.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Oe.min():h.readTime?tr(h.readTime):Oe.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=ad(this.serializer),t.addTarget=(function(u,h){let m;const g=h.target;if(m=nd(g)?{documents:dT(u,g)}:{query:fT(u,g)._t},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=fv(u,h.resumeToken);const _=sd(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(Oe.min())>0){m.readTime=Ou(u,h.snapshotVersion.toTimestamp());const _=sd(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=mT(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=ad(this.serializer),t.removeTarget=e,this.a_(t)}}class XT extends Tv{constructor(e,t,i,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=hT(e.writeResults,e.commitTime),i=tr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=ad(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>cT(this.serializer,i)))};this.a_(t)}}class ZT extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new Ee(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Mo(e,id(t,i),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ee(X.UNKNOWN,u.toString())}))}Lo(e,t,i,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Lo(e,id(t,i),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ee(X.UNKNOWN,h.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class eI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Nr(t),this.D_=!1):me("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class tI{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((h=>{i.enqueueAndForget((async()=>{ni(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const _=Ve(g);_.L_.add(4),await $a(_),_.q_.set("Unknown"),_.L_.delete(4),await Yu(_)})(this))}))})),this.q_=new eI(i,o)}}async function Yu(s){if(ni(s))for(const e of s.B_)await e(!0)}async function $a(s){for(const e of s.B_)await e(!1)}function Iv(s,e){const t=Ve(s);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),qd(t)?Hd(t):yo(t).r_()&&Wd(t,e))}function $d(s,e){const t=Ve(s),i=yo(t);t.N_.delete(e),i.r_()&&Sv(t,e),t.N_.size===0&&(i.r_()?i.o_():ni(t)&&t.q_.set("Unknown"))}function Wd(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yo(s).A_(e)}function Sv(s,e){s.Q_.xe(e),yo(s).R_(e)}function Hd(s){s.Q_=new nT({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),yo(s).start(),s.q_.v_()}function qd(s){return ni(s)&&!yo(s).n_()&&s.N_.size>0}function ni(s){return Ve(s).L_.size===0}function kv(s){s.Q_=void 0}async function nI(s){s.q_.set("Online")}async function rI(s){s.N_.forEach(((e,t)=>{Wd(s,e)}))}async function sI(s,e){kv(s),qd(s)?(s.q_.M_(e),Hd(s)):s.q_.set("Unknown")}async function iI(s,e,t){if(s.q_.set("Online"),e instanceof dv&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.N_.delete(m),o.Q_.removeTarget(m))})(s,e)}catch(i){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vu(s,i)}else if(e instanceof wu?s.Q_.Ke(e):e instanceof hv?s.Q_.He(e):s.Q_.We(e),!t.isEqual(Oe.min()))try{const i=await Ev(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const m=u.Q_.rt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const x=u.N_.get(_);x&&u.N_.set(_,x.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const x=u.N_.get(g);if(!x)return;u.N_.set(g,x.withResumeToken(Ot.EMPTY_BYTE_STRING,x.snapshotVersion)),Sv(u,g);const A=new hs(x.target,g,_,x.sequenceNumber);Wd(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(i){me("RemoteStore","Failed to raise snapshot:",i),await Vu(s,i)}}async function Vu(s,e,t){if(!Ua(e))throw e;s.L_.add(1),await $a(s),s.q_.set("Offline"),t||(t=()=>Ev(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{me("RemoteStore","Retrying IndexedDB access"),await t(),s.L_.delete(1),await Yu(s)}))}function Av(s,e){return e().catch((t=>Vu(s,t,e)))}async function Xu(s){const e=Ve(s),t=ys(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;oI(e);)try{const o=await $T(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,aI(e,o)}catch(o){await Vu(e,o)}Cv(e)&&Rv(e)}function oI(s){return ni(s)&&s.O_.length<10}function aI(s,e){s.O_.push(e);const t=ys(s);t.r_()&&t.V_&&t.m_(e.mutations)}function Cv(s){return ni(s)&&!ys(s).n_()&&s.O_.length>0}function Rv(s){ys(s).start()}async function lI(s){ys(s).p_()}async function uI(s){const e=ys(s);for(const t of s.O_)e.m_(t.mutations)}async function cI(s,e,t){const i=s.O_.shift(),o=Md.from(i,e,t);await Av(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Xu(s)}async function hI(s,e){e&&ys(s).V_&&await(async function(i,o){if((function(h){return Zx(h)&&h!==X.ABORTED})(o.code)){const u=i.O_.shift();ys(i).s_(),await Av(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Xu(i)}})(s,e),Cv(s)&&Rv(s)}async function Ig(s,e){const t=Ve(s);t.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const i=ni(t);t.L_.add(3),await $a(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Yu(t)}async function dI(s,e){const t=Ve(s);e?(t.L_.delete(2),await Yu(t)):e||(t.L_.add(2),await $a(t),t.q_.set("Unknown"))}function yo(s){return s.K_||(s.K_=(function(t,i,o){const u=Ve(t);return u.w_(),new YT(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:nI.bind(null,s),Ro:rI.bind(null,s),mo:sI.bind(null,s),d_:iI.bind(null,s)}),s.B_.push((async e=>{e?(s.K_.s_(),qd(s)?Hd(s):s.q_.set("Unknown")):(await s.K_.stop(),kv(s))}))),s.K_}function ys(s){return s.U_||(s.U_=(function(t,i,o){const u=Ve(t);return u.w_(),new XT(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:lI.bind(null,s),mo:hI.bind(null,s),f_:uI.bind(null,s),g_:cI.bind(null,s)}),s.B_.push((async e=>{e?(s.U_.s_(),await Xu(s)):(await s.U_.stop(),s.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))}))),s.U_}class Kd{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const h=Date.now()+i,m=new Kd(e,t,h,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gd(s,e){if(Nr("AsyncQueue",`${e}: ${s}`),Ua(s))return new Ee(X.UNAVAILABLE,`${e}: ${s}`);throw s}class eo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||xe.comparator(t.key,i.key):(t,i)=>xe.comparator(t.key,i.key),this.keyedMap=pa(),this.sortedSet=new ot(this.comparator)}static emptySet(e){return new eo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Sg{constructor(){this.W_=new ot(xe.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class lo{constructor(e,t,i,o,u,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new lo(e,t,eo.emptySet(t),h,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class fI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class pI{constructor(){this.queries=kg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Ve(t),u=o.queries;o.queries=kg(),u.forEach(((h,m)=>{for(const g of m.j_)g.onError(i)}))})(this,new Ee(X.ABORTED,"Firestore shutting down"))}}function kg(){return new go((s=>Yy(s)),Hu)}async function mI(s,e){const t=Ve(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.H_()&&e.J_()&&(i=2):(u=new fI,i=e.J_()?0:1);try{switch(i){case 0:u.z_=await t.onListen(o,!0);break;case 1:u.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Gd(h,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.j_.push(e),e.Z_(t.onlineState),u.z_&&e.X_(u.z_)&&Qd(t)}async function gI(s,e){const t=Ve(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function yI(s,e){const t=Ve(s);let i=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.j_)m.X_(o)&&(i=!0);h.z_=o}}i&&Qd(t)}function vI(s,e,t){const i=Ve(s),o=i.queries.get(e);if(o)for(const u of o.j_)u.onError(t);i.queries.delete(e)}function Qd(s){s.Y_.forEach((e=>{e.next()}))}var ud,Ag;(Ag=ud||(ud={})).ea="default",Ag.Cache="cache";class _I{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ud.Cache}}class Pv{constructor(e){this.key=e}}class Nv{constructor(e){this.key=e}}class wI{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Fe(),this.mutatedKeys=Fe(),this.Aa=Xy(e),this.Ra=new eo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Sg,o=t?t.Ra:this.Ra;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,A)=>{const M=o.get(x),D=qu(this.query,A)?A:null,H=!!M&&this.mutatedKeys.has(M.key),W=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let $=!1;M&&D?M.data.isEqual(D.data)?H!==W&&(i.track({type:3,doc:D}),$=!0):this.ga(M,D)||(i.track({type:2,doc:D}),$=!0,(g&&this.Aa(D,g)>0||_&&this.Aa(D,_)<0)&&(m=!0)):!M&&D?(i.track({type:0,doc:D}),$=!0):M&&!D&&(i.track({type:1,doc:M}),$=!0,(g||_)&&(m=!0)),$&&(D?(h=h.add(D),u=W?u.add(x):u.delete(x)):(h=h.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),u=u.delete(x.key),i.track({type:1,doc:x})}return{Ra:h,fa:i,ns:m,mutatedKeys:u}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort(((x,A)=>(function(D,H){const W=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return W(D)-W(H)})(x.type,A.type)||this.Aa(x.doc,A.doc))),this.pa(i),o=o!=null&&o;const m=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,_=g!==this.Ea;return this.Ea=g,h.length!==0||_?{snapshot:new lo(this.query,e.Ra,u,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Fe(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new Nv(i))})),this.da.forEach((i=>{e.has(i)||t.push(new Pv(i))})),t}ba(e){this.Ta=e.Ts,this.da=Fe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return lo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class EI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class xI{constructor(e){this.key=e,this.va=!1}}class TI{constructor(e,t,i,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new go((m=>Yy(m)),Hu),this.Ma=new Map,this.xa=new Set,this.Oa=new ot(xe.comparator),this.Na=new Map,this.La=new Ud,this.Ba={},this.ka=new Map,this.qa=ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function II(s,e,t=!0){const i=Mv(s);let o;const u=i.Fa.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await bv(i,e,t,!0),o}async function SI(s,e){const t=Mv(s);await bv(t,e,!0,!1)}async function bv(s,e,t,i){const o=await WT(s.localStore,er(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let m;return i&&(m=await kI(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&Iv(s.remoteStore,o),m}async function kI(s,e,t,i,o){s.Ka=(A,M,D)=>(async function(W,$,oe,ye){let le=$.view.ma(oe);le.ns&&(le=await Eg(W.localStore,$.query,!1).then((({documents:P})=>$.view.ma(P,le))));const ve=ye&&ye.targetChanges.get($.targetId),Le=ye&&ye.targetMismatches.get($.targetId)!=null,Te=$.view.applyChanges(le,W.isPrimaryClient,ve,Le);return Rg(W,$.targetId,Te.wa),Te.snapshot})(s,A,M,D);const u=await Eg(s.localStore,e,!0),h=new wI(e,u.Ts),m=h.ma(u.documents),g=Ba.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);Rg(s,t,_.wa);const x=new EI(e,t,h);return s.Fa.set(e,x),s.Ma.has(t)?s.Ma.get(t).push(e):s.Ma.set(t,[e]),_.snapshot}async function AI(s,e,t){const i=Ve(s),o=i.Fa.get(e),u=i.Ma.get(o.targetId);if(u.length>1)return i.Ma.set(o.targetId,u.filter((h=>!Hu(h,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await ld(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&$d(i.remoteStore,o.targetId),cd(i,o.targetId)})).catch(Fa)):(cd(i,o.targetId),await ld(i.localStore,o.targetId,!0))}async function CI(s,e){const t=Ve(s),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),$d(t.remoteStore,i.targetId))}async function RI(s,e,t){const i=LI(s);try{const o=await(function(h,m){const g=Ve(h),_=Et.now(),x=m.reduce(((D,H)=>D.add(H.key)),Fe());let A,M;return g.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let H=br(),W=Fe();return g.cs.getEntries(D,x).next(($=>{H=$,H.forEach(((oe,ye)=>{ye.isValidDocument()||(W=W.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(D,H))).next(($=>{A=$;const oe=[];for(const ye of m){const le=Gx(ye,A.get(ye.key).overlayedDocument);le!=null&&oe.push(new ti(ye.key,le,Wy(le.value.mapValue),Sr.exists(!0)))}return g.mutationQueue.addMutationBatch(D,_,oe,m)})).next(($=>{M=$;const oe=$.applyToLocalDocumentSet(A,W);return g.documentOverlayCache.saveOverlays(D,$.batchId,oe)}))})).then((()=>({batchId:M.batchId,changes:ev(A)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let _=h.Ba[h.currentUser.toKey()];_||(_=new ot(Ke)),_=_.insert(m,g),h.Ba[h.currentUser.toKey()]=_})(i,o.batchId,t),await Wa(i,o.changes),await Xu(i.remoteStore)}catch(o){const u=Gd(o,"Failed to persist write");t.reject(u)}}async function Dv(s,e){const t=Ve(s);try{const i=await zT(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Na.get(u);h&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Qe(h.va):o.removedDocuments.size>0&&(Qe(h.va),h.va=!1))})),await Wa(t,i,e)}catch(i){await Fa(i)}}function Cg(s,e,t){const i=Ve(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((u,h)=>{const m=h.view.Z_(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Ve(h);g.onlineState=m;let _=!1;g.queries.forEach(((x,A)=>{for(const M of A.j_)M.Z_(m)&&(_=!0)})),_&&Qd(g)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PI(s,e,t){const i=Ve(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),u=o&&o.key;if(u){let h=new ot(xe.comparator);h=h.insert(u,zt.newNoDocument(u,Oe.min()));const m=Fe().add(u),g=new Qu(Oe.min(),new Map,new ot(Ke),h,m);await Dv(i,g),i.Oa=i.Oa.remove(u),i.Na.delete(e),Jd(i)}else await ld(i.localStore,e,!1).then((()=>cd(i,e,t))).catch(Fa)}async function NI(s,e){const t=Ve(s),i=e.batch.batchId;try{const o=await UT(t.localStore,e);Vv(t,i,null),Ov(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Wa(t,o)}catch(o){await Fa(o)}}async function bI(s,e,t){const i=Ve(s);try{const o=await(function(h,m){const g=Ve(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let x;return g.mutationQueue.lookupMutationBatch(_,m).next((A=>(Qe(A!==null),x=A.keys(),g.mutationQueue.removeMutationBatch(_,A)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,x,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,x))).next((()=>g.localDocuments.getDocuments(_,x)))}))})(i.localStore,e);Vv(i,e,t),Ov(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Wa(i,o)}catch(o){await Fa(o)}}function Ov(s,e){(s.ka.get(e)||[]).forEach((t=>{t.resolve()})),s.ka.delete(e)}function Vv(s,e,t){const i=Ve(s);let o=i.Ba[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function cd(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),t&&s.Ca.$a(i,t);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach((i=>{s.La.containsKey(i)||Lv(s,i)}))}function Lv(s,e){s.xa.delete(e.path.canonicalString());const t=s.Oa.get(e);t!==null&&($d(s.remoteStore,t),s.Oa=s.Oa.remove(e),s.Na.delete(t),Jd(s))}function Rg(s,e,t){for(const i of t)i instanceof Pv?(s.La.addReference(i.key,e),DI(s,i)):i instanceof Nv?(me("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||Lv(s,i.key)):De()}function DI(s,e){const t=e.key,i=t.path.canonicalString();s.Oa.get(t)||s.xa.has(i)||(me("SyncEngine","New document in limbo: "+t),s.xa.add(i),Jd(s))}function Jd(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const t=new xe(lt.fromString(e)),i=s.qa.next();s.Na.set(i,new xI(t)),s.Oa=s.Oa.insert(t,i),Iv(s.remoteStore,new hs(er(Vd(t.path)),i,"TargetPurposeLimboResolution",Rd.oe))}}async function Wa(s,e,t){const i=Ve(s),o=[],u=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach(((m,g)=>{h.push(i.Ka(g,e,t).then((_=>{var x;if((_||t)&&i.isPrimaryClient){const A=_?!_.fromCache:(x=t?.targetChanges.get(g.targetId))===null||x===void 0?void 0:x.current;i.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(_){o.push(_);const A=Bd.Wi(g.targetId,_);u.push(A)}})))})),await Promise.all(h),i.Ca.d_(o),await(async function(g,_){const x=Ve(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>Q.forEach(_,(M=>Q.forEach(M.$i,(D=>x.persistence.referenceDelegate.addReference(A,M.targetId,D))).next((()=>Q.forEach(M.Ui,(D=>x.persistence.referenceDelegate.removeReference(A,M.targetId,D)))))))))}catch(A){if(!Ua(A))throw A;me("LocalStore","Failed to update sequence numbers: "+A)}for(const A of _){const M=A.targetId;if(!A.fromCache){const D=x.os.get(M),H=D.snapshotVersion,W=D.withLastLimboFreeSnapshotVersion(H);x.os=x.os.insert(M,W)}}})(i.localStore,u))}async function OI(s,e){const t=Ve(s);if(!t.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const i=await wv(t.localStore,e);t.currentUser=e,(function(u,h){u.ka.forEach((m=>{m.forEach((g=>{g.reject(new Ee(X.CANCELLED,h))}))})),u.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wa(t,i.hs)}}function VI(s,e){const t=Ve(s),i=t.Na.get(e);if(i&&i.va)return Fe().add(i.key);{let o=Fe();const u=t.Ma.get(e);if(!u)return o;for(const h of u){const m=t.Fa.get(h);o=o.unionWith(m.view.Va)}return o}}function Mv(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PI.bind(null,e),e.Ca.d_=yI.bind(null,e.eventManager),e.Ca.$a=vI.bind(null,e.eventManager),e}function LI(s){const e=Ve(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,e),e}class Lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return FT(this.persistence,new MT,e.initialUser,this.serializer)}Ga(e){return new OT(zd.Zr,this.serializer)}Wa(e){return new qT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lu.provider={build:()=>new Lu};class hd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Cg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OI.bind(null,this.syncEngine),await dI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pI})()}createDatastore(e){const t=Ju(e.databaseInfo.databaseId),i=(function(u){return new JT(u)})(e.databaseInfo);return(function(u,h,m,g){return new ZT(u,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,u,h,m){return new tI(i,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Cg(this.syncEngine,t,0)),(function(){return Tg.D()?new Tg:new KT})())}createSyncEngine(e,t){return(function(o,u,h,m,g,_,x){const A=new TI(o,u,h,m,g,_);return x&&(A.Qa=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=Ve(o);me("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await $a(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hd.provider={build:()=>new hd};class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class jI{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=zy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{me("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(me("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Gd(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $h(s,e){s.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await wv(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Pg(s,e){s.asyncQueue.verifyOperationInProgress();const t=await FI(s);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>Ig(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>Ig(e.remoteStore,o))),s._onlineComponents=e}async function FI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await $h(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ro("Error using user provided cache. Falling back to memory cache: "+t),await $h(s,new Lu)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await $h(s,new Lu);return s._offlineComponents}async function jv(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await Pg(s,s._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await Pg(s,new hd))),s._onlineComponents}function UI(s){return jv(s).then((e=>e.syncEngine))}async function Ng(s){const e=await jv(s),t=e.eventManager;return t.onListen=II.bind(null,e.syncEngine),t.onUnlisten=AI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=SI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CI.bind(null,e.syncEngine),t}function Fv(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const bg=new Map;function zI(s,e,t){if(!t)throw new Ee(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function BI(s,e,t,i){if(e===!0&&i===!0)throw new Ee(X.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Dg(s){if(!xe.isDocumentKey(s))throw new Ee(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Yd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":De()}function to(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ee(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yd(s);throw new Ee(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}class Og{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fv((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ee(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ee(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ee(X.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Og({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Og(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new tx;switch(i.type){case"firstParty":return new ix(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=bg.get(t);i&&(me("ComponentProvider","Removing Datastore"),bg.delete(t),i.terminate())})(this),Promise.resolve()}}function $I(s,e,t,i={}){var o;const u=(s=to(s,Xd))._getSettings(),h=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),i.mockUserToken){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Ut.MOCK_USER;else{m=C_(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new Ee(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Ut(_)}s._authCredentials=new nx(new Uy(m,g))}}class Zu{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Zu(this.firestore,e,this._query)}}class xn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Na extends Zu{constructor(e,t,i){super(e,t,Vd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new xe(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function Vg(s,e,...t){if(s=Tn(s),arguments.length===1&&(e=zy.newId()),zI("doc","path",e),s instanceof Xd){const i=lt.fromString(e,...t);return Dg(i),new xn(s,null,new xe(i))}{if(!(s instanceof xn||s instanceof Na))throw new Ee(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(lt.fromString(e,...t));return Dg(i),new xn(s.firestore,s instanceof Na?s.converter:null,new xe(i))}}class Lg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new xv(this,"async_queue_retry"),this.Vu=()=>{const i=Bh();i&&me("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=Bh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Bh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Gs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ua(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m})(i);throw Nr("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=Kd.createAndSchedule(this,e,t,i,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Mg(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Mu extends Xd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Lg,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lg(e),this._firestoreClient=void 0,await e}}}function WI(s,e){const t=typeof s=="object"?s:Zg(),i=typeof s=="string"?s:"(default)",o=vd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=k_("firestore");u&&$I(o,...u)}return o}function Uv(s){if(s._terminated)throw new Ee(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||HI(s),s._firestoreClient}function HI(s){var e,t,i;const o=s._freezeSettings(),u=(function(m,g,_,x){return new vx(m,g,_,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,Fv(x.experimentalLongPollingOptions),x.useFetchStreams)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new jI(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&(function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}})(s._componentsProvider))}class uo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uo(Ot.fromBase64String(e))}catch(t){throw new Ee(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uo(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ef{constructor(e){this._methodName=e}}class tf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}class nf{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}}const qI=/^__.*__$/;class KI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new za(e,this.data,t,this.fieldTransforms)}}function zv(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class rf{constructor(e,t,i,o,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ju(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(zv(this.Cu)&&qI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class GI{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ju(e)}Qu(e,t,i,o=!1){return new rf({Cu:e,methodName:t,qu:i,path:bt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QI(s){const e=s._freezeSettings(),t=Ju(s._databaseId);return new GI(s._databaseId,!!e.ignoreUndefinedProperties,t)}function JI(s,e,t,i,o,u={}){const h=s.Qu(u.merge||u.mergeFields?2:0,e,t,o);Hv("Data must be an object, but it was:",h,i);const m=$v(i,h);let g,_;if(u.merge)g=new Fn(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const x=[];for(const A of u.mergeFields){const M=YI(e,A,t);if(!h.contains(M))throw new Ee(X.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);ZI(x,M)||x.push(M)}g=new Fn(x),_=h.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,_=h.fieldTransforms;return new KI(new En(m),g,_)}class sf extends ef{_toFieldTransform(e){return new Wx(e.path,new Ca)}isEqual(e){return e instanceof sf}}function Bv(s,e){if(Wv(s=Tn(s)))return Hv("Unsupported field value:",e,s),$v(s,e);if(s instanceof ef)return(function(i,o){if(!zv(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const u=[];let h=0;for(const m of i){let g=Bv(m,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zx(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Et.fromDate(i);return{timestampValue:Ou(o.serializer,u)}}if(i instanceof Et){const u=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ou(o.serializer,u)}}if(i instanceof tf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof uo)return{bytesValue:fv(o.serializer,i._byteString)};if(i instanceof xn){const u=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Fd(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof nf)return(function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return Ld(m.serializer,g)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${Yd(i)}`)})(s,e)}function $v(s,e){const t={};return By(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(s,((i,o)=>{const u=Bv(o,e.Mu(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function Wv(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Et||s instanceof tf||s instanceof uo||s instanceof xn||s instanceof ef||s instanceof nf)}function Hv(s,e,t){if(!Wv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=Yd(t);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function YI(s,e,t){if((e=Tn(e))instanceof Zd)return e._internalPath;if(typeof e=="string")return qv(s,e);throw ju("Field path arguments must be of type string or ",s,!1,void 0,t)}const XI=new RegExp("[~\\*/\\[\\]]");function qv(s,e,t){if(e.search(XI)>=0)throw ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Zd(...e.split("."))._internalPath}catch{throw ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function ju(s,e,t,i,o){const u=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new Ee(X.INVALID_ARGUMENT,m+s+g)}function ZI(s,e){return s.some((t=>t.isEqual(e)))}class Kv{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eS extends Kv{data(){return super.data()}}function Gv(s,e){return typeof e=="string"?qv(s,e):e instanceof Zd?e._internalPath:e._delegate._internalPath}function tS(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ee(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nS{convertValue(e,t="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return mo(e,((o,u)=>{i[o]=this.convertValue(u,t)})),i}convertVectorValue(e){var t,i,o;const u=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((h=>ht(h.doubleValue)));return new nf(u)}convertGeoPoint(e){return new tf(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Nd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Sa(e));default:return null}}convertTimestamp(e){const t=gs(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);Qe(_v(i));const o=new ka(i.get(1),i.get(3)),u=new xe(i.popFirst(5));return o.isEqual(t)||Nr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function rS(s,e,t){let i;return i=s?s.toFirestore(e):e,i}class ga{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qv extends Kv{constructor(e,t,i,o,u,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Gv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Eu extends Qv{data(e={}){return super.data(e)}}class sS{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ga(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Eu(this._firestore,this._userDataWriter,i.key,i,new ga(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Eu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ga(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Eu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ga(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,x=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),x=h.indexOf(m.doc.key)),{type:iS(m.type),doc:g,oldIndex:_,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function iS(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}class Jv extends nS{constructor(e){super(),this.firestore=e}convertBytes(e){return new uo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function oS(s,e,t){s=to(s,xn);const i=to(s.firestore,Mu),o=rS(s.converter,e);return lS(i,[JI(QI(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Sr.none())])}function aS(s,...e){var t,i,o;s=Tn(s);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Mg(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Mg(e[h])){const A=e[h];e[h]=(t=A.next)===null||t===void 0?void 0:t.bind(A),e[h+1]=(i=A.error)===null||i===void 0?void 0:i.bind(A),e[h+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,_,x;if(s instanceof xn)_=to(s.firestore,Mu),x=Vd(s._key.path),g={next:A=>{e[h]&&e[h](uS(_,s,A))},error:e[h+1],complete:e[h+2]};else{const A=to(s,Zu);_=to(A.firestore,Mu),x=A._query;const M=new Jv(_);g={next:D=>{e[h]&&e[h](new sS(_,M,A,D))},error:e[h+1],complete:e[h+2]},tS(s._query)}return(function(M,D,H,W){const $=new MI(W),oe=new _I(D,$,H);return M.asyncQueue.enqueueAndForget((async()=>mI(await Ng(M),oe))),()=>{$.Za(),M.asyncQueue.enqueueAndForget((async()=>gI(await Ng(M),oe)))}})(Uv(_),x,m,g)}function lS(s,e){return(function(i,o){const u=new Gs;return i.asyncQueue.enqueueAndForget((async()=>RI(await UI(i),o,u))),u.promise})(Uv(s),e)}function uS(s,e,t){const i=t.docs.get(e._key),o=new Jv(s);return new Qv(s,o,e._key,i,new ga(t.hasPendingWrites,t.fromCache),e.converter)}function cS(){return new sf("serverTimestamp")}(function(e,t=!0){(function(o){po=o})(ho),no(new Js("firestore",((i,{instanceIdentifier:o,options:u})=>{const h=i.getProvider("app").getImmediate(),m=new Mu(new rx(i.getProvider("auth-internal")),new ax(i.getProvider("app-check-internal")),(function(_,x){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Ee(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(_.options.projectId,x)})(h,o),h);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ps(eg,"4.7.3",e),ps(eg,"4.7.3","esm2017")})();var hS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ke=(s,e)=>{const t=ie.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:h,className:m="",children:g,..._},x)=>ie.createElement("svg",{ref:x,...hS,width:o,height:o,stroke:i,strokeWidth:h?Number(u)*24/Number(o):u,className:["lucide",`lucide-${dS(s)}`,m].join(" "),..._},[...e.map(([A,M])=>ie.createElement(A,M)),...Array.isArray(g)?g:[g]]));return t.displayName=`${s}`,t};const ec=ke("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const fS=ke("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);const pS=ke("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);const mS=ke("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const of=ke("BrainCircuit",[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]]);const gS=ke("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const af=ke("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Yv=ke("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const Fu=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const yS=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Xv=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const lf=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const vS=ke("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);const _S=ke("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);const wS=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const ES=ke("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const jg=ke("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const xS=ke("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);const TS=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const tc=ke("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const IS=ke("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);const SS=ke("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const kS=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Zv=ke("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const uf=ke("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const cf=ke("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);const kr=ke("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const AS=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const CS=ke("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const e0=ke("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);const RS=ke("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);const PS=ke("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]);const NS=ke("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const bS=ke("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const t0=ke("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const n0=ke("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const r0=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const DS=ke("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const OS=ke("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);const co=ke("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const VS=ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const LS=ke("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);const MS=ke("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const dd=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const fd=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const jS=ke("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);const FS=ke("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const US=ke("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);const s0=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fg="icu_resident_master_v2",i0="",Ug=[];class zS extends md.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error",e,t)}render(){return this.state.hasError?v.jsxs("div",{className:"p-8 text-center flex flex-col items-center justify-center h-full bg-red-50 rounded-xl border border-red-100 m-4",children:[v.jsx(ec,{className:"w-12 h-12 text-red-800 mb-4"}),v.jsx("h2",{className:"text-xl font-bold text-red-800 mb-2",children:"Something went wrong"}),v.jsx("p",{className:"text-red-600 mb-6 max-w-md text-sm font-mono bg-white p-3 rounded border border-red-200",children:this.state.error?.toString()||"Unknown Error"}),v.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors shadow-sm",children:"Reload Component"})]}):this.props.children}}const BS=s=>{const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e},zg=s=>JSON.parse(JSON.stringify(s)),Bg=s=>{if(!s)return"N/A";const e=s.toDate?s.toDate():new Date(s);return isNaN(e)?"N/A":e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})+" "+e.toLocaleDateString("en-US",{month:"short",day:"numeric"})};async function Qs(s,e="tutor"){const t={fix:"You are a JSON syntax correction bot. Your ONLY job is to fix the provided invalid JSON string and return ONLY the corrected JSON array. Do not include markdown formatting, explanations, or extra text.",tutor:"You are an expert medical tutor and analyst. Your knowledge base and recommendations must be strictly derived from 'Irwin & Rippe's Intensive Care Medicine (9th Edition)'. Provide concise, high-yield, board-relevant explanations and study plans.",chat:"You are 'Professor Irwin', a senior ICU attending. You are answering a resident's specific follow-up question about a clinical case. Be Socratic, concise, and friendly. Do not lecture; answer the specific question directly using evidence-based ICU principles.",mnemonic:"You are a creative visual artist. Create a vivid, surreal, and memorable visual description (prompt) that represents a mnemonic for the provided medical concept. The output should be a single paragraph describing an image that, if painted, would help a student remember the fact. Do not explain the mnemonic, just describe the visual scene."},i=t[e]||t.tutor,o=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${i0}`,u=m=>new Promise(g=>setTimeout(g,m)),h={contents:[{parts:[{text:s}]}],systemInstruction:{parts:[{text:i}]}};for(let m=0;m<3;m++)try{const g=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!g.ok)throw new Error("API Error");const x=(await g.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!x)throw new Error("No text returned");return x}catch(g){if(m===2)return"Connection Error: "+g.message;await u(1e3*(m+1))}return"Failed to connect to AI."}async function $S(s){const e=`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${i0}`,t={instances:[{prompt:s}],parameters:{sampleCount:1}};try{const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok)throw new Error(`Imagen API Error: ${i.statusText}`);const u=(await i.json()).predictions?.[0]?.bytesBase64Encoded;if(!u)throw new Error("No image data returned");return`data:image/png;base64,${u}`}catch(i){throw console.error(i),i}}function WS({notification:s,onClose:e}){return s?v.jsxs("div",{className:`fixed bottom-6 right-6 z-50 p-4 rounded-xl shadow-2xl flex items-center gap-3 animate-in slide-in-from-bottom-5 fade-in duration-300 border ${s.type==="error"?"bg-rose-50 border-rose-200 text-rose-800":"bg-emerald-50 border-emerald-200 text-emerald-800"}`,children:[v.jsx("div",{className:`p-2 rounded-full ${s.type==="error"?"bg-rose-100 text-rose-600":"bg-emerald-100 text-emerald-600"}`,children:s.type==="error"?v.jsx(ec,{size:20}):v.jsx(af,{size:20})}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-sm",children:s.type==="error"?"Action Failed":"Success"}),v.jsx("p",{className:"text-xs opacity-90 font-medium",children:s.message})]}),v.jsx("button",{onClick:e,className:"ml-4 p-1 rounded-full hover:bg-black/5 transition-colors",children:v.jsx(s0,{size:16})})]}):null}function HS({options:s,selected:e,onChange:t,placeholder:i,darkMode:o}){const[u,h]=ie.useState(!1),m=ie.useRef(null);ie.useEffect(()=>{const A=M=>{m.current&&!m.current.contains(M.target)&&h(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const g=A=>{e.includes(A)?t(e.filter(M=>M!==A)):t([...e,A])},_=()=>t(s),x=()=>t([]);return v.jsxs("div",{className:"relative",ref:m,children:[v.jsxs("button",{onClick:()=>h(!u),className:`w-full md:w-auto p-2 rounded-lg border text-sm flex items-center justify-between gap-2 min-w-[150px] ${o?"bg-slate-950 border-slate-700 text-white":"bg-white border-slate-200 text-slate-700"}`,children:[v.jsx("span",{className:"truncate max-w-[150px]",children:e.length===0?i:`${e.length} Selected`}),v.jsx(yS,{size:14})]}),u&&v.jsxs("div",{className:`absolute top-full left-0 mt-1 w-64 max-h-80 overflow-y-auto rounded-xl border shadow-xl z-50 ${o?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:[v.jsxs("div",{className:`p-2 border-b flex justify-between ${o?"border-slate-800":"border-slate-100"}`,children:[v.jsx("button",{onClick:_,className:"text-xs font-bold text-indigo-500 hover:underline",children:"All"}),v.jsx("button",{onClick:x,className:"text-xs font-bold text-slate-400 hover:underline",children:"Clear"})]}),s.map(A=>v.jsxs("div",{onClick:()=>g(A),className:`p-2 text-xs flex items-center gap-2 cursor-pointer hover:bg-opacity-50 ${e.includes(A)?"bg-indigo-50 dark:bg-indigo-900/30":""} ${o?"hover:bg-slate-800 text-slate-300":"hover:bg-slate-50 text-slate-700"}`,children:[v.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${e.includes(A)?"bg-indigo-600 border-indigo-600":"border-slate-400"}`,children:e.includes(A)&&v.jsx(Fu,{size:10,className:"text-white"})}),v.jsx("span",{className:"truncate",children:A})]},A))]})]})}const os=({active:s,onClick:e,icon:t,label:i})=>v.jsxs("button",{onClick:e,className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all mb-4 relative group ${s?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[md.cloneElement(t,{size:24}),v.jsx("span",{className:"absolute left-14 bg-slate-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50 font-bold shadow-lg",children:i})]});function du({label:s,value:e,icon:t,darkMode:i}){return v.jsxs("div",{className:`p-4 rounded-xl border flex items-center gap-4 ${i?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsx("div",{className:`p-3 rounded-lg ${i?"bg-slate-800":"bg-slate-50"}`,children:t}),v.jsxs("div",{children:[v.jsx("div",{className:"text-2xl font-bold",children:e}),v.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider font-medium",children:s})]})]})}function qS({syncStatus:s,activeView:e,darkMode:t,fallbackMode:i,lastCloudUpdate:o,sessionStartTime:u,onManualSync:h}){const m=Bg(o),g=Bg(u);return v.jsxs("header",{className:`pt-[env(safe-area-inset-top)] border-b flex items-center justify-between px-6 shrink-0 z-30 sticky top-0 transition-all ${t?"bg-slate-950 border-slate-800":"bg-white border-slate-200"} h-auto min-h-[4rem]`,children:[v.jsxs("h2",{className:"font-bold text-lg capitalize flex items-center gap-2 py-3",children:[e==="control"?"Command Center":e==="generator"?"AI Generator":e,s==="syncing"&&v.jsx(kr,{size:14,className:"animate-spin text-indigo-500"}),s==="saved"&&v.jsx(af,{size:14,className:"text-emerald-500"}),s==="error"&&v.jsx(_S,{size:14,className:"text-rose-500"})]}),v.jsxs("div",{className:"flex items-center gap-3 text-right",children:[v.jsxs("div",{className:"flex flex-col text-xs space-y-0.5 hidden md:flex",children:[v.jsxs("span",{className:`font-bold ${t?"text-slate-300":"text-slate-700"}`,children:["Last Cloud Sync: ",m]}),v.jsxs("span",{className:`text-slate-500 ${i?"text-rose-500":""}`,children:["Session Started: ",g]})]}),v.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-slate-100 text-slate-400 hover:text-indigo-500 transition-colors",title:"Force Sync",children:v.jsx(n0,{size:16})}),v.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-mono border ${t?"border-slate-800 text-slate-400":"border-slate-200 text-slate-500 bg-slate-100"}`,children:[v.jsx(US,{size:14,className:i?"text-slate-400":"text-emerald-500"})," ",i?"Local":"Online"]})]})]})}function KS({onAdd:s,darkMode:e,notify:t}){const[i,o]=ie.useState(""),[u,h]=ie.useState(5),[m,g]=ie.useState("Resident"),[_,x]=ie.useState(!1),A=async()=>{if(!i.trim())return;x(!0);const M=`Create a JSON array of ${u} multiple choice questions about "${i}" for a ${m} level ICU practitioner based on Irwin & Rippe's Intensive Care Medicine (9th Ed). Output purely the JSON array. No markdown. No intro text. Format: [{"package": "AI: ${i}", "question": "...", "options": ["A", "B", "C", "D"], "correctIndex": 0, "explanation": "..."}]`;try{const D=await Qs(M,"tutor");s(D),o(""),t(`${u} Questions generated successfully!`,"success")}catch(D){t("Generation failed: "+D.message,"error")}finally{x(!1)}};return v.jsxs("div",{className:"p-8 max-w-3xl mx-auto animate-in fade-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-indigo-500/30",children:v.jsx(co,{className:"text-white w-8 h-8"})}),v.jsx("h1",{className:`text-4xl font-bold mb-4 ${e?"text-white":"text-slate-900"}`,children:"Magic Quiz Generator"}),v.jsx("p",{className:`text-lg max-w-lg mx-auto ${e?"text-slate-400":"text-slate-600"}`,children:"Enter any medical topic, and our AI will instantly create a high-yield board review package for you."})]}),v.jsx("div",{className:`p-6 rounded-3xl border ${e?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-xl shadow-slate-200/50"}`,children:v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:`block text-sm font-bold uppercase tracking-wider mb-2 ${e?"text-slate-400":"text-slate-500"}`,children:"Topic / Clinical Condition"}),v.jsx("input",{value:i,onChange:M=>o(M.target.value),placeholder:"e.g., Sepsis Bundle, Ventilator Waveforms, Hyponatremia",className:`w-full p-4 rounded-xl text-lg font-medium outline-none border-2 transition-all ${e?"bg-slate-950 border-slate-800 focus:border-indigo-500 text-white":"bg-slate-50 border-slate-200 focus:border-indigo-500 focus:bg-white text-slate-900"}`})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:`block text-sm font-bold uppercase tracking-wider mb-2 ${e?"text-slate-400":"text-slate-500"}`,children:"Difficulty"}),v.jsxs("select",{value:m,onChange:M=>g(M.target.value),className:`w-full p-4 rounded-xl outline-none border-2 appearance-none ${e?"bg-slate-950 border-slate-800 text-white":"bg-slate-50 border-slate-200 text-slate-900"}`,children:[v.jsx("option",{children:"Medical Student"}),v.jsx("option",{children:"Resident"}),v.jsx("option",{children:"Fellow"}),v.jsx("option",{children:"Attending"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:`block text-sm font-bold uppercase tracking-wider mb-2 ${e?"text-slate-400":"text-slate-500"}`,children:"Questions"}),v.jsxs("select",{value:u,onChange:M=>h(Number(M.target.value)),className:`w-full p-4 rounded-xl outline-none border-2 appearance-none ${e?"bg-slate-950 border-slate-800 text-white":"bg-slate-50 border-slate-200 text-slate-900"}`,children:[v.jsx("option",{value:3,children:"3 Questions"}),v.jsx("option",{value:5,children:"5 Questions"}),v.jsx("option",{value:10,children:"10 Questions"})]})]})]}),v.jsxs("button",{onClick:A,disabled:_||!i,className:"w-full py-5 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-95 flex items-center justify-center gap-3 text-lg",children:[_?v.jsx(kr,{className:"animate-spin"}):v.jsx(co,{}),_?"Generating Content...":"Generate Quiz Package"]})]})})]})}function GS({library:s,onCreate:e,darkMode:t,notify:i}){const[o,u]=ie.useState("all"),[h,m]=ie.useState(!1),[g,_]=ie.useState([]),[x,A]=ie.useState(""),[M,D]=ie.useState(null),[H,W]=ie.useState(!1),[$,oe]=ie.useState(!1),ye=ie.useRef(!1),le=ie.useRef(!0),ve=ie.useMemo(()=>[...new Set(s.map(ue=>ue.package))],[s]);ie.useEffect(()=>{_(ve)},[s]);const Le=ue=>{if(!$&&window.matchMedia("(hover: none)").matches)return;ye.current=!0;const Be=g.includes(ue);le.current=!Be,k(ue,le.current)},Te=ue=>{ye.current&&k(ue,le.current)},P=()=>{ye.current=!1},T=ue=>{k(ue,!g.includes(ue))},k=(ue,Be)=>{_(Ae=>Be&&!Ae.includes(ue)?[...Ae,ue]:!Be&&Ae.includes(ue)?Ae.filter(Ie=>Ie!==ue):Ae)};ie.useEffect(()=>(window.addEventListener("mouseup",P),()=>window.removeEventListener("mouseup",P)),[]);const R=()=>_(ve),N=()=>_([]),V=s.filter(ue=>g.includes(ue.package)?o==="wrong"?ue.globalState.status==="wrong":o==="flagged"?ue.globalState.flagged:o==="unanswered"?ue.globalState.status==="unanswered":!0:!1).length,I=async()=>{if(!x.trim()||H)return;W(!0);const ue=ve.map(Ie=>{const Z=s.filter(L=>L.package===Ie).length,he=s.filter(L=>L.package===Ie&&L.globalState.status!=="unanswered").length,se=s.filter(L=>L.package===Ie&&L.globalState.status==="correct").length,O=he>0?se/he*100:0;return{name:Ie,total:Z,answered:he,accuracy:O.toFixed(0)}}).filter(Ie=>Ie.total>0),Be=`
      USER GOAL: "${x}"
      AVAILABLE PACKAGES:
      ${ue.map(Ie=>`${Ie.name}: ${Ie.total} / ${Ie.answered} / ${Ie.accuracy}%`).join(`
`)}

      Generate a highly actionable study plan based on Irwin & Rippe (9th Ed.) structured into 3 prioritized steps. Suggest specific packages/modes. Output using Markdown.
    `,Ae=await Qs(Be,"tutor");D(Ae),W(!1)};return v.jsxs("div",{className:"p-8 max-w-5xl mx-auto animate-in fade-in slide-in-from-bottom-4",children:[v.jsx("div",{className:"flex justify-between items-end mb-8",children:v.jsxs("div",{children:[v.jsx("h1",{className:`text-3xl font-bold mb-2 ${t?"text-white":"text-slate-900"}`,children:"Command Center"}),v.jsx("p",{className:`${t?"text-slate-400":"text-slate-500"}`,children:"Auto-Sync Active. Ready to study."})]})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{className:`p-6 rounded-2xl border flex flex-col ${t?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-2 text-indigo-500 font-bold uppercase text-xs tracking-wider",children:[v.jsx(cf,{size:14})," Sources"]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("button",{onClick:()=>oe(!$),className:`p-1.5 rounded-lg text-xs font-bold transition-all ${$?"bg-indigo-600 text-white":"bg-slate-200 text-slate-500"}`,title:"Toggle Selection Mode (Fixes Scroll)",children:[v.jsx(e0,{size:14})," ",$?"Paint ON":"Paint OFF"]}),v.jsxs("div",{className:"flex gap-2 text-xs font-bold",children:[v.jsx("button",{onClick:R,className:"hover:text-indigo-500",children:"All"}),v.jsx("span",{className:"text-slate-300",children:"|"}),v.jsx("button",{onClick:N,className:"hover:text-indigo-500",children:"None"})]})]})]}),v.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar select-none flex-1 touch-pan-y",style:{touchAction:$?"none":"auto"},children:[ve.map(ue=>v.jsxs("div",{onMouseDown:()=>Le(ue),onMouseEnter:()=>Te(ue),onClick:()=>T(ue),onTouchStart:()=>Le(ue),onTouchMove:Be=>{if($&&ye.current){const Ae=Be.touches[0],Z=document.elementFromPoint(Ae.clientX,Ae.clientY)?.closest("[data-pkg]");Z&&k(Z.dataset.pkg,le.current)}},"data-pkg":ue,className:`w-full flex items-center justify-between p-3 rounded-xl border text-left transition-all cursor-pointer ${g.includes(ue)?"border-indigo-500 bg-indigo-50 text-indigo-900":t?"border-slate-700 text-slate-400 hover:bg-slate-800":"border-slate-100 text-slate-600 hover:bg-slate-50"}`,children:[v.jsx("span",{className:"text-sm font-medium truncate pr-2",children:ue}),g.includes(ue)&&v.jsx(af,{size:16,className:"text-indigo-600 shrink-0"})]},ue)),ve.length===0&&v.jsx("div",{className:"text-center text-slate-400 text-sm py-8",children:"Library empty. Import data or use AI Gen."})]}),v.jsx("div",{className:"text-xs text-center text-slate-400 mt-2",children:$?"Slide finger to select multiple":"Click to select or Toggle Paint Mode"})]}),v.jsxs("div",{className:`p-6 rounded-2xl border ${t?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4 text-rose-500 font-bold uppercase text-xs tracking-wider",children:[v.jsx(TS,{size:14})," Mode"]}),v.jsx("div",{className:"space-y-2",children:[{id:"all",l:"All Questions",i:v.jsx(uf,{size:16})},{id:"unanswered",l:"Unanswered Only",i:v.jsx(Yv,{size:16})},{id:"wrong",l:"Mistakes Only",i:v.jsx(ec,{size:16})},{id:"flagged",l:"Flagged Only",i:v.jsx(tc,{size:16})}].map(ue=>v.jsxs("button",{onClick:()=>u(ue.id),className:`w-full flex items-center gap-3 p-3 rounded-xl text-sm font-medium transition-all ${o===ue.id?"bg-slate-800 text-white":t?"hover:bg-slate-800 text-slate-400":"hover:bg-slate-100 text-slate-600"}`,children:[ue.i," ",ue.l]},ue.id))}),v.jsx("div",{className:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-800",children:v.jsxs("button",{onClick:()=>m(!h),className:`w-full flex items-center justify-between p-3 rounded-xl text-sm font-medium ${h?"bg-emerald-50 text-emerald-700 border border-emerald-200":t?"bg-slate-800 text-slate-400":"bg-slate-50 text-slate-500"}`,children:[v.jsxs("span",{className:"flex items-center gap-2",children:[v.jsx(OS,{size:16})," Shuffle Deck"]}),v.jsx("div",{className:`w-4 h-4 rounded-full border ${h?"bg-emerald-500 border-emerald-500":"border-slate-400"}`})]})})]}),v.jsxs("div",{className:`p-6 rounded-2xl border flex flex-col justify-between ${t?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-4 text-emerald-500 font-bold uppercase text-xs tracking-wider",children:[v.jsx(bS,{size:14})," Launch"]}),v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:`text-5xl font-bold mb-2 ${t?"text-white":"text-slate-900"}`,children:V}),v.jsx("div",{className:"text-sm text-slate-500",children:"Questions Selected"})]})]}),v.jsx("button",{onClick:()=>{e({mode:o,shuffle:h,packages:g}),i(`Session started with ${V} questions.`,"success")},disabled:V===0,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-95 disabled:opacity-50",children:"Start Session"})]})]}),v.jsxs("div",{className:`mt-6 p-6 rounded-2xl border ${t?"bg-slate-900 border-slate-700":"bg-white border-slate-200 shadow-lg"}`,children:[v.jsxs("h2",{className:`text-xl font-bold mb-3 flex items-center gap-2 ${t?"text-white":"text-slate-800"}`,children:[v.jsx(of,{className:"text-teal-500"})," AI Study Plan Generator"]}),v.jsx("input",{type:"text",value:x,onChange:ue=>A(ue.target.value),placeholder:"e.g., Master all CVC/Arterial line topics before my next shift.",className:`w-full p-3 rounded-lg border-2 mb-3 outline-none ${t?"bg-slate-950 border-slate-800 text-white":"bg-slate-50 border-slate-200 text-slate-900"}`}),v.jsxs("button",{onClick:I,disabled:H||!x.trim()||ve.length===0,className:"px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-bold transition-all disabled:opacity-50 flex items-center gap-2 text-sm",children:[H?v.jsx(kr,{className:"animate-spin",size:16}):v.jsx(co,{size:16}),H?"Generating Plan...":"Generate Plan"]}),M&&v.jsxs("div",{className:`mt-4 p-4 rounded-xl text-sm ${t?"bg-slate-800 text-slate-300":"bg-slate-50 text-slate-700"}`,children:[v.jsx("h3",{className:"font-bold text-teal-500 mb-2",children:"Recommended Study Strategy:"}),v.jsx("div",{className:"prose dark:prose-invert",dangerouslySetInnerHTML:{__html:M}})]})]})]})}function QS({sessions:s,onResume:e,onDelete:t,activeId:i,darkMode:o,notify:u}){return v.jsxs("div",{className:"p-8 max-w-5xl mx-auto",children:[v.jsx("h1",{className:`text-3xl font-bold mb-6 ${o?"text-white":"text-slate-900"}`,children:"Session Manager"}),v.jsxs("div",{className:"grid gap-4",children:[s.map(h=>{const m=h.questions.length,g=h.questions.filter(D=>D.sessionState.status!=="unanswered").length,_=h.questions.filter(D=>D.sessionState.status==="wrong").length,x=h.questions.filter(D=>D.globalState.flagged).length,A=Math.round(g/Math.max(1,m)*100),M=h.id===i;return v.jsxs("div",{className:`p-6 rounded-2xl border flex items-center justify-between transition-all ${M?"border-indigo-500 ring-1 ring-indigo-500 bg-indigo-50/10":o?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("div",{className:`w-16 h-16 rounded-xl flex flex-col items-center justify-center border ${o?"bg-slate-700 bg-slate-800":"bg-slate-200 bg-slate-50"}`,children:v.jsxs("span",{className:`text-xl font-bold ${o?"text-white":"text-slate-700"}`,children:[A,"%"]})}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[v.jsx("h3",{className:`font-bold text-lg ${o?"text-white":"text-slate-800"}`,children:h.name}),M&&v.jsx("span",{className:"bg-indigo-100 text-indigo-700 text-[10px] font-bold px-2 py-0.5 rounded-full uppercase",children:"Active"})]}),v.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(gS,{size:12})," ",new Date(h.createdAt).toLocaleDateString()]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(uf,{size:12})," ",m," Qs"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(ec,{size:12})," ",_," Wrong"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(tc,{size:12})," ",x," Flagged"]})]}),v.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Filters: ",h.config?.mode]})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>{t(h.id),u("Session deleted.","success")},className:"p-3 rounded-xl text-slate-400 hover:bg-rose-50 hover:text-rose-600 transition-colors",children:v.jsx(dd,{size:20})}),v.jsxs("button",{onClick:()=>e(h.id),className:"px-6 py-3 rounded-xl bg-slate-900 text-white font-bold hover:bg-slate-800 transition-all flex items-center gap-2 shadow-lg",children:[M?"Continue":"Resume"," ",v.jsx(fS,{size:18})]})]})]},h.id)}),s.length===0&&v.jsx("div",{className:"text-center py-20 text-slate-400",children:"No active sessions. Start one in Command Center."})]})]})}function JS({session:s,onNavigate:e,darkMode:t}){const{questions:i,currentIndex:o}=s;return v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsx("div",{className:`p-4 border-b ${t?"border-slate-800":"bg-slate-200 bg-slate-50"}`,children:v.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider opacity-50",children:"Session Map"})}),v.jsx("div",{className:"flex-1 overflow-y-auto p-3 custom-scrollbar",children:v.jsx("div",{className:"grid grid-cols-5 gap-2",children:i.map((u,h)=>{let m=t?"bg-slate-800 text-slate-500":"bg-slate-100 text-slate-400";u.sessionState.status==="correct"&&(m="bg-emerald-500 text-white"),u.sessionState.status==="wrong"&&(m="bg-rose-500 text-white");const g=h===o;return v.jsxs("button",{onClick:()=>e(h),className:`h-8 rounded-md text-xs font-bold relative ${m} ${g?"ring-2 ring-indigo-500 ring-offset-1":""}`,children:[h+1,u.globalState?.flagged&&v.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-amber-500 rounded-full border border-white"})]},u.id)})})})]})}function YS({session:s,onUpdate:e,onNavigate:t,darkMode:i}){const{questions:o,currentIndex:u}=s,h=o[u];return v.jsxs("div",{className:"max-w-3xl mx-auto p-6 pb-32",children:[v.jsxs("div",{className:"mb-6 flex items-center gap-2 text-xs font-bold uppercase tracking-wider opacity-50",children:[v.jsx("span",{children:h.package||"General"}),v.jsx(lf,{size:12}),v.jsxs("span",{children:["Question ",u+1," of ",o.length]})]}),v.jsx(XS,{data:h,sessionId:s.id,onUpdate:e,darkMode:i,total:o.length,index:u,onNext:()=>t(Math.min(o.length-1,u+1)),onPrev:()=>t(Math.max(0,u-1))},h.id)]})}function XS({data:s,sessionId:e,onUpdate:t,darkMode:i,total:o,index:u,onNext:h,onPrev:m}){const[g,_]=ie.useState(s.sessionState.selectedIndex),[x,A]=ie.useState(s.sessionState.status!=="unanswered"),[M,D]=ie.useState(s.sessionState.notes||""),[H,W]=ie.useState(!1),[$,oe]=ie.useState(!1),[ye,le]=ie.useState(null),[ve,Le]=ie.useState(!1),[Te,P]=ie.useState(null),[T,k]=ie.useState(!1),[R,N]=ie.useState([]),[V,I]=ie.useState(""),[ue,Be]=ie.useState(!1),[Ae,Ie]=ie.useState(null),[Z,he]=ie.useState(!1),[se,O]=ie.useState(!1);ie.useEffect(()=>{_(s.sessionState.selectedIndex),A(s.sessionState.status!=="unanswered"),D(s.sessionState.notes||""),le(null),P(null),N([]),k(!1),Ie(null),window.speechSynthesis.cancel(),O(!1),oe(!1)},[s.id]);const L=K=>{if(x)return;const ne=K===s.correctIndex;_(K),A(!0),t(e,s.id,{status:ne?"correct":"wrong",selectedIndex:K,notes:M})},ee=()=>t(e,s.id,{notes:M}),Se=()=>t(e,s.id,{flagged:!s.globalState?.flagged}),fe=async K=>{Le(!0),P(K),le(null);let ne="";K==="explain"&&(ne=`Explain strictly for a medical professional based on Irwin & Rippe's ICU Medicine: "${s.question}". Why is ${s.options[s.correctIndex]} correct? Be concise.`),K==="pearl"&&(ne=`Give me one high-yield clinical pearl related to this topic from Irwin & Rippe's ICU Medicine: "${s.question}".`),K==="mnemonic"&&(ne=`Create a short text-based memory aid or mnemonic to remember the answer to: "${s.question}" which is "${s.options[s.correctIndex]}".`);const Ne=await Qs(ne,"tutor");le(Ne),Le(!1)},Pe=async()=>{if(!Ae){he(!0);try{const K=`Create a surreal, vivid visual mnemonic description to help a student remember that the answer to "${s.question}" is "${s.options[s.correctIndex]}". Describe the scene in 2 sentences max.`,ne=await Qs(K,"mnemonic"),Ne=await $S(ne);Ie(Ne)}catch{alert("Failed to generate mnemonic image. Try again.")}finally{he(!1)}}},Me=()=>{if(se)window.speechSynthesis.cancel(),O(!1);else{const K=`${s.question}. Option A: ${s.options[0]}. Option B: ${s.options[1]}. Option C: ${s.options[2]}. Option D: ${s.options[3]}.`,ne=new SpeechSynthesisUtterance(K);ne.onend=()=>O(!1),window.speechSynthesis.speak(ne),O(!0)}},Y=async K=>{if(K.preventDefault(),!V.trim())return;const ne={role:"user",text:V};N(tt=>[...tt,ne]),I(""),Be(!0);const Ne=`
        CURRENT QUESTION: ${s.question}
        CORRECT ANSWER: ${s.options[s.correctIndex]}
        EXPLANATION: ${s.explanation}
        
        USER QUESTION: ${ne.text}
      `;try{const tt=await Qs(Ne,"chat");N(Ce=>[...Ce,{role:"ai",text:tt}])}catch{N(Ce=>[...Ce,{role:"ai",text:"Error connecting to Professor Irwin."}])}finally{Be(!1)}};return v.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("div",{className:"flex justify-between items-start mb-6",children:[v.jsx("h2",{className:"text-xl md:text-2xl font-serif font-medium leading-relaxed flex-1 mr-4",children:s.question}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>W(!H),className:`transition-all p-2 rounded-full hover:bg-slate-100 ${H?"text-indigo-600 bg-indigo-50":"text-slate-300"}`,title:"Flashcard Mode",children:H?v.jsx(ES,{size:20}):v.jsx(jg,{size:20})}),v.jsx("button",{onClick:Me,className:`transition-all p-2 rounded-full hover:bg-slate-100 ${se?"text-indigo-600 bg-indigo-50 animate-pulse":"text-slate-300"}`,children:se?v.jsx(jS,{size:20}):v.jsx(FS,{size:20})}),v.jsx("button",{onClick:Se,className:`transition-all active:scale-90 ${s.globalState?.flagged?"text-amber-500 fill-amber-500":"text-slate-300 hover:text-slate-400"}`,children:v.jsx(tc,{})})]})]}),v.jsx("div",{className:`p-8 rounded-2xl border mb-6 ${i?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:v.jsx("div",{className:"space-y-3",children:H&&!$&&!x?v.jsxs("div",{onClick:()=>oe(!0),className:"h-40 flex flex-col items-center justify-center cursor-pointer opacity-50 hover:opacity-100 transition-opacity",children:[v.jsx(jg,{size:48,className:"mb-2"}),v.jsx("p",{className:"font-bold text-sm",children:"Tap to Reveal Options"})]}):s.options.map((K,ne)=>{const Ne=g===ne,tt=ne===s.correctIndex;let Ce="w-full p-4 rounded-xl border-2 text-left transition-all flex items-center gap-3 ";return x?tt?Ce+="border-emerald-500 bg-emerald-500/10 text-emerald-600":Ne?Ce+="border-rose-500 bg-rose-500/10 text-rose-600":Ce+="opacity-50 border-transparent":Ce+=i?"border-slate-800 hover:bg-slate-800":"border-slate-100 hover:border-indigo-200 hover:bg-indigo-50",v.jsxs("button",{onClick:()=>L(ne),disabled:x,className:Ce,children:[v.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center text-xs font-bold ${x?tt?"bg-emerald-500 border-emerald-500 text-white":Ne?"bg-rose-500 border-rose-500 text-white":"border-slate-300":"border-slate-300"}`,children:String.fromCharCode(65+ne)}),v.jsx("span",{children:K})]},ne)})})}),v.jsxs("div",{className:"flex justify-between items-center py-4 mb-6",children:[v.jsxs("button",{onClick:m,disabled:u===0,className:"flex items-center gap-2 font-bold opacity-50 hover:opacity-100 disabled:opacity-20",children:[v.jsx(Xv,{})," Prev"]}),v.jsxs("button",{onClick:h,disabled:u===o-1,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all active:scale-95 flex items-center gap-2",children:["Next Question ",v.jsx(lf,{})]})]}),x&&v.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-8 border-t pt-8 dark:border-slate-800",children:[v.jsxs("div",{className:`p-8 rounded-2xl border ${i?"bg-indigo-900/10 border-slate-800":"bg-indigo-50/50 border-indigo-100"}`,children:[v.jsxs("h3",{className:"text-xs font-bold uppercase text-indigo-500 mb-2 flex items-center gap-2",children:[v.jsx(Zv,{size:14})," Explanation"]}),v.jsx("p",{className:"leading-relaxed opacity-90 mb-6 whitespace-pre-line",children:s.explanation}),v.jsxs("div",{className:"flex flex-wrap gap-2 border-t pt-4 dark:border-slate-700",children:[v.jsxs("button",{onClick:()=>fe("explain"),className:`text-xs px-3 py-2 rounded-lg flex items-center gap-2 font-bold transition-colors ${Te==="explain"?"bg-indigo-600 text-white":"bg-white border text-indigo-600 hover:bg-indigo-50"}`,children:[ve&&Te==="explain"?v.jsx(kr,{className:"animate-spin",size:14}):v.jsx(of,{size:14})," Explain"]}),v.jsxs("button",{onClick:()=>fe("pearl"),className:`text-xs px-3 py-2 rounded-lg flex items-center gap-2 font-bold transition-colors ${Te==="pearl"?"bg-indigo-600 text-white":"bg-white border text-indigo-600 hover:bg-indigo-50"}`,children:[ve&&Te==="pearl"?v.jsx(kr,{className:"animate-spin",size:14}):v.jsx(vS,{size:14})," Pearl"]}),v.jsxs("button",{onClick:Pe,disabled:Z,className:`text-xs px-3 py-2 rounded-lg flex items-center gap-2 font-bold transition-colors ${Ae?"bg-purple-600 text-white":"bg-white border text-purple-600 hover:bg-purple-50"}`,children:[Z?v.jsx(kr,{className:"animate-spin",size:14}):v.jsx(kS,{size:14})," ",Ae?"Mnemonic Ready":"Visual Mnemonic "]}),v.jsxs("button",{onClick:()=>k(!T),className:`text-xs px-3 py-2 rounded-lg flex items-center gap-2 font-bold transition-colors ${T?"bg-teal-600 text-white":"bg-white border text-teal-600 hover:bg-teal-50"}`,children:[v.jsx(AS,{size:14})," Ask Professor Irwin"]})]}),ye&&v.jsxs("div",{className:"mt-4 bg-white p-4 rounded-xl border text-sm prose dark:prose-invert prose-sm animate-in fade-in shadow-sm",children:[v.jsx("div",{className:"font-bold text-xs text-slate-400 uppercase mb-1",children:"Smart Tutor"}),ye]}),Ae&&v.jsxs("div",{className:"mt-4 bg-purple-50 p-4 rounded-xl border border-purple-100 animate-in fade-in shadow-sm",children:[v.jsxs("div",{className:"font-bold text-xs text-purple-600 uppercase mb-2 flex items-center gap-2",children:[v.jsx(co,{size:12})," AI Visual Mnemonic"]}),v.jsx("img",{src:Ae,alt:"AI Mnemonic",className:"rounded-lg w-full h-auto max-h-80 object-contain bg-white shadow-sm border"}),v.jsx("p",{className:"text-[10px] text-purple-400 mt-2 text-center",children:"Generated by Imagen 3"})]}),T&&v.jsxs("div",{className:"mt-4 bg-teal-50/50 rounded-xl border border-teal-100 overflow-hidden animate-in slide-in-from-top-2",children:[v.jsxs("div",{className:"bg-teal-100/50 p-2 text-xs font-bold text-teal-800 uppercase px-4 flex justify-between items-center",children:[v.jsx("span",{children:"Chatting with Prof. Irwin"}),v.jsx("button",{onClick:()=>k(!1),children:v.jsx(s0,{size:14})})]}),v.jsxs("div",{className:"p-4 h-60 overflow-y-auto custom-scrollbar flex flex-col gap-3",children:[R.length===0&&v.jsx("div",{className:"text-center text-teal-400 text-sm py-10 italic",children:"Ask a specific question about this case..."}),R.map((K,ne)=>v.jsx("div",{className:`flex ${K.role==="user"?"justify-end":"justify-start"}`,children:v.jsx("div",{className:`max-w-[80%] p-3 rounded-xl text-sm ${K.role==="user"?"bg-teal-600 text-white rounded-br-none":"bg-white border shadow-sm rounded-bl-none"}`,children:K.text})},ne)),ue&&v.jsx("div",{className:"text-xs text-teal-500 animate-pulse",children:"Professor is typing..."})]}),v.jsxs("form",{onSubmit:Y,className:"p-2 border-t bg-white flex gap-2",children:[v.jsx("input",{value:V,onChange:K=>I(K.target.value),placeholder:"Type your question...",className:"flex-1 text-sm p-2 outline-none"}),v.jsx("button",{type:"submit",disabled:!V||ue,className:"p-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50",children:v.jsx(DS,{size:16})})]})]})]}),v.jsxs("div",{className:`p-6 rounded-2xl border ${i?"bg-amber-900/10 border-slate-800":"bg-amber-50 border-amber-100"}`,children:[v.jsxs("h3",{className:"text-xs font-bold uppercase text-amber-600 mb-2 flex items-center gap-2",children:[v.jsx(LS,{size:14})," My Notes"]}),v.jsx("textarea",{className:`w-full p-3 rounded-lg text-sm bg-transparent border focus:ring-2 focus:ring-amber-400 outline-none ${i?"border-slate-700":"border-amber-200"}`,rows:2,placeholder:"Add clinical note...",value:M,onChange:K=>D(K.target.value),onBlur:ee})]})]})]})}function ZS({library:s,darkMode:e}){const[t,i]=ie.useState(null),[o,u]=ie.useState(!1),h=s.length,m=s.filter(D=>D.globalState.status!=="unanswered").length,g=s.filter(D=>D.globalState.status==="correct").length;s.filter(D=>D.globalState.status==="wrong").length;const _=s.filter(D=>D.globalState.flagged).length,x=m>0?Math.round(g/m*100):0,A=ie.useMemo(()=>{const D={};return s.forEach(H=>{H.globalState.status!=="unanswered"&&(D[H.package]||(D[H.package]={total:0,correct:0,timesWrong:0}),D[H.package].total++,H.globalState.status==="correct"?D[H.package].correct++:D[H.package].timesWrong++)}),Object.entries(D).map(([H,W])=>({name:H,total:W.total,timesWrong:W.timesWrong,accuracy:W.total>0?Math.round(W.correct/W.total*100):0})).sort((H,W)=>H.accuracy-W.accuracy).filter(H=>H.total>0&&H.total>=3)},[s]),M=async()=>{if(o)return;if(A.length===0){i("Start studying first! We need at least three answered questions in three different packages to perform a meaningful analysis.");return}u(!0);const H=`
      Analyze the following user performance data:
      
      --- USER WEAKNESS DATA ---
      ${A.slice(0,3).map($=>`Topic: ${$.name}, Accuracy: ${$.accuracy}%, Total Attempts: ${$.total}`).join(`
`)}
      --- END DATA ---

      Based on this data, provide a single, high-yield conceptual weakness for the user to focus on next. Frame your answer as a concise, single paragraph response. Do not use bullet points or lists. Identify the specific knowledge gap (e.g., 'Hemodynamic Management Principles' or 'Pathophysiology of CIM vs CIP') rather than just naming the weakest chapter.
    `,W=await Qs(H,"tutor");i(W),u(!1)};return v.jsxs("div",{className:"p-8 max-w-5xl mx-auto animate-in fade-in",children:[v.jsx("h1",{className:`text-3xl font-bold mb-6 ${e?"text-white":"text-slate-900"}`,children:"Performance Stats"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[v.jsx(du,{label:"Total Questions",value:h,icon:v.jsx(cf,{className:"text-indigo-500"}),darkMode:e}),v.jsx(du,{label:"Questions Answered",value:m,icon:v.jsx(Yv,{className:"text-blue-500"}),darkMode:e}),v.jsx(du,{label:"Overall Accuracy",value:`${x}%`,icon:v.jsx(NS,{className:x>=70?"text-emerald-500":"text-amber-500"}),darkMode:e}),v.jsx(du,{label:"Flagged Items",value:_,icon:v.jsx(tc,{className:"text-red-500"}),darkMode:e})]}),v.jsxs("div",{className:`p-6 rounded-2xl border mb-8 ${e?"bg-slate-900 border-slate-700":"bg-white border-slate-200 shadow-lg"}`,children:[v.jsxs("h2",{className:`text-xl font-bold mb-4 flex items-center gap-2 ${e?"text-white":"text-slate-800"}`,children:[v.jsx(of,{className:"text-indigo-500"})," AI Weakness Analyzer"]}),v.jsxs("button",{onClick:M,disabled:o||A.length<1,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold transition-all disabled:opacity-50 flex items-center gap-2",children:[o?v.jsx(kr,{className:"animate-spin",size:16}):v.jsx(co,{size:16}),o?"Analyzing Data...":"Generate Study Focus"]}),(t||!m)&&v.jsx("div",{className:`mt-4 p-4 rounded-xl text-sm ${e?"bg-slate-800 text-slate-300":"bg-slate-50 text-slate-700"}`,children:t?v.jsx("p",{children:t}):v.jsx("p",{children:"Answer a few questions in different chapters to generate your personalized study recommendation!"})})]}),v.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-slate-900 border-slate-800":"bg-white border-slate-200"}`,children:[v.jsx("h2",{className:`text-lg font-bold mb-4 ${e?"text-white":"text-slate-800"}`,children:"Chapter Breakdown"}),v.jsxs("div",{className:"space-y-4",children:[A.map(D=>v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[v.jsx("span",{className:e?"text-slate-300":"text-slate-700",children:D.name}),v.jsxs("span",{className:e?"text-slate-400":"text-slate-500",children:[D.accuracy,"% (",D.total," Qs)"]})]}),v.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden dark:bg-slate-800",children:v.jsx("div",{className:`h-full rounded-full ${D.accuracy>=70?"bg-emerald-500":D.accuracy>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${D.accuracy}%`}})})]},D.name)),A.length===0&&v.jsx("p",{className:"text-slate-400 italic",children:"No data available yet."})]})]})]})}function ek({library:s,darkMode:e,onUpdate:t}){const[i,o]=ie.useState(""),[u,h]=ie.useState(new Set),[m,g]=ie.useState(null),[_,x]=ie.useState({}),[A,M]=ie.useState(!1),[D,H]=ie.useState([]),[W,$]=ie.useState("All"),[oe,ye]=ie.useState("All"),[le,ve]=ie.useState(1),[Le,Te]=ie.useState(20),P=ie.useRef(!1),T=ie.useRef(!0),k=ie.useMemo(()=>[...new Set(s.map(L=>L.package))],[s]),R=ie.useMemo(()=>{let L=s;if(i){const ee=i.toLowerCase();L=L.filter(Se=>Se.question.toLowerCase().includes(ee))}return D.length>0&&(L=L.filter(ee=>D.includes(ee.package))),W!=="All"&&(W==="Correct"&&(L=L.filter(ee=>ee.globalState.status==="correct")),W==="Wrong"&&(L=L.filter(ee=>ee.globalState.status==="wrong")),W==="Unanswered"&&(L=L.filter(ee=>ee.globalState.status==="unanswered"))),oe!=="All"&&(L=L.filter(ee=>ee.globalState.flagged===(oe==="Flagged"))),L},[s,i,D,W,oe]),N=Math.ceil(R.length/Le),V=R.slice((le-1)*Le,le*Le);ie.useEffect(()=>ve(1),[i,D,W,oe]);const I=L=>{if(!A&&window.matchMedia("(hover: none)").matches)return;P.current=!0;const ee=u.has(L);T.current=!ee,Ae(L,T.current)},ue=L=>{P.current&&Ae(L,T.current)},Be=()=>P.current=!1,Ae=(L,ee)=>{h(Se=>{const fe=new Set(Se);return ee?fe.add(L):fe.delete(L),fe})},Ie=(L,ee)=>{ee.stopPropagation(),Ae(L,!u.has(L))};ie.useEffect(()=>(window.addEventListener("mouseup",Be),()=>window.removeEventListener("mouseup",Be)),[]);const Z=()=>h(new Set),he=()=>{if(confirm(`Delete ${u.size} questions?`)){const L=s.filter(ee=>!u.has(ee.id));t(L),h(new Set)}},se=L=>{g(L.id),x({...L})},O=()=>{const L=s.map(ee=>ee.id===m?_:ee);t(L),g(null)};return v.jsxs("div",{className:"p-6 md:p-8 max-w-7xl mx-auto h-full flex flex-col overflow-hidden relative",children:[v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[v.jsxs("div",{children:[v.jsx("h2",{className:`text-2xl font-bold ${e?"text-white":"text-slate-900"}`,children:"Question Library"}),v.jsxs("p",{className:"text-xs opacity-50",children:[s.length," Total Questions  ",R.length," Shown"]})]}),v.jsxs("div",{className:"flex gap-2 flex-wrap",children:[v.jsxs("button",{onClick:()=>M(!A),className:`px-3 py-2 rounded-lg font-bold text-xs flex items-center gap-2 transition-all ${A?"bg-indigo-600 text-white":"bg-slate-200 text-slate-600"}`,children:[v.jsx(e0,{size:16})," ",A?"Painting ON":"Paint Select"]}),u.size>0&&v.jsxs("button",{onClick:he,className:"px-3 py-2 bg-rose-600 text-white rounded-lg font-bold text-xs flex items-center gap-2 hover:bg-rose-700",children:[v.jsx(dd,{size:16})," Delete (",u.size,")"]})]})]}),v.jsxs("div",{className:`p-4 rounded-xl mb-4 border flex flex-col md:flex-row gap-4 items-center ${e?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("div",{className:"relative flex-1 w-full",children:[v.jsx(r0,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),v.jsx("input",{className:`w-full pl-9 p-2 rounded-lg border text-sm ${e?"bg-slate-950 border-slate-700 text-white":"bg-slate-50 border-slate-200"}`,placeholder:"Search...",value:i,onChange:L=>o(L.target.value)})]}),v.jsx(HS,{options:k,selected:D,onChange:H,placeholder:"All Chapters",darkMode:e}),v.jsxs("select",{value:W,onChange:L=>$(L.target.value),className:`p-2 rounded-lg border text-sm w-full md:w-auto ${e?"bg-slate-950 border-slate-700 text-white":"bg-white border-slate-200"}`,children:[v.jsx("option",{value:"All",children:"All Status"}),v.jsx("option",{value:"Correct",children:"Correct"}),v.jsx("option",{value:"Wrong",children:"Wrong"}),v.jsx("option",{value:"Unanswered",children:"Unanswered"})]}),v.jsxs("select",{value:oe,onChange:L=>ye(L.target.value),className:`p-2 rounded-lg border text-sm w-full md:w-auto ${e?"bg-slate-950 border-slate-700 text-white":"bg-white border-slate-200"}`,children:[v.jsx("option",{value:"All",children:"Any Flag"}),v.jsx("option",{value:"Flagged",children:"Flagged Only"}),v.jsx("option",{value:"Unflagged",children:"No Flag"})]})]}),v.jsxs("div",{className:`flex-1 overflow-hidden rounded-xl border flex flex-col ${e?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("div",{className:`grid grid-cols-12 gap-4 p-3 border-b text-xs font-bold uppercase tracking-wider sticky top-0 z-10 ${e?"bg-slate-950 border-slate-800 text-slate-400":"bg-slate-50 border-slate-200 text-slate-500"}`,children:[v.jsx("div",{className:"col-span-1 text-center",children:"Sel"}),v.jsx("div",{className:"col-span-1 text-center",children:"#"}),v.jsx("div",{className:"col-span-1 text-center",children:"Stat"}),v.jsx("div",{className:"col-span-2",children:"Chapter"}),v.jsx("div",{className:"col-span-6",children:"Question"}),v.jsx("div",{className:"col-span-1 text-right",children:"Edit"})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar touch-pan-y pb-20",style:{touchAction:A?"none":"auto"},children:[V.map((L,ee)=>{const Se=(le-1)*Le+ee+1;return v.jsx("div",{onMouseDown:()=>I(L.id),onMouseEnter:()=>ue(L.id),onTouchStart:()=>I(L.id),onTouchMove:fe=>{if(A&&P.current){const Pe=fe.touches[0],Y=document.elementFromPoint(Pe.clientX,Pe.clientY)?.closest("[data-qid]");Y&&Ae(Y.dataset.qid,T.current)}},"data-qid":L.id,className:`grid grid-cols-12 gap-4 p-3 border-b items-start text-sm transition-colors cursor-pointer animate-in fade-in duration-300 ${u.has(L.id)?"bg-indigo-500/20 border-indigo-500":e?"border-slate-800 hover:bg-slate-800":"border-slate-100 hover:bg-slate-50"}`,children:m===L.id?v.jsx("div",{className:"col-span-12",onClick:fe=>fe.stopPropagation(),children:v.jsxs("div",{className:"space-y-4 bg-white dark:bg-slate-900 p-4 rounded-xl border shadow-lg",children:[v.jsx("h4",{className:"font-bold text-indigo-500 uppercase text-xs",children:"Editing Question"}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold opacity-50 block mb-1",children:"Question Text"}),v.jsx("textarea",{className:"w-full p-2 border rounded text-sm h-20",value:_.question,onChange:fe=>x({..._,question:fe.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold opacity-50 block mb-1",children:"Package / Chapter"}),v.jsx("input",{className:"w-full p-2 border rounded text-sm",value:_.package,onChange:fe=>x({..._,package:fe.target.value})})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.options.map((fe,Pe)=>v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"radio",name:"correct_edit",checked:_.correctIndex===Pe,onChange:()=>x({..._,correctIndex:Pe}),className:"w-4 h-4 text-emerald-600"}),v.jsx("input",{className:"flex-1 p-2 border rounded text-sm",value:fe,onChange:Me=>{const Y=[..._.options];Y[Pe]=Me.target.value,x({..._,options:Y})}})]},Pe))}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold opacity-50 block mb-1",children:"Explanation"}),v.jsx("textarea",{className:"w-full p-2 border rounded text-sm h-24",value:_.explanation,onChange:fe=>x({..._,explanation:fe.target.value})})]}),v.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[v.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 text-sm bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 font-bold",children:"Cancel"}),v.jsxs("button",{onClick:O,className:"px-4 py-2 text-sm bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-bold flex items-center gap-2",children:[v.jsx(Fu,{size:16})," Save Changes"]})]})]})}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"col-span-1 text-center flex justify-center pt-1",children:v.jsx("div",{onClick:fe=>Ie(L.id,fe),className:`w-5 h-5 rounded border flex items-center justify-center transition-all ${u.has(L.id)?"bg-indigo-600 border-indigo-600":"border-slate-300 bg-white dark:bg-transparent"}`,children:u.has(L.id)&&v.jsx(Fu,{size:12,className:"text-white"})})}),v.jsx("div",{className:"col-span-1 text-center opacity-50 font-mono text-xs pt-1.5",children:Se}),v.jsxs("div",{className:"col-span-1 text-center flex justify-center pt-1",children:[L.globalState.status==="correct"&&v.jsx("span",{className:"bg-emerald-100 text-emerald-700 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"OK"}),L.globalState.status==="wrong"&&v.jsx("span",{className:"bg-rose-100 text-rose-700 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"ERR"}),L.globalState.status==="unanswered"&&v.jsx("span",{className:"bg-slate-100 text-slate-500 text-[10px] font-bold px-2 py-0.5 rounded-full",children:"-"})]}),v.jsx("div",{className:"col-span-2 text-xs opacity-70 font-medium pt-1.5 break-words",children:L.package}),v.jsx("div",{className:"col-span-6 font-medium pr-4 pt-1.5",children:L.question}),v.jsx("div",{className:"col-span-1 text-right pt-1",children:v.jsx("button",{onClick:fe=>{fe.stopPropagation(),se(L)},className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-indigo-500 transition-colors",children:v.jsx(VS,{size:16})})})]})},L.id)}),V.length===0&&v.jsx("div",{className:"p-8 text-center opacity-50",children:"No questions found."})]}),u.size>0&&v.jsxs("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-4 animate-in slide-in-from-bottom-10 z-50",children:[v.jsxs("span",{className:"font-bold text-sm",children:[u.size," Selected"]}),v.jsx("div",{className:"h-4 w-px bg-slate-700"}),v.jsx("button",{onClick:Z,className:"text-xs font-bold hover:text-slate-300",children:"Unselect All"}),v.jsxs("button",{onClick:he,className:"text-xs font-bold text-rose-400 hover:text-rose-300 flex items-center gap-1",children:[v.jsx(dd,{size:14})," Delete"]})]}),v.jsxs("div",{className:`p-3 border-t flex justify-between items-center text-xs ${e?"bg-slate-950 border-slate-800":"bg-slate-50 border-slate-200"}`,children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{children:"Rows:"}),v.jsxs("select",{value:Le,onChange:L=>Te(Number(L.target.value)),className:`p-1 rounded border ${e?"bg-slate-900 border-slate-700":"bg-white"}`,children:[v.jsx("option",{value:10,children:"10"}),v.jsx("option",{value:20,children:"20"}),v.jsx("option",{value:50,children:"50"}),v.jsx("option",{value:100,children:"100"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{onClick:()=>ve(Math.max(1,le-1)),disabled:le===1,className:"p-1 rounded hover:bg-black/5 disabled:opacity-30",children:v.jsx(Xv,{size:16})}),v.jsxs("span",{children:["Page ",le," of ",N||1]}),v.jsx("button",{onClick:()=>ve(Math.min(N,le+1)),disabled:le===N,className:"p-1 rounded hover:bg-black/5 disabled:opacity-30",children:v.jsx(lf,{size:16})})]})]})]})]})}function tk({onImport:s,darkMode:e,onRestore:t,notify:i}){const[o,u]=ie.useState(""),[h,m]=ie.useState(!1),g=ie.useRef(null),_=D=>{const H=D.target.files[0];t(H),D.target.value=null},x=D=>{const H=D.target.files[0];if(!H)return;const W=new FileReader;W.onload=$=>{const oe=$.target.result;try{JSON.parse(oe),s(oe),i("Questions imported from file!","success")}catch{u(oe),i("File has syntax errors. Loaded into editor for AI Repair.","warning")}},W.readAsText(H),D.target.value=null},A=()=>{g.current.click()},M=async()=>{if(o.trim()){m(!0);try{const D=JSON.parse(o);s(JSON.stringify(D)),u(""),i("Manual import successful!","success")}catch{console.warn("JSON Parse failed, attempting AI repair..."),i("Detecting corruption. Attempting AI repair...","error");try{const H=`The following JSON string has syntax errors. Correct it to be valid JSON. Output ONLY the corrected JSON with no markdown or explanation: 

${o}`,W=await Qs(H,"fix");s(W),i("AI repaired and imported data!","success"),u("")}catch{i("Data too corrupted for repair.","error")}}finally{m(!1)}}};return v.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Data Management"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:`p-6 rounded-2xl border flex flex-col ${e?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("h3",{className:"font-bold mb-3 text-lg flex items-center gap-2",children:[v.jsx(t0,{size:18})," Import Questions"]}),v.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Add new questions to your library. Use the text box for raw JSON or upload a JSON file."}),v.jsx("textarea",{className:`w-full flex-1 min-h-[150px] p-3 rounded-lg border font-mono text-xs mb-4 ${e?"bg-slate-950 border-slate-700":"bg-slate-50 border-slate-200"}`,value:o,onChange:D=>u(D.target.value),placeholder:"Paste JSON array here..."}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:M,disabled:!o||h,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-50 text-sm",children:[h?v.jsx(kr,{className:"animate-spin",size:16}):v.jsx(Fu,{size:16}),h?"Processing...":"Add Text"]}),v.jsx("input",{type:"file",accept:".json",ref:g,onChange:x,className:"hidden"}),v.jsxs("button",{onClick:A,className:`px-4 py-3 rounded-xl font-bold border flex items-center gap-2 text-sm ${e?"border-slate-700 hover:bg-slate-800":"border-slate-200 hover:bg-slate-50"}`,title:"Upload JSON File",children:[v.jsx(xS,{size:18})," Upload File"]})]})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("h3",{className:"font-bold mb-3 text-lg flex items-center gap-2",children:[v.jsx(fd,{size:18})," Restore Full Backup"]}),v.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Danger Zone: This will overwrite your current library and sessions with the backup file."}),v.jsxs("label",{className:"w-full flex items-center justify-center gap-2 bg-rose-600 text-white p-3 rounded-xl text-sm font-bold hover:bg-rose-700 cursor-pointer transition-colors",children:[v.jsx(fd,{size:16})," Restore System Backup",v.jsx("input",{type:"file",accept:".json",onChange:_,className:"hidden"})]})]}),v.jsxs("div",{className:`p-6 rounded-2xl border ${e?"bg-slate-900 border-slate-800":"bg-white border-slate-200 shadow-sm"}`,children:[v.jsxs("h3",{className:"font-bold mb-3 text-lg flex items-center gap-2",children:[v.jsx(Zv,{size:18})," Data Integrity"]}),v.jsxs("p",{className:"text-xs text-slate-500",children:[v.jsx("strong",{children:"Auto-Repair:"}),' If your uploaded JSON is broken, the text will appear in the editor on the left. Click "Add Text" to let AI fix it.']})]})]})]})]})}function nk(){const[s,e]=ie.useState(null),[t,i]=ie.useState("connecting"),[o,u]=ie.useState(!1),[h,m]=ie.useState(null),[g]=ie.useState(Date.now()),[_,x]=ie.useState("control"),[A,M]=ie.useState(!0),[D,H]=ie.useState(!1),[W,$]=ie.useState([]),[oe,ye]=ie.useState([]),[le,ve]=ie.useState(null),[Le,Te]=ie.useState(null),P=ie.useRef(null),T=JSON.parse(__firebase_config),k=Xg(T),R=Z1(k),N=WI(k),V=typeof __app_id<"u"?__app_id:"default-app-id",I=(Y,K="success")=>{Te({message:Y,type:K,id:Date.now()}),setTimeout(()=>Te(null),3e3)};ie.useEffect(()=>((async()=>{typeof __initial_auth_token<"u"&&__initial_auth_token?await FE(R,__initial_auth_token):await OE(R)})(),BE(R,e)),[]),ie.useEffect(()=>{if(!s)return;const Y=Vg(N,"artifacts",V,"public","data","shared_study_data",Fg),K=aS(Y,ne=>{if(ne.exists()){const Ne=ne.data();$(Ne.masterLibrary||[]),ye(Ne.sessions||[]),ve(Ne.activeSessionId),m(Ne.lastUpdated),i("idle"),u(!1),console.log("Firestore Data Synced: Master Library size",(Ne.masterLibrary||[]).length)}else Ug.length>0?Be():i("idle"),console.log("Firestore Initialized (Clean State)")},ne=>{console.error("Cloud Sync Error:",ne),u(!0),i("error"),ue()});return()=>K()},[s]);const ue=()=>{try{const Y=localStorage.getItem("ICU_PRO_FALLBACK");if(Y){const K=JSON.parse(Y);$(K.masterLibrary||[]),ye(K.sessions||[]),ve(K.activeSessionId),console.log("Local Fallback Loaded: Master Library size",(K.masterLibrary||[]).length)}else Be(!0)}catch{}},Be=async(Y=!1)=>{const K=Ug.map(ne=>({...ne,importedAt:Date.now(),globalState:{status:"unanswered",timesWrong:0,flagged:!1}}));if(Y){$(K);return}await Ae({masterLibrary:K,sessions:[],activeSessionId:null,view:"control"})},Ae=async Y=>{const K={masterLibrary:Y.masterLibrary||W,sessions:Y.sessions||oe,activeSessionId:Y.activeSessionId!==void 0?Y.activeSessionId:le,view:Y.view||_,lastUpdated:cS()};if(Y.masterLibrary&&$(Y.masterLibrary),Y.sessions&&ye(Y.sessions),Y.activeSessionId!==void 0&&ve(Y.activeSessionId),localStorage.setItem("ICU_PRO_FALLBACK",JSON.stringify(zg(K))),!(o||!s)){i("syncing");try{const ne=Vg(N,"artifacts",V,"public","data","shared_study_data",Fg);await oS(ne,zg(K)),i("saved"),setTimeout(()=>i("idle"),1500)}catch(ne){console.error("Save failed",ne),i("error"),u(!0)}}},Ie=Y=>{let K=[...W];Y.packages.length>0&&(K=K.filter(Ce=>Y.packages.includes(Ce.package))),Y.mode==="wrong"&&(K=K.filter(Ce=>Ce.globalState.status==="wrong")),Y.mode==="flagged"&&(K=K.filter(Ce=>Ce.globalState.flagged)),Y.mode==="unanswered"&&(K=K.filter(Ce=>Ce.globalState.status==="unanswered")),Y.shuffle&&(K=BS(K));const ne=K.map(Ce=>({...Ce,sessionState:{status:"unanswered",selectedIndex:null,notes:""}})),Ne={id:`sess_${Date.now()}`,name:`Session ${oe.length+1}`,createdAt:Date.now(),config:Y,questions:ne,currentIndex:0},tt=[Ne,...oe];Ae({sessions:tt,activeSessionId:Ne.id,view:"study"}),x("study")},Z=Y=>{const K=oe.filter(Ne=>Ne.id!==Y),ne=le===Y?null:le;Ae({sessions:K,activeSessionId:ne}),ne||x("sessions")},he=(Y,K,ne)=>{const Ne=oe.map(Ce=>{if(Ce.id!==Y)return Ce;const $t=Ce.questions.map(Gt=>{if(Gt.id!==K)return Gt;let Or={...Gt,sessionState:{...Gt.sessionState,...ne}};return ne.flagged!==void 0&&(Or.globalState={...Gt.globalState,flagged:ne.flagged}),Or});return{...Ce,questions:$t}});let tt=W;ne.status&&ne.status!=="unanswered"&&(tt=W.map(Ce=>Ce.id!==K?Ce:{...Ce,globalState:{...Ce.globalState,status:ne.status,timesWrong:ne.status==="wrong"?(Ce.globalState.timesWrong||0)+1:Ce.globalState.timesWrong}})),ne.flagged!==void 0&&(tt=W.map(Ce=>Ce.id===K?{...Ce,globalState:{...Ce.globalState,flagged:ne.flagged}}:Ce)),Ae({sessions:Ne,masterLibrary:tt})},se=()=>{const Y={masterLibrary:W,sessions:oe,activeSessionId:le},K=new Blob([JSON.stringify(Y,null,2)],{type:"application/json"}),ne=URL.createObjectURL(K),Ne=document.createElement("a");Ne.href=ne,Ne.download=`icu_local_backup_${new Date().toISOString().slice(0,10)}_${new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/:/g,"-")}.json`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),URL.revokeObjectURL(ne),I("Local backup saved!","success")},O=Y=>{if(!Y)return;const K=new FileReader;K.readAsText(Y,"UTF-8"),K.onload=ne=>{try{const Ne=JSON.parse(ne.target.result);if(!Ne.masterLibrary||!Array.isArray(Ne.sessions))throw new Error("Invalid backup file format.");Ae({masterLibrary:Ne.masterLibrary,sessions:Ne.sessions,activeSessionId:Ne.activeSessionId}),I("Data restored & synced!","success")}catch{I("Restore failed: Invalid file.","error")}}},L=async()=>{window.confirm("Are you sure you want to overwrite current data with the last cloud backup? This guarantees the latest online data is pulled.")&&(i("connecting"),setTimeout(()=>{I("Cloud data refreshed.","success"),i("idle")},2e3))},ee=ie.useMemo(()=>oe.find(Y=>Y.id===le),[oe,le]),Se=Y=>{try{const K=Y.replace(/```json/g,"").replace(/```/g,"").trim();let ne=JSON.parse(K);Array.isArray(ne)||(ne=[ne]);const Ne=new Set(W.map($t=>$t.question)),tt=ne.filter($t=>!Ne.has($t.question)).map(($t,Gt)=>({...$t,id:`imp_${Date.now()}_${Gt}`,globalState:{status:"unanswered",timesWrong:0,flagged:!1},importedAt:Date.now()}));if(tt.length===0){I("No new questions (duplicates skipped).","error");return}const Ce=[...W,...tt];Ae({masterLibrary:Ce}),I(`Imported ${tt.length} questions!`,"success"),x("library")}catch{I("Import failed: Invalid JSON.","error")}},fe=Y=>{Ae({masterLibrary:Y})},Pe=()=>{P.current.click()},Me=Y=>{const K=Y.target.files[0];O(K),Y.target.value=null};return s?v.jsxs("div",{className:`flex h-screen font-sans overflow-hidden transition-colors duration-300 ${D?"bg-slate-950 text-slate-100":"bg-slate-50 text-slate-900"}`,children:[v.jsxs("nav",{className:`w-20 flex flex-col items-center py-6 z-50 shrink-0 border-r ${D?"bg-slate-900 border-slate-800":"bg-white border-slate-200"}`,children:[v.jsx("div",{className:"mb-8 p-2 bg-indigo-600 rounded-xl text-white shadow-lg",children:v.jsx(mS,{size:24})}),v.jsxs("div",{className:"space-y-6 w-full flex flex-col items-center",children:[v.jsx(os,{active:_==="control",onClick:()=>x("control"),icon:v.jsx(uf,{}),label:"Control"}),v.jsx(os,{active:_==="stats",onClick:()=>x("stats"),icon:v.jsx(pS,{}),label:"Stats"}),v.jsx(os,{active:_==="sessions",onClick:()=>x("sessions"),icon:v.jsx(SS,{}),label:"Sessions"}),v.jsx(os,{active:_==="study",onClick:()=>{x(le?"study":"sessions")},icon:v.jsx(IS,{}),label:"Study"}),v.jsx(os,{active:_==="generator",onClick:()=>x("generator"),icon:v.jsx(co,{}),label:"AI Gen"}),v.jsx(os,{active:_==="library",onClick:()=>x("library"),icon:v.jsx(cf,{}),label:"Library"}),v.jsx(os,{active:_==="import",onClick:()=>x("import"),icon:v.jsx(t0,{}),label:"Import"})]}),v.jsxs("div",{className:"mt-auto space-y-4 w-full flex flex-col items-center pb-4",children:[v.jsx("button",{onClick:L,className:"text-slate-400 hover:text-indigo-500 p-2 rounded-lg hover:bg-slate-100",title:"Manual Cloud Sync/Restore",children:v.jsx(n0,{size:24})}),v.jsx("input",{type:"file",accept:".json",ref:P,onChange:Me,className:"hidden"}),v.jsx("button",{onClick:Pe,className:"text-slate-400 hover:text-indigo-500 p-2 rounded-lg hover:bg-slate-100",title:"Restore Local Backup",children:v.jsx(fd,{size:24})}),v.jsx("button",{onClick:se,className:"text-slate-400 hover:text-emerald-500 p-2 rounded-lg hover:bg-slate-100",title:"Download Local Backup",children:v.jsx(wS,{size:24})}),v.jsx(os,{active:D,onClick:()=>H(!D),icon:D?v.jsx(MS,{}):v.jsx(CS,{}),label:"Theme"})]})]}),v.jsxs("main",{className:"flex-1 flex flex-col min-w-0 relative overflow-hidden",children:[v.jsx(qS,{syncStatus:t,activeView:_,darkMode:D,fallbackMode:o,lastCloudUpdate:h,sessionStartTime:g,onManualSync:L}),v.jsx(WS,{notification:Le,onClose:()=>Te(null)}),v.jsx(zS,{children:v.jsxs("div",{className:"flex-1 overflow-y-auto scroll-smooth custom-scrollbar relative",children:[_==="control"&&v.jsx(GS,{library:W,onCreate:Ie,darkMode:D,notify:I}),_==="stats"&&v.jsx(ZS,{library:W,darkMode:D}),_==="sessions"&&v.jsx(QS,{sessions:oe,onResume:Y=>{ve(Y),x("study")},onDelete:Z,activeId:le,darkMode:D,notify:I}),_==="study"&&ee&&v.jsxs("div",{className:"flex h-full",children:[v.jsxs("div",{className:"flex-1 overflow-y-auto relative",children:[v.jsx("button",{onClick:()=>M(!A),className:`absolute top-4 right-4 z-20 p-2 rounded-lg ${D?"bg-slate-800 text-slate-400 hover:text-white":"bg-white text-slate-500 shadow-sm border border-slate-200 hover:text-slate-800"}`,children:A?v.jsx(RS,{size:18}):v.jsx(PS,{size:18})}),v.jsx(YS,{session:ee,onUpdate:he,onNavigate:Y=>{const K=oe.map(ne=>ne.id===ee.id?{...ne,currentIndex:Y}:ne);ye(K),Ae({sessions:K})},darkMode:D})]}),v.jsx("div",{className:`${A?"w-80":"w-0"} border-l transition-all duration-300 flex flex-col ${D?"bg-slate-900 border-slate-800":"bg-white border-slate-200"}`,children:v.jsx(JS,{session:ee,onNavigate:Y=>{const K=oe.map(ne=>ne.id===ee.id?{...ne,currentIndex:Y}:ne);ye(K),Ae({sessions:K})},darkMode:D})})]}),_==="study"&&!ee&&v.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-50",children:[v.jsx(r0,{size:48,className:"mb-4"}),v.jsx("p",{children:"No active session."}),v.jsx("button",{onClick:()=>x("control"),className:"mt-4 text-indigo-500 font-bold",children:"Start New Session"})]}),_==="generator"&&v.jsx(KS,{onAdd:Se,darkMode:D,notify:I}),_==="library"&&v.jsx(ek,{library:W,darkMode:D,onUpdate:fe}),_==="import"&&v.jsx(tk,{onImport:Se,darkMode:D,onRestore:O,notify:I})]})})]})]}):v.jsxs("div",{className:"h-screen flex items-center justify-center bg-slate-50 text-slate-500",children:[v.jsx(kr,{className:"animate-spin mr-2"})," Secure Connecting..."]})}typeof window<"u"&&!window.__firebase_config&&(window.__firebase_config=JSON.stringify({apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}));v_.createRoot(document.getElementById("root")).render(v.jsx(md.StrictMode,{children:v.jsx(nk,{})}));
