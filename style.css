
:root{
  --bg:#0b1020; --bg2:#0e1530; --card:#121a36; --card2:#0f1733;
  --text:#e6eaff; --muted:#9aa6d8; --accent:#4f8cff; --accent2:#7dd3fc;
  --danger:#ff6b6b; --ok:#34d399; --warn:#fbbf24; --line:#222c52;
  --radius:14px;
  font-synthesis: none;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
  background:var(--bg); color:var(--text);
}
.app{max-width:1300px; margin:0 auto; padding:12px}
.top-bar{
  display:flex; align-items:center; justify-content:space-between;
  background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
  padding:10px 12px; position:sticky; top:0; z-index:20;
}
.brand-area{display:flex; gap:10px; align-items:center}
.logo{font-size:26px}
.ver{color:var(--accent)}
.xp-wrapper{font-size:12px; color:var(--muted)}
.chips{display:flex; align-items:center; gap:6px; flex-wrap:wrap}
.chip{
  background:var(--card); border:1px solid var(--line); padding:6px 8px;
  border-radius:999px; font-size:12px; color:var(--muted)
}
.header-btn{cursor:pointer; color:var(--text)}
.tabs{
  margin-top:10px; display:flex; gap:6px; flex-wrap:wrap;
}
.tab-button{
  background:var(--card); border:1px solid var(--line); color:var(--text);
  padding:8px 12px; border-radius:10px; cursor:pointer; font-size:14px;
}
.tab-button.active{background:var(--accent); color:#03102a; border-color:transparent; font-weight:700}
.tab-container{margin-top:10px}
.tab-content{display:none}
.tab-content.active{display:block}

.card{
  background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
  padding:12px; margin-bottom:12px;
}
.main-layout{display:grid; grid-template-columns:1fr 280px; gap:10px}
@media (max-width:1000px){.main-layout{grid-template-columns:1fr}}
.side-card{background:var(--card2)}

.row-controls{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
.std-select,.std-input,.std-textarea{
  background:var(--input-bg, #0b1330); border:1px solid var(--line); color:var(--text);
  padding:8px 10px; border-radius:10px; font-size:14px; outline:none;
}
.std-textarea{width:100%; resize:vertical}
.chapter-list{min-width:160px}
.refresh-btn,.pill-btn,.primary-btn,.secondary-btn,.danger-btn,.ghost-btn,.nav-btn,.tiny-btn{
  border:none; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:600;
}
.refresh-btn{background:#18224a; color:var(--text)}
.pill-btn{background:#192958; color:var(--text)}
.primary-btn{background:var(--accent); color:#03102a}
.secondary-btn{background:#233164; color:var(--text)}
.danger-btn{background:var(--danger); color:#240000}
.ghost-btn{background:transparent; border:1px dashed var(--line); color:var(--muted)}
.nav-btn{background:#1b254f; color:var(--text)}
.tiny-btn{background:#1b254f; color:var(--text); font-size:12px; padding:6px 8px}

.check-label{display:flex; gap:6px; align-items:center; font-size:13px; color:var(--muted)}
.small-label{font-size:12px; color:var(--muted); margin-bottom:4px}
.warning-text{color:var(--warn)}

.question-panel{min-height:160px}
.q-text{font-size:18px; font-weight:700; line-height:1.5}
.tag-chapter{margin-top:6px; font-size:12px; color:var(--muted)}
.choice{
  display:block; padding:8px 10px; background:var(--choice-bg, var(--input-bg, #0b1330)); border:1px solid var(--line);
  border-radius:10px; margin-top:6px; cursor:pointer;
}
.choice.correct{border-color:var(--ok); box-shadow:0 0 0 1px var(--ok) inset}
.choice.wrong{border-color:var(--danger); box-shadow:0 0 0 1px var(--danger) inset}
.choice input{margin-right:8px}

.feedback-panel{margin-top:8px; padding:10px; background:#0b1330; border:1px solid var(--line); border-radius:10px}
.feedback-panel.hidden{display:none}

.notes-container{margin-top:10px}
.notes-textarea{width:100%; min-height:70px}

.btn-row-main{display:flex; gap:8px; align-items:center; margin-top:10px}
.large{padding:10px 16px; font-size:16px}
.hidden{display:none !important}

.srs-row{display:flex; gap:6px; margin-top:8px}
.srs-btn{flex:1; padding:8px; border-radius:10px; font-weight:700; cursor:pointer}
.srs-btn.again{background:#2a1630; color:#ffd1d1}
.srs-btn.hard{background:#2a2442; color:#ffe7b8}
.srs-btn.good{background:#16302a; color:#c8ffd1}
.srs-btn.easy{background:#18304a; color:#c8e7ff}

.nav-row{display:flex; gap:8px; margin-top:8px}

.history-list{max-height:420px; overflow:auto}
.history-item{
  padding:8px; border:1px solid var(--line); border-radius:8px; margin-top:6px; cursor:pointer;
  background:#0b1330;
}
.pill{display:inline-block; padding:2px 6px; border-radius:999px; font-size:11px; margin-left:4px}
.pill-correct{background:#13341f; color:#b6ffd1}
.pill-wrong{background:#3a1717; color:#ffd1d1}
.pill-flag{background:#352a12; color:#ffe3a1}
.pill-maint{background:#122636; color:#a8dbff}
.pill-pin{background:#1a1a2e; color:#e6eaff}
.pill-weak{background:#2b1236; color:#f0b6ff}
.pill-dup{background:#361212; color:#ffb6b6}
.pill-due{background:#12362a; color:#b6ffd1}

.library-card{min-height:70vh}
.library-sticky-header{position:sticky; top:64px; z-index:10; background:var(--card); padding-bottom:8px}
.filter-bar{display:flex; gap:8px; flex-wrap:wrap}
.action-area{display:flex; align-items:center; gap:8px; margin-top:8px; flex-wrap:wrap}
.action-group{display:flex; gap:6px; align-items:center}
.spacer{flex:1}

.table-wrapper{overflow:auto; max-height:60vh; border:1px solid var(--line); border-radius:10px; margin-top:8px}
.q-table{width:100%; border-collapse:collapse; font-size:13px}
.q-table th,.q-table td{border-bottom:1px solid var(--line); padding:6px 8px; vertical-align:top}
.q-table thead th{position:sticky; top:0; background:#0d1738; z-index:2; text-align:left}
.q-table tbody tr:hover{background:#0b1330}

.all-footer{display:flex; align-items:center; justify-content:space-between; margin-top:8px}
.pagination{display:flex; gap:6px; align-items:center}

.drop-zone{
  border:2px dashed var(--line); padding:16px; text-align:center; border-radius:10px; margin-top:8px;
}

.flashcard{
  margin-top:10px; background:#0b1330; border:1px solid var(--line); border-radius:12px; padding:14px; min-height:140px;
}
.flashcard .hidden{display:none}

.center-layout{max-width:700px; margin:0 auto}
.btn-row{display:flex; gap:8px; margin-top:8px}

.dashboard-grid{
  display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:10px;
}
@media(max-width:900px){.dashboard-grid{grid-template-columns:1fr}}
.dash-box{background:#0b1330; border:1px solid var(--line); border-radius:12px; padding:10px}

.modal{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:50;
}
.modal.hidden{display:none}
.modal-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.6)}
.modal-content{
  position:relative; background:var(--card); border:1px solid var(--line); border-radius:12px;
  padding:12px; width:min(820px,95vw); max-height:90vh; overflow:auto;
}
.row-inputs{display:flex; gap:8px; margin-top:6px}
.edit-choice-row{display:flex; gap:8px; align-items:center; margin-top:6px}
.edit-choice-row .choice-text{flex:1}
.modal-footer{display:flex; gap:8px; justify-content:flex-end; margin-top:10px}

.toast-container{
  position:fixed; top:12px; right:12px; z-index:100; display:flex; flex-direction:column; gap:6px;
}
.toast{
  background:#0b1330; color:var(--text); border:1px solid var(--line); padding:8px 10px; border-radius:10px; font-size:13px;
}

.theme-light{
  --bg:#f4f6fb;
  --bg2:#e9eef7;
  --card:#ffffff;
  --card2:#f3f0ff;
  --text:#111827;
  --muted:#4b5563;
  --line:#d7dbe6;
  --accent:#2563eb;
  --accent2:#1d4ed8;
  --ok:#16a34a;
  --bad:#dc2626;
  --warn:#d97706;
  --input-bg:#f7f5ff;
  --choice-bg:#ffffff;
}


.seq-nav{ display:flex; flex-wrap:wrap; gap:6px; margin-top:6px;}
.seq-btn{ min-width:34px; height:34px; border-radius:8px; border:1px solid var(--line); background:var(--card2); color:var(--text); display:flex; align-items:center; justify-content:center; font-size:12px; cursor:pointer;}
.seq-btn.correct{ background:rgba(22,163,74,0.12); border-color:rgba(22,163,74,0.5);}
.seq-btn.wrong{ background:rgba(220,38,38,0.12); border-color:rgba(220,38,38,0.5);}
.seq-btn.flagged{ outline:2px solid var(--warn); }
.seq-btn.active{ box-shadow:0 0 0 2px var(--accent); }

.cloud-backups-list{ display:flex; flex-direction:column; gap:6px; margin-top:6px;}
.cloud-backup-row{ display:flex; align-items:center; justify-content:space-between; padding:6px 8px; border:1px solid var(--line); background:var(--card); border-radius:8px;}

.session-item{ display:flex; align-items:center; justify-content:space-between; padding:10px; border:1px solid var(--line); background:var(--card); border-radius:10px; margin-bottom:8px;}
.session-meta{ color:var(--muted); font-size:12px;}
.session-actions{ display:flex; gap:6px;}
.session-actions .primary{ background:var(--accent); color:white; border:none; padding:6px 10px; border-radius:8px; cursor:pointer;}
.session-actions .ghost{ background:transparent; color:var(--text); border:1px solid var(--line); padding:6px 10px; border-radius:8px; cursor:pointer;}
