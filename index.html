<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MCQ Titanium v7.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#0f172a">
  <link rel="stylesheet" href="style.css?v=7.0.0">
</head>
<body>

<div id="toastContainer" class="toast-container"></div>

<div class="app" id="appRoot">
  
  <aside class="sidebar">
    <div class="logo-area">
      <div class="logo-icon">‚ö°</div>
      <div class="logo-text">
        <h2>Titanium</h2>
        <span class="ver">v7.0 Ultimate</span>
      </div>
    </div>

    <div class="user-widget">
      <div class="user-avatar">üë®‚Äç‚öïÔ∏è</div>
      <div class="user-info">
        <div id="userRank" class="rank-badge">Intern</div>
        <div class="xp-track">
          <div id="xpBar" class="xp-fill" style="width: 0%"></div>
        </div>
        <div class="xp-text"><span id="currentXP">0</span> / <span id="nextXP">1000</span> XP</div>
      </div>
    </div>

    <nav class="nav-menu">
      <button class="nav-item active" data-view="dashboard">
        <span class="icon">üìä</span> Dashboard
      </button>
      <button class="nav-item" data-view="practice">
        <span class="icon">üß†</span> Smart Practice
      </button>
      <button class="nav-item" data-view="library">
        <span class="icon">üìö</span> Question Bank
      </button>
      <button class="nav-item" data-view="exams">
        <span class="icon">‚è±Ô∏è</span> Exam Simulator
      </button>
      <button class="nav-item" data-view="analytics">
        <span class="icon">üìà</span> Deep Analytics
      </button>
      <div class="spacer"></div>
      <button class="nav-item" data-view="settings">
        <span class="icon">‚öôÔ∏è</span> Settings & Cloud
      </button>
    </nav>
  </aside>

  <main class="main-content">
    
    <header class="header">
      <h2 id="pageTitle">Overview</h2>
      <div class="header-tools">
        <div class="streak-box" title="Daily Streak">
          üî• <span id="streakCount">0</span> Days
        </div>
        <button id="themeToggle" class="icon-btn">üåó</button>
        <button id="forceSync" class="icon-btn">‚òÅÔ∏è Sync</button>
      </div>
    </header>

    <div id="view-dashboard" class="view-panel active">
      <div class="dashboard-grid">
        <div class="stat-card highlight">
          <div class="label">Questions Mastered</div>
          <div class="value" id="dashMastered">0</div>
          <div class="trend">Keep pushing!</div>
        </div>
        <div class="stat-card">
          <div class="label">Total Questions</div>
          <div class="value" id="dashTotal">0</div>
        </div>
        <div class="stat-card">
          <div class="label">Due for Review</div>
          <div class="value" id="dashDue">0</div>
        </div>
        <div class="stat-card">
          <div class="label">Accuracy Rate</div>
          <div class="value" id="dashAccuracy">0%</div>
        </div>
        
        <div class="chart-card big">
          <div class="card-header">Study Activity (Last 7 Days)</div>
          <canvas id="activityCanvas" height="200"></canvas>
        </div>
      </div>
    </div>

    <div id="view-practice" class="view-panel">
      <div class="setup-box" id="practiceSetup">
        <h3>Configure Session</h3>
        <div class="config-grid">
          <div class="config-item">
            <label>Mode</label>
            <select id="pMode" class="std-input">
              <option value="adaptive">Adaptive (Smart AI)</option>
              <option value="random">Random Shuffle</option>
              <option value="weakest">Weakest Topics First</option>
              <option value="new">New Questions Only</option>
              <option value="chapter">Specific Chapter</option>
            </select>
          </div>
          <div class="config-item" id="pChapterBox" style="display:none;">
            <label>Select Chapter</label>
            <select id="pChapter" class="std-input"></select>
          </div>
          <div class="config-item">
             <label>Questions Limit</label>
             <input type="number" id="pLimit" value="20" class="std-input">
          </div>
        </div>
        <div class="config-toggles">
           <label><input type="checkbox" id="pTimer" checked> Show Timer</label>
           <label><input type="checkbox" id="pInstant" checked> Instant Feedback</label>
        </div>
        <button id="btnStartSession" class="hero-btn">üöÄ Launch Session</button>
      </div>

      <div id="activeSession" class="session-container hidden">
        <div class="session-header">
          <div class="progress-pill">Q <span id="sIndex">1</span>/<span id="sTotal">20</span></div>
          <div class="timer-pill" id="sTimer">00:00</div>
          <button class="end-btn" id="btnEndSession">End</button>
        </div>
        
        <div class="split-layout">
           <div class="q-area">
              <div id="qContent" class="q-text"></div>
              <div id="qImage" class="q-media hidden"></div>
              <div id="qChoices" class="choices-list"></div>
           </div>
           <div class="tools-area">
              <div class="tool-card">
                 <h4>Tools</h4>
                 <div class="tool-grid">
                   <button class="tool-icon" id="toolFlag">üö© Flag</button>
                   <button class="tool-icon" id="toolStrike">‚úèÔ∏è Strike</button>
                   <button class="tool-icon" id="toolSearch">üîç Ref</button>
                   <button class="tool-icon" id="toolNote">üìù Note</button>
                 </div>
              </div>
              <div class="tool-card note-card hidden" id="noteBox">
                 <textarea id="sessionNote" placeholder="Type clinical note..."></textarea>
                 <button id="saveSessionNote" class="tiny-btn">Save</button>
              </div>
           </div>
        </div>

        <div class="session-footer">
           <div id="srsButtons" class="srs-grid hidden">
             <button class="srs-btn again" onclick="rateQ(1)">Again <small><1m</small></button>
             <button class="srs-btn hard" onclick="rateQ(2)">Hard <small>2d</small></button>
             <button class="srs-btn good" onclick="rateQ(3)">Good <small>4d</small></button>
             <button class="srs-btn easy" onclick="rateQ(4)">Easy <small>7d</small></button>
           </div>
           <button id="btnSubmitAnswer" class="primary-btn large">Submit Answer</button>
           <button id="btnNextQuestion" class="primary-btn large hidden">Next Question ‚Üí</button>
        </div>
        
        <div id="explanationBox" class="explanation hidden">
           <h4>Explanation</h4>
           <div id="explText"></div>
        </div>
      </div>
    </div>

    <div id="view-library" class="view-panel">
      <div class="toolbar">
         <div class="search-group">
            <input id="libSearch" placeholder="Advanced Search..." class="std-input">
            <select id="libFilter" class="std-input">
               <option value="all">Filter: None</option>
               <option value="flagged">Flagged</option>
               <option value="notes">With Notes</option>
               <option value="wrong">With Errors</option>
            </select>
         </div>
         <div class="action-group">
            <button id="btnBulkMode" class="secondary-btn">‚ú® Select Mode</button>
            <button id="btnImportData" class="secondary-btn">üì• Import</button>
            <button id="btnExportData" class="secondary-btn">üì§ Export</button>
            <button id="btnAddManual" class="primary-btn">+ Add New</button>
         </div>
      </div>
      
      <div id="bulkBar" class="bulk-toolbar hidden">
         <span>Selected: <b id="selCount">0</b></span>
         <div class="bulk-actions">
            <button onclick="execBulk('delete')" class="danger-btn">Delete</button>
            <button onclick="execBulk('reset')" class="secondary-btn">Reset Stats</button>
            <button onclick="execBulk('tag')" class="secondary-btn">Add Tag</button>
         </div>
      </div>

      <div class="table-responsive">
         <table class="titan-table">
            <thead>
               <tr>
                  <th width="40"><input type="checkbox" id="selectAll"></th>
                  <th class="sort" data-key="id" width="70">ID ‚áï</th>
                  <th class="sort" data-key="text">Question Stem ‚áï</th>
                  <th class="sort" data-key="chapter" width="150">Chapter ‚áï</th>
                  <th class="sort" data-key="status" width="100">Status ‚áï</th>
                  <th width="80">Actions</th>
               </tr>
            </thead>
            <tbody id="libraryTable"></tbody>
         </table>
      </div>
      <div class="pagination">
         <button id="pagePrev">Previous</button>
         <span id="pageInfo">Page 1</span>
         <button id="pageNext">Next</button>
      </div>
    </div>

    <div id="view-analytics" class="view-panel">
       <div class="charts-layout">
          <div class="chart-box">
             <h3>Weakest Chapters (Top 5)</h3>
             <canvas id="weakChart" height="250"></canvas>
          </div>
          <div class="chart-box">
             <h3>Answer Distribution</h3>
             <canvas id="distChart" height="250"></canvas>
          </div>
       </div>
    </div>

    <div id="view-exams" class="view-panel">
       <div class="exam-intro card">
          <h2>Real Exam Mode</h2>
          <p>Timed, no feedback, random block.</p>
          <div class="row-controls">
             <input id="examQty" type="number" value="40" class="std-input" style="width:80px">
             <button id="btnLaunchExam" class="primary-btn">Start Block</button>
          </div>
       </div>
       </div>

    <div id="view-settings" class="view-panel">
       <div class="settings-grid">
          <div class="card">
             <h3>GitHub Cloud</h3>
             <input id="ghToken" type="password" class="std-input full" placeholder="Token">
             <input id="ghRepo" class="std-input full" placeholder="User/Repo">
             <button id="btnSaveSettings" class="primary-btn">Save Connection</button>
             <hr>
             <button id="btnCloudUp" class="secondary-btn">Force Upload</button>
             <button id="btnCloudDown" class="secondary-btn">Force Download</button>
          </div>
          <div class="card">
             <h3>System Maintenance</h3>
             <button id="btnWipe" class="danger-btn">Factory Reset</button>
             <button id="btnFixIDs" class="secondary-btn">Repair Database IDs</button>
          </div>
       </div>
    </div>

  </main>
</div>

<div id="modalEditor" class="modal hidden">
   <div class="modal-content large">
      <div class="modal-header">
         <h3>Question Editor</h3>
         <button class="close-modal">‚úï</button>
      </div>
      <div class="editor-grid">
         <div class="field-group full">
            <label>Question Text</label>
            <textarea id="edtText" rows="3"></textarea>
         </div>
         <div class="field-group">
            <label>Chapter</label>
            <input id="edtChapter">
         </div>
         <div class="field-group">
            <label>Tags (comma separated)</label>
            <input id="edtTags">
         </div>
         <div class="field-group full">
            <label>Explanation</label>
            <textarea id="edtExpl" rows="3"></textarea>
         </div>
         <div class="field-group full">
            <label>Choices</label>
            <div id="edtChoicesContainer"></div>
            <button id="edtAddChoice" class="tiny-btn">+ Choice</button>
         </div>
      </div>
      <div class="modal-footer">
         <button id="edtSave" class="primary-btn">Save Changes</button>
      </div>
   </div>
</div>

<script src="app.js?v=7.0.0"></script>
</body>
</html>
