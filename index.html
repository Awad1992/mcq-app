<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>MCQ Ultra-Pro v10.1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#2563eb">
  <link rel="manifest" href="manifest.json?v=10.1.0">
  <link rel="stylesheet" href="style.css?v=10.1.0">
</head>
<body>

<div id="toastContainer" class="toast-container"></div>

<div class="app" id="appRoot">
  
  <header class="top-bar">
    <div class="brand-area">
      <h1>MCQ Ultra-Pro <span class="ver">v10.1</span></h1>
    </div>
    <div class="chips">
      <button id="btnHeaderBackup" class="chip chip-sync" onclick="switchTab('backup')">‚òÅÔ∏è Backup</button>
      <select id="themeSelect" class="chip chip-theme">
        <option value="light">‚òÄÔ∏é Light</option>
        <option value="dark">üåô Dark</option>
      </select>
    </div>
  </header>

  <nav class="tabs">
    <button class="tab-button active" data-tab="home">Practice</button>
    <button class="tab-button" data-tab="library">Library</button>
    <button class="tab-button" data-tab="collections">Collections</button>
    <button class="tab-button" data-tab="exam">Sim</button>
    <button class="tab-button" data-tab="dashboard">Stats</button>
    <button class="tab-button" data-tab="backup">Backup</button>
    <button class="tab-button" data-tab="settings">Settings</button>
  </nav>

  <main class="tab-container">
    <section class="tab-content active" id="tab-home">
        <div class="card">
            <div class="row-controls">
              <select id="modeSelect" class="std-select"><option value="due">Due</option><option value="all">All</option><option value="wrong">Wrong</option><option value="chapter">Chapter</option></select>
              <select id="chapterSelect" class="std-select" style="display:none;"><option value="">Select Chapter</option></select>
              <label class="check-label"><input type="checkbox" id="prefSkipSolved" checked> Skip Solved</label>
            </div>
            <div id="questionPanel" class="question-panel"></div>
            <textarea id="userNoteArea" class="notes-textarea" placeholder="Notes..."></textarea>
            <div id="saveNoteStatus" class="save-status"></div>
            <div id="feedbackPanel" class="feedback-panel hidden"></div>
            <div class="btn-row-main">
              <button class="primary-btn" id="btnSubmit">Submit</button>
              <button class="nav-btn" id="btnPrev">Previous</button>
              <button class="nav-btn" id="btnNext">Next</button>
              <button class="ghost-btn" id="btnFlag">Flag</button>
            </div>
            <div id="searchTools" class="v-stack"></div>
        </div>
    </section>

    <section class="tab-content" id="tab-library">
        <div class="card">
            <div class="io-strip">
                <input type="file" id="libFileInput" accept=".json" class="hidden">
                <button id="btnLibImport" class="action-btn">Import</button>
                <button id="btnLibExport" class="secondary-btn">Export</button>
            </div>
            <div class="row-controls">
                <input id="allSearch" class="std-input" placeholder="Search...">
                <select id="allFilter" class="std-select"><option value="all">All</option><option value="wrong">Wrong</option><option value="flagged">Flagged</option></select>
                <select id="allChapterSelect" class="std-select chapter-list"><option value="">Chapters</option></select>
                <button id="btnAllApply" class="primary-btn">Apply</button>
            </div>
            <div class="table-wrapper">
                <table class="q-table">
                    <thead><tr><th>ID</th><th>Question</th><th>Chapter</th><th>Err</th><th>Edit</th></tr></thead>
                    <tbody id="allTableBody"></tbody>
                </table>
            </div>
        </div>
    </section>
    
    <section class="tab-content" id="tab-backup">
        <div class="card warning-border">
            <h2>GitHub Cloud</h2>
            <div class="sync-status-box">Status: <strong id="ghStatusText">Unknown</strong> <button id="btnTestConn" class="pill-btn small">Test</button></div>
            <div class="row-controls">
                <button id="btnCloudUpload" class="action-btn">Upload</button>
                <button id="btnCloudDownload" class="action-btn">Download</button>
            </div>
        </div>
        <div class="card">
             <h2>History</h2>
             <button id="btnTimeMachine" class="pill-btn">Open Time Machine</button>
             <div class="row-controls" style="margin-top:10px;">
                 <button id="btnLocalExport" class="secondary-btn">Export Local</button>
                 <input type="file" id="backupFileInput" accept=".json" class="hidden">
                 <button id="btnLocalImport" class="secondary-btn">Import Local</button>
             </div>
        </div>
    </section>

    <section class="tab-content" id="tab-settings">
        <div class="card">
            <h3>Config</h3>
            <div class="settings-grid">
                <input type="password" id="ghToken" placeholder="Token">
                <input id="ghRepo" placeholder="User/Repo">
                <input id="ghFile" value="mcq_backup.json">
                <button id="btnSaveGh" class="primary-btn">Save</button>
            </div>
        </div>
        <div class="card">
             <button id="btnResetAll" class="danger-btn">Factory Reset</button>
        </div>
    </section>

  </main>
</div>

<div id="modalTimeMachine" class="modal hidden">
   <div class="modal-content">
      <h3>Time Machine</h3>
      <div id="snapshotList" class="snap-list"></div>
      <button class="secondary-btn" onclick="document.getElementById('modalTimeMachine').classList.add('hidden')">Close</button>
   </div>
</div>

<div id="editModal" class="modal hidden">
    <div class="modal-content large">
        <h3>Edit</h3>
        <textarea id="edtText" class="std-textarea"></textarea>
        <input id="edtChapter" class="std-input" placeholder="Chapter">
        <textarea id="edtExpl" class="std-textarea"></textarea>
        <div id="edtChoices"></div>
        <div class="modal-footer">
            <button id="btnSaveEdit" class="primary-btn">Save</button>
            <button class="secondary-btn" onclick="document.getElementById('editModal').classList.add('hidden')">Cancel</button>
        </div>
    </div>
</div>

<button id="btnForceUpdate" class="floating-update-btn">‚Üª Reload</button>

<script src="app.js?v=10.1.0"></script>
</body>
</html>
